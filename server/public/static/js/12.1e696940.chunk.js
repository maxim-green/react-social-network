(this["webpackJsonpreact-social-network"]=this["webpackJsonpreact-social-network"]||[]).push([[12],{267:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var r=a(33),n=(a(0),a(268)),s=a.n(n),i=a(17),o=a(1),c=function(e){var t=e.name,a=e.label,n=e.rules,c=e.control,l=e.rows,u=void 0===l?2:l,d=e.disabled,m=void 0!==d&&d,j=e.placeholder;return Object(o.jsx)(r.a,{control:c,name:t,rules:n,render:function(e){var t=e.field,r=e.fieldState;return Object(o.jsx)(i.c,{label:a,required:!(null===n||void 0===n||!n.required),error:r.error,disabled:m,children:Object(o.jsx)("textarea",{className:"".concat(s.a.textarea," ").concat(r.error?s.a.error:""),name:t.name,value:t.value,onChange:t.onChange,rows:u,disabled:m,placeholder:j})})}})}},268:function(e,t,a){e.exports={dark:"InputTextarea_dark__1Bvup",textarea:"InputTextarea_textarea__3KxMk",error:"InputTextarea_error__lL7Wo"}},363:function(e,t,a){e.exports={dark:"Dialogs_dark__2e1-h",dialogs:"Dialogs_dialogs__2Gkkf",listActive:"Dialogs_listActive__2-6kS",dialogsList:"Dialogs_dialogsList__2Ipwc",header:"Dialogs_header__xjhog",dialogButton:"Dialogs_dialogButton__2Otzg",active:"Dialogs_active__3lrrn",newMessageForm:"Dialogs_newMessageForm__19zd-",messages:"Dialogs_messages__1J3nn",messageOther:"Dialogs_messageOther__39T5A",messageSelf:"Dialogs_messageSelf__24EQp",messageAvatar:"Dialogs_messageAvatar__13djB",messageAuthorName:"Dialogs_messageAuthorName__3t5yc"}},364:function(e,t,a){e.exports={dark:"NewMessageForm_dark__2tbhf",newMessageForm:"NewMessageForm_newMessageForm__RJt-t"}},382:function(e,t,a){"use strict";a.r(t);var r=a(5),n=a(9),s=a(0),i=a.n(s),o=a(19),c=a(363),l=a.n(c),u=a(364),d=a.n(u),m=a(8),j=a(17),g=a(267),b=a(1),f=function(e){var t=e.onSubmit;return Object(b.jsx)(j.a,{onSubmit:function(e){t(e.newMessageInput)},initialValues:{newMessageInput:""},resetAfterSubmit:!0,submitOnEnter:!0,children:Object(b.jsxs)(j.b,{children:[Object(b.jsx)(g.a,{name:"newMessageInput"}),Object(b.jsx)("div",{className:d.a.button,children:Object(b.jsx)(m.a,{children:"Send"})})]})})},h=a(47),O=a(49),v=a(6),p=a.n(v);function x(){return x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},x.apply(this,arguments)}function _(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},s=Object.keys(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var w=Object(s.forwardRef)((function(e,t){var a=e.color,r=e.size,n=_(e,["color","size"]);return i.a.createElement("svg",x({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:r,height:r,fill:a},n),i.a.createElement("path",{fillRule:"evenodd",d:"M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z"}))}));w.propTypes={color:p.a.string,size:p.a.oneOfType([p.a.string,p.a.number])},w.defaultProps={color:"currentColor",size:"1em"};var y=w;function N(){return N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},N.apply(this,arguments)}function z(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},s=Object.keys(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var k=Object(s.forwardRef)((function(e,t){var a=e.color,r=e.size,n=z(e,["color","size"]);return i.a.createElement("svg",N({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:r,height:r,fill:a},n),i.a.createElement("path",{fillRule:"evenodd",d:"M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z"}))}));k.propTypes={color:p.a.string,size:p.a.oneOfType([p.a.string,p.a.number])},k.defaultProps={color:"currentColor",size:"1em"};var S=k,D=a(14),I=a.n(D),A=function(e){var t=e.username,a=e.firstName,r=e.avatar;return Object(b.jsx)(o.b,{to:"/dialogs/".concat(t),className:l.a.dialogButton,activeClassName:l.a.active,children:Object(b.jsx)(O.a,{size:30,name:a,smallImg:r.small})})},M=function(e){var t=e.message,a=e.authUser;return Object(b.jsxs)("div",{className:a===t.author.username?l.a.messageSelf:l.a.messageOther,children:[Object(b.jsx)("div",{className:l.a.messageAvatar,children:Object(b.jsx)(O.a,{online:!0,smallImg:t.author.avatar.small,size:30})}),Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{className:l.a.messageAuthorName,children:t.author.firstName}),Object(b.jsx)("div",{children:t.text})]})]})},C=function(e){var t=e.messages,a=e.dialogs,i=e.authUser,o=e.onNewMessageSubmit,c=e.currentCompanion,u=Object(s.useState)(!1),d=Object(n.a)(u,2),j=d[0],g=d[1];return Object(b.jsx)(h.a,{children:Object(b.jsxs)("div",{className:I()(l.a.dialogs,Object(r.a)({},l.a.listActive,j)),children:[Object(b.jsxs)("div",{className:l.a.header,children:[Object(b.jsx)("div",{children:!j&&Object(b.jsx)(m.a,{type:"text",size:"xl",onClick:function(){return g(!0)},children:Object(b.jsx)(m.a.Icon,{children:Object(b.jsx)(y,{width:22,height:22})})})}),Object(b.jsxs)("div",{style:{fontWeight:700},children:[null===c||void 0===c?void 0:c.firstName," ",null===c||void 0===c?void 0:c.lastName]}),Object(b.jsx)("div",{style:{marginRight:10},children:Object(b.jsx)(O.a,{smallImg:null===c||void 0===c?void 0:c.avatar.small,size:36})})]}),Object(b.jsxs)("div",{className:I()(l.a.dialogsList,Object(r.a)({},l.a.listActive,j)),children:[Object(b.jsx)("div",{style:{height:65,display:"flex",justifyContent:"center",alignItems:"center",marginBottom:10},children:j&&Object(b.jsx)(m.a,{type:"text",size:"xl",onClick:function(){return g(!1)},children:Object(b.jsx)(m.a.Icon,{children:Object(b.jsx)(S,{width:22,height:22})})})}),a.map((function(e){return Object(b.jsx)(A,{username:e.companion.username,firstName:e.companion.firstName,avatar:e.companion.avatar},e._id)}))]}),Object(b.jsx)("div",{className:l.a.messages,children:t.slice().reverse().map((function(e,t){return Object(b.jsx)(M,{message:e,authUser:i},t)}))}),Object(b.jsx)("div",{className:l.a.newMessageForm,children:Object(b.jsx)(f,{onSubmit:o})})]})})},E=a(18),B=a(21),P=a(42),T=a(62);t.default=function(){var e,t=Object(E.g)().username,a=Object(B.c)((function(e){return e.dialogs.dialogs.slice().sort((function(e,t){var a=new Date(e.updatedAt),r=new Date(t.updatedAt);return a>r?-1:a<r?1:0}))})),r=Object(B.c)((function(e){return e.dialogs.currentDialogId})),n=Object(B.c)((function(e){var t;return null===(t=e.auth.user)||void 0===t?void 0:t.username})),i=Object(B.c)((function(e){return e.dialogs.messages})),o=null===(e=a.find((function(e){return e.companion.username===t})))||void 0===e?void 0:e.companion,c=Object(B.b)();return Object(s.useEffect)((function(){c(Object(P.c)(t))}),[t,c]),Object(s.useEffect)((function(){c(Object(P.b)())}),[c]),Object(T.a)()?!t&&a[0]&&0!==a.length?Object(b.jsx)(E.a,{to:"/dialogs/".concat(a[0].companion.username)}):Object(b.jsx)(C,{messages:i,dialogs:a,currentCompanion:o,authUser:n||"",onNewMessageSubmit:function(e){e.trim()&&r&&c(Object(P.d)(e.trim(),r))}}):Object(b.jsx)(E.a,{to:"/login"})}}}]);
//# sourceMappingURL=12.1e696940.chunk.js.map