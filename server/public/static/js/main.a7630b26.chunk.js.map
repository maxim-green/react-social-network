{"version":3,"sources":["components/_shared/Input/InputFile/InputFile.tsx","components/_forms/LoginForm.tsx","components/_shared/Input/InputCheckbox/InputCheckbox.tsx","api/user.api.ts","redux/reducers/users.reducer.ts","components/_shared/Input/InputImageCrop/InputImageCrop.tsx","components/_forms/ImageUploadForm/ImageUploadForm.tsx","components/_shared/Logo/Logo.module.scss","components/_shared/Card/Card.module.scss","components/Layout/SideBar/SidebarNavigation/SidebarNavigation.module.scss","assets/styles/breakpoints.module.scss","components/_shared/Form/Form.tsx","redux/reducers/app.reducer.ts","components/Layout/Header/UserControl/UserControl.tsx","assets/images/logo.svg","components/_shared/Logo/Logo.tsx","components/Layout/Header/Header.tsx","components/Layout/SideBar/SidebarNavigation/SidebarNavigation.tsx","components/Layout/SideBar/SidebarSubscriptions/SidebarSubscriptions.tsx","components/Layout/BottomNavigation/BottomNavigation.tsx","components/Layout/Layout.tsx","components/_pages/HomePage.tsx","components/App.tsx","reportWebVitals.js","redux/store.ts","index.js","components/_shared/Button/Button.module.scss","api/auth.api.ts","redux/reducers/auth.reducer.ts","api/core.api.ts","components/_shared/Form/Form.module.scss","api/socket.api.ts","api/dialog.api.ts","redux/reducers/dialogs.reducer.ts","components/_shared/Avatar/Avatar.module.scss","components/_shared/Flex/Flex.module.scss","assets/styles/colors.module.scss","components/Layout/Layout.module.scss","components/_shared/Card/Card.tsx","components/Layout/BottomNavigation/BottomNavigation.module.scss","components/_shared/Avatar/Avatar.tsx","assets/images/avatar-default.jpg","components/_shared/Spinner/Spinner.tsx","components/Layout/Header/UserControl/UserControl.module.scss","components/_shared/Input/InputFile/InputFile.module.scss","components/_shared/ModalWindow/ModalWindow.module.scss","components/Layout/SideBar/SidebarSubscriptions/SidebarSubscriptions.module.scss","utils/hooks.ts","assets/styles/sizes.module.scss","components/_shared/ModalWindow/ModalWindow.tsx","components/_shared/Button/Button.tsx","components/Layout/Header/Header.module.scss","components/_shared/Spinner/Spinner.module.scss","components/_shared/Input/InputImageCrop/InputImageCrop.module.scss","components/_shared/Input/InputText/InputText.module.scss","components/_shared/Input/InputPassword/InputPassword.module.scss","components/_shared/Input/InputCheckbox/InputCheckbox.module.scss","components/_shared/Flex/Flex.tsx","components/_shared/Input/InputText/InputText.tsx","api/post.api.ts","redux/reducers/posts.reducer.ts","components/_shared/Input/InputPassword/InputPassword.tsx","api/profile.api.ts","redux/reducers/profile.reducer.ts"],"names":["CustomInputFile","onChange","onDrop","useCallback","acceptedFiles","useDropzone","getRootProps","getInputProps","isDragActive","className","classes","inputFile","dragActive","inputFileBox","InputFile","name","label","rules","control","disabled","render","field","fieldState","required","error","file","LoginForm","onSubmit","errors","type","size","Text","LoginFormContainer","useSelector","state","auth","loginErrors","dispatch","useDispatch","loginFormData","login","InputCheckbox","labelPosition","checkbox","onBlur","box","userApi","coreApi","get","then","handleResponse","catch","handleError","userId","post","delete","initialState","users","subscribePendingUserIds","usersReducer","action","filter","usersActions","getUsers","a","res","resultCode","ResultCodes","success","data","console","log","subscribe","getAuthUserData","unsubscribe","InputImageCrop","aspect","srcFileUrl","ImageCrop","useState","zoom","setZoom","x","y","crop","setCrop","imageCrop","cropperContainer","image","showGrid","onCropComplete","croppedArea","croppedAreaPixels","onCropChange","onZoomChange","style","width","min","max","step","value","ImageUploadForm","closeModal","setSrcFileUrl","Form","Button","onClick","e","preventDefault","marginLeft","window","URL","createObjectURL","module","exports","children","initialValues","submitOnBlur","submitOnEnter","resetAfterSubmit","useForm","defaultValues","mode","handleSubmit","reset","setError","watch","setValue","formError","setFormError","useEffect","find","forEach","message","childrenWithProps","React","Children","map","child","isValidElement","cloneElement","submit","wrapper","onKeyDown","key","ctrlKey","elementName","target","elementValue","FormRow","align","classnames","row","Item","item","labelRequired","labelText","formItemError","initialized","appActions","UserControl","props","isOpened","setIsOpened","userControl","to","username","Avatar","smallImg","avatar","online","userControlDropdown","userControlUsername","userControlList","logout","Logo","logo","src","alt","Header","header","authorized","List","SidebarNavigation","Card","Navigation","Icon","Badge","SidebarSubscriptions","subscriptions","sidebarFriends","Title","Avatars","length","sub","small","firstName","_id","Link","BottomNavigation","color","colors","fontLight","Layout","sidebar","background","authUserName","authUserAvatar","onLogout","tablet","useBreakpoint","layout","padding","horizontalAlign","document","body","classList","toggle","Container","container","AppBar","appBar","Main","main","Content","content","Sidebar","LayoutContainer","authUserSubscriptions","user","HomePage","useAuthCheck","RegistrationPage","lazy","LoginPage","ProfilePage","UsersPage","DialogsPage","PostPage","FeedPage","TestPage","FormTestPage","App","fallback","path","exact","component","AppSpinner","height","display","justifyContent","alignItems","Spinner","thickness","AppContainer","app","Promise","all","startMessagesListening","stopMessagesListening","fullscreen","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","rootReducer","combineReducers","authReducer","profile","profileReducer","posts","postsReducer","dialogs","dialogsReducer","store","createStore","applyMiddleware","thunkMiddleware","s","ReactDOM","StrictMode","getElementById","authApi","loginData","registrationData","interceptors","response","use","err","originalConfig","config","status","_retry","reject","registrationErrors","registrationSuccessful","authActions","setUser","clearUser","setRegistrationSuccessful","setRegistrationErrors","setLoginErrors","expiredToken","register","axios","create","baseURL","withCredentials","subscribers","socket","io","autoConnect","on","serverMessageResponse","socketApi","connected","connect","disconnect","callback","push","dialogId","emit","dialogApi","currentDialogId","messages","dialog","updated","date","dialogsActions","messageHandlerCreator","sendMessage","getDialogs","openDialog","maxWidth","largeImg","border","shadow","onEdit","zoomable","editable","editModalOpened","setEditModalOpened","zoomModalOpened","setZoomModalOpened","onEditClick","undefined","onZoomClick","photo","onLineIndicator","open","onClose","img","EditAvatarModalWindow","ModalWindow","ZoomAvatarModalWindow","close","AvatarButtons","buttons","borderWidth","borderLeftColor","borderBottomColor","borderRightColor","spinner","setWidth","updateDimensions","innerWidth","addEventListener","breakpointsObject","Object","entries","breakpoints","Number","parseInt","title","modal","nested","contentStyle","borderRadius","closeOnDocumentClick","button","marginBottom","primary","secondary","neutral","text","cancel","link","buttonSpinner","contentIcon","contentText","spinnerColor","fontDark","spinnerSizes","sm","sizes","btnSmall","md","btnMedium","lg","btnLarge","spinnerSize","badge","Row","verticalAlign","gap","bordered","Array","index","marginRight","col","Col","stretch","flex","Space","space","InputText","autoFocus","placeholder","input","postApi","postId","id","commentId","isAddPostPending","postsActions","reducer","isPending","lastName","likes","comments","comment","includes","getPost","getFeedPosts","getUserPosts","addPost","authError","deletePost","addPostLike","getState","deletePostLike","addPostComment","deletePostComment","InputPassword","profileApi","profileData","put","formData","profileActions","userProfileData","bio","birthDate","location","contacts","coverImage","getUserData","updateStatus","updateProfile","updateAvatar","updateCoverImage"],"mappings":"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","file":"static/js/main.a7630b26.chunk.js","sourcesContent":["import {Controller, RegisterOptions} from 'react-hook-form'\nimport {Control} from 'react-hook-form/dist/types/form'\nimport React, {useCallback} from 'react'\nimport {useDropzone} from 'react-dropzone'\nimport classes from './InputFile.module.scss'\nimport {Item} from 'components/_shared/Form/Form'\n\nexport const CustomInputFile: React.FC<{ onChange: (file: File) => void }> = (({\n                                                                                   onChange\n                                                                               }) => {\n    const onDrop = useCallback(acceptedFiles => {\n        onChange && onChange(acceptedFiles[0])\n    }, [onChange])\n    const {getRootProps, getInputProps, isDragActive} = useDropzone({onDrop})\n\n    return (\n        <div className={classes.inputFile + (isDragActive ? ' ' + classes.dragActive : '')} {...getRootProps()}>\n            <input {...getInputProps()}/>\n            {\n                isDragActive ?\n                    <span className={classes.inputFileBox}>Drop your files here...</span> :\n                    <span className={classes.inputFileBox}>Drop your files here or click to select files</span>\n            }\n        </div>\n    )\n})\ntype InputFilePropsType = {\n    name: string,\n    label?: string,\n    rules?: RegisterOptions,\n    control?: Control,\n    rows?: number,\n    disabled?: boolean,\n    onChange?: (file: File) => void\n}\nexport const InputFile: React.FC<InputFilePropsType> = ({\n                                                            name,\n                                                            label,\n                                                            rules,\n                                                            control,\n                                                            disabled = false,\n                                                            onChange\n                                                        }) => {\n    return <Controller\n        control={control}\n        name={name}\n        rules={rules}\n        render={({field, fieldState}) => {\n            const handleChange = (file: File) => {\n                onChange && onChange(file)\n                field.onChange(file)\n            }\n            return <Item label={label} required={!!rules?.required} error={fieldState.error}\n                         disabled={disabled}>\n                <CustomInputFile onChange={handleChange}/>\n            </Item>\n        }}\n    />\n}","import React from 'react'\nimport {login} from 'redux/reducers/auth.reducer'\nimport {LoginDataType} from 'api/auth.api'\nimport {useDispatch, useSelector} from 'react-redux'\nimport {ThunkDispatch} from 'redux-thunk'\nimport {StateType} from 'redux/store'\nimport {AuthActionType} from 'redux/reducers/auth.reducer'\nimport {Button} from 'components/_shared/Button/Button'\nimport {Form, FormRow} from 'components/_shared/Form/Form'\nimport {InputText} from 'components/_shared/Input/InputText/InputText'\nimport {InputPassword} from 'components/_shared/Input/InputPassword/InputPassword'\nimport {InputCheckbox} from 'components/_shared/Input/InputCheckbox/InputCheckbox'\nimport {ServerValidationErrorType} from 'types/types'\n\ntype PropsType = {\n    onSubmit: (loginFormData: LoginDataType) => void\n    errors?: Array<ServerValidationErrorType>\n}\n\nconst LoginForm: React.FC<PropsType> = ({onSubmit, errors}) => {\n    return (\n        <Form onSubmit={onSubmit} errors={errors}>\n            <FormRow>\n                <InputText name={'email'} label={'E-mail'} rules={{required: true}}/>\n            </FormRow>\n            <FormRow>\n                <InputPassword name={'password'} label={'Password'} rules={{required: true}}/>\n            </FormRow>\n            <FormRow>\n                <InputCheckbox name={'rememberMe'} label={'Remember me'}/>\n            </FormRow>\n            <FormRow>\n                <Button type='primary' size='lg'>\n                    <Button.Text>Log in</Button.Text>\n                </Button>\n            </FormRow>\n        </Form>\n    )\n}\n\n\nconst LoginFormContainer: React.FC = () => {\n    const errors = useSelector((state: StateType) => state.auth.loginErrors)\n    const dispatch: ThunkDispatch<StateType, LoginDataType, AuthActionType> = useDispatch()\n\n    const onSubmit = (loginFormData: LoginDataType) => {\n        dispatch(login(loginFormData))\n    }\n\n    return <LoginForm onSubmit={onSubmit} errors={errors}/>\n}\n\nexport default LoginFormContainer\n","import {Controller, RegisterOptions} from 'react-hook-form'\nimport {Control} from 'react-hook-form/dist/types/form'\nimport React from 'react'\nimport classes from './InputCheckbox.module.scss'\nimport {Item} from 'components/_shared/Form/Form'\n\ntype CheckboxPropsType = {\n    name: string,\n    label?: string,\n    rules?: RegisterOptions,\n    control?: Control,\n    rows?: number,\n    disabled?: boolean\n}\n\nexport const InputCheckbox: React.FC<CheckboxPropsType> = ({\n                                                          name,\n                                                          label,\n                                                          rules,\n                                                          control,\n                                                          disabled = false\n                                                      }) => {\n    return <Controller\n        control={control}\n        name={name}\n        rules={rules}\n        render={({field, fieldState}) => <Item label={label} required={!!rules?.required} error={fieldState.error}\n                                               labelPosition='right' disabled={disabled}>\n            <div className={classes.checkbox}>\n                <input\n                    type=\"checkbox\"\n                    name={name}\n                    onChange={field.onChange}\n                    onBlur={field.onBlur}\n                    disabled={disabled}\n                />\n                <span className={classes.box}/>\n            </div>\n        </Item>}\n    />\n}","import {coreApi, handleError, handleResponse} from './core.api'\nimport {UserItemDataType} from '../types/types'\n\n// GET /users/\n// used for getting users list on users page\nexport type UsersDataType = {\n    users: Array<UserItemDataType>\n}\n\nexport const userApi = {\n    getUsers: () => coreApi\n        .get('/user')\n        .then(handleResponse<UsersDataType>())\n        .catch(handleError()),\n    subscribe: (userId: string) => coreApi\n        .post(`/subscription/${userId}`)\n        .then(handleResponse())\n        .catch(handleError()),\n    unsubscribe: (userId: string) => coreApi\n        .delete(`/subscription/${userId}`)\n        .then(handleResponse())\n        .catch(handleError())\n}","import {UserItemDataType} from 'types/types'\nimport {userApi} from 'api/user.api'\nimport {ResultCodes} from 'api/core.api'\nimport {InferActionsTypes, ThunkType} from '../store'\nimport {getAuthUserData} from 'redux/reducers/auth.reducer'\n\n// INITIAL STATE\nconst initialState = {\n    users: [] as Array<UserItemDataType>,\n    subscribePendingUserIds: [] as Array<string>\n}\nexport type UsersStateType = typeof initialState\n\n// REDUCER\nexport const usersReducer = (state: UsersStateType = initialState, action: UsersActionType): UsersStateType => {\n    switch (action.type) {\n        case 'rsn/users/SET_USERS': {\n            return {\n                ...state,\n                users: action.users\n            }\n        }\n        case 'rsn/users/ADD_SUBSCRIBE_PENDING_USER_ID': {\n            return {\n                ...state,\n                subscribePendingUserIds: [...state.subscribePendingUserIds, action.userId]\n            }\n        }\n        case 'rsn/users/DELETE_SUBSCRIBE_PENDING_USER_ID': {\n            return {\n                ...state,\n                subscribePendingUserIds: state.subscribePendingUserIds.filter(userId => userId !== action.userId)\n            }\n        }\n        default: {\n            return state\n        }\n    }\n}\n\n//region ACTION CREATORS\nexport const usersActions = {\n    setUsers: (users: Array<UserItemDataType>) => ({type: 'rsn/users/SET_USERS', users} as const),\n    addSubscribePendingUserId: (userId: string) => ({type: 'rsn/users/ADD_SUBSCRIBE_PENDING_USER_ID', userId} as const),\n    deleteSubscribePendingUserId: (userId: string) => ({type: 'rsn/users/DELETE_SUBSCRIBE_PENDING_USER_ID', userId} as const)\n}\nexport type UsersActionType = ReturnType<InferActionsTypes<typeof usersActions>>\n//endregion\n\n//region THUNK CREATORS\nexport const getUsers = (): ThunkType<UsersActionType> => async (dispatch) => {\n    const res = await userApi.getUsers()\n    if (res.resultCode === ResultCodes.success) {\n        dispatch(usersActions.setUsers(res.data.users))\n    }\n    if (res.resultCode === ResultCodes.error) {\n        console.log(res)\n    }\n}\n\nexport const subscribe = (userId: string): ThunkType<UsersActionType> => async (dispatch) => {\n    dispatch(usersActions.addSubscribePendingUserId(userId))\n    const res = await userApi.subscribe(userId)\n    dispatch(usersActions.deleteSubscribePendingUserId(userId))\n    if (res.resultCode === ResultCodes.success) {\n        dispatch(getAuthUserData())\n    }\n    if (res.resultCode === ResultCodes.error) {\n        console.log(res)\n    }\n}\n\nexport const unsubscribe = (userId: string): ThunkType<UsersActionType> => async (dispatch) => {\n    dispatch(usersActions.addSubscribePendingUserId(userId))\n    const res = await userApi.unsubscribe(userId)\n    dispatch(usersActions.deleteSubscribePendingUserId(userId))\n    if (res.resultCode === ResultCodes.success) {\n        dispatch(getAuthUserData())\n    }\n    if (res.resultCode === ResultCodes.error) {\n        console.log(res)\n    }\n}\n//endregion","import React, {useState} from 'react'\nimport {Controller, RegisterOptions} from 'react-hook-form'\nimport {Area, Point} from 'react-easy-crop/types'\nimport {Control} from 'react-hook-form/dist/types/form'\nimport classes from './InputImageCrop.module.scss'\nimport Cropper from 'react-easy-crop'\nimport Slider from 'rc-slider'\nimport 'rc-slider/assets/index.css';\nimport {Item} from 'components/_shared/Form/Form'\n\ntype InputImageCropPropsType = {\n    name: string,\n    label?: string,\n    rules?: RegisterOptions,\n    control?: Control,\n    aspect?: number,\n    srcFileUrl: string\n    disabled?: boolean,\n    onChange?: (crop: Area) => void\n}\nexport const InputImageCrop: React.FC<InputImageCropPropsType> = ({\n                                                                      name,\n                                                                      label,\n                                                                      rules,\n                                                                      control,\n                                                                      disabled = false,\n                                                                      onChange,\n                                                                      aspect = 1,\n                                                                      srcFileUrl\n                                                                  }) => {\n    return <Controller\n        control={control}\n        name={name}\n        rules={rules}\n        render={({field, fieldState}) => {\n            return <Item label={label} required={!!rules?.required} error={fieldState.error}\n                         disabled={disabled}>\n                <ImageCrop aspect={aspect} srcFileUrl={srcFileUrl}\n                           onChange={field.onChange}/>\n            </Item>\n        }}\n    />\n}\ntype ImageCropPropsType = {\n    aspect: number\n    srcFileUrl?: string\n    onChange?: (value: Area) => void\n}\nconst ImageCrop: React.FC<ImageCropPropsType> = ({aspect, srcFileUrl, onChange}) => {\n    const [zoom, setZoom] = useState<number>(1)\n    const [crop, setCrop] = useState<Point>({\n        x: 0,\n        y: 0\n    } as Point)\n\n    const onCropComplete = (croppedArea: Area, croppedAreaPixels: Area) => {\n        onChange && onChange(croppedAreaPixels)\n    }\n\n    const sliderChangeHandler = (value: number) => {\n        setZoom(value)\n    }\n    return (\n        <div className={classes.imageCrop}>\n            <div className={classes.cropperContainer}>\n                {srcFileUrl && <Cropper\n                    image={srcFileUrl}\n                    crop={crop}\n                    zoom={zoom}\n                    showGrid={false}\n                    aspect={aspect}\n                    onCropComplete={onCropComplete}\n                    onCropChange={setCrop}\n                    onZoomChange={setZoom}\n                />}\n            </div>\n            <div style={{width: '100%'}}>\n                Use this slider to zoom your image\n                <Slider\n                    min={1}\n                    max={3}\n                    step={0.01}\n                    value={zoom}\n                    onChange={sliderChangeHandler}\n                />\n            </div>\n        </div>\n    )\n}","import React, {useState} from 'react'\nimport {Area} from 'react-easy-crop/types'\nimport {Button} from 'components/_shared/Button/Button'\nimport {Form, FormRow} from 'components/_shared/Form/Form'\nimport {InputFile} from 'components/_shared/Input/InputFile/InputFile'\nimport {InputImageCrop} from 'components/_shared/Input/InputImageCrop/InputImageCrop'\n\n\ntype PropsType = {\n    aspect: number\n    onSubmit: (image: File, cropArea: Area) => void\n    closeModal?: () => void\n}\n\nconst ImageUploadForm: React.FC<PropsType> = ({aspect, onSubmit, closeModal}) => {\n    const [srcFileUrl, setSrcFileUrl] = useState<string | null>(null)\n\n    const fileChangeHandler = (file: File) => {\n        setSrcFileUrl(window.URL.createObjectURL(file))\n    }\n\n    const submit = (data: { file: File, crop: Area }) => {\n        onSubmit(data.file, data.crop)\n    }\n\n    return (\n        <div>\n\n            <Form onSubmit={submit}>\n                <FormRow>\n                    {srcFileUrl && <Button size=\"lg\">\n                        <Button.Text>\n                            Save\n                        </Button.Text>\n                    </Button>}\n\n                    {srcFileUrl && <Button type='secondary' size=\"lg\" onClick={(e) => {\n                        e.preventDefault()\n                        setSrcFileUrl(null)}}\n                    >\n                        <Button.Text>Choose other image</Button.Text>\n                    </Button>}\n\n                    <div style={{marginLeft: 'auto'}}>\n                        {closeModal && <Button type={'cancel'} size='lg' onClick={closeModal}>\n                            <Button.Text>Close</Button.Text>\n                        </Button>}\n                    </div>\n                </FormRow>\n\n                {!srcFileUrl && <FormRow>\n                    <InputFile\n                        name={'file'}\n                        label={'Drop your files in the area below'}\n                        rules={{required: true}}\n                        onChange={fileChangeHandler}\n                    />\n                </FormRow>}\n\n                {srcFileUrl && <FormRow>\n                    <InputImageCrop\n                        name={'crop'}\n                        aspect={aspect}\n                        srcFileUrl={srcFileUrl}\n                    />\n                </FormRow>}\n\n            </Form>\n        </div>\n    )\n}\n\nexport default ImageUploadForm","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dark\":\"Logo_dark__24bBh\",\"logo\":\"Logo_logo__2iEDu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dark\":\"Card_dark__1ZVU3\",\"Card\":\"Card_Card__3xRJs\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dark\":\"SidebarNavigation_dark__23bd1\",\"Navigation\":\"SidebarNavigation_Navigation__1CdPX\",\"NavigationTitle\":\"SidebarNavigation_NavigationTitle__3pVq6\",\"NavigationList\":\"SidebarNavigation_NavigationList__1sgiY\",\"NavigationItem\":\"SidebarNavigation_NavigationItem__2OqpZ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"phone\":\"400\",\"phoneWide\":\"480\",\"phoneTablet\":\"560\",\"tabletSmall\":\"640\",\"tablet\":\"768\",\"tabletWide\":\"1024\",\"desktop\":\"1248\",\"desktopWide\":\"1440\",\"dark\":\"breakpoints_dark__3WSCU\"};","import React, {useEffect, useState} from 'react'\nimport classes from 'components/_shared/Form/Form.module.scss'\nimport classnames from 'classnames'\nimport {useForm} from 'react-hook-form'\nimport {Control} from 'react-hook-form/dist/types/form'\nimport {FieldError} from 'react-hook-form/dist/types'\nimport {ServerValidationErrorType} from 'types/types'\n\n\ntype FormPropsType = {\n    onSubmit: (data: any) => void\n    initialValues?: { [key: string]: any }\n    errors?: Array<ServerValidationErrorType>\n    resetAfterSubmit?: boolean\n    submitOnBlur?: boolean\n    submitOnEnter?: boolean\n}\ntype RowPropsType = {\n    control?: Control,\n    align?: 'fill' | 'left' | 'right' | 'center'\n}\ntype ItemPropsType = {\n    label?: string,\n    labelPosition?: 'top' | 'left' | 'right'\n    required?: boolean,\n    disabled?: boolean,\n    error?: FieldError,\n    align?: 'fill' | 'left' | 'right' | 'center'\n}\nexport const Form: React.FC<FormPropsType> = ({\n                                                   onSubmit,\n                                                   children,\n                                                   initialValues,\n                                                  errors= [],\n                                                   submitOnBlur = false,\n                                                    submitOnEnter = false,\n    resetAfterSubmit = false\n                                               }) => {\n    const {control, handleSubmit, reset, setError, watch, setValue} = useForm({\n        defaultValues: {\n            ...initialValues\n        },\n        mode: 'onBlur'\n    })\n    const [formError, setFormError] = useState<ServerValidationErrorType | null>(null)\n    useEffect(() => {\n        setFormError(errors.find(error => error.field === 'form') || null)\n        errors.forEach(({field, message}) => setError(field, {type: 'server', message}))\n    }, [errors, setError])\n\n    const childrenWithProps = React.Children.map(children, child => {\n        if (React.isValidElement(child)) {\n            return React.cloneElement(child, {control})\n        }\n        return child\n    })\n\n    const submit = (data: { [key: string]: any }) => {\n        onSubmit(data)\n        if (resetAfterSubmit) reset()\n    }\n\n    const onBlurHandler = () => {\n        if (submitOnBlur) handleSubmit(submit)()\n    }\n\n    const onKeyDownHandler = (e: any) => {\n\n        // handle 'Enter' key\n        if (e.key === 'Enter') {\n            if (submitOnEnter && e.ctrlKey) {\n                const elementName = e.target.name\n                const elementValue = watch(elementName)\n                setValue(elementName, elementValue + '\\n')\n            }\n\n            if (submitOnEnter && !e.ctrlKey) {\n                e.preventDefault()\n                handleSubmit(submit)()\n            }\n        }\n\n    }\n\n    return <form className={classes.wrapper} onSubmit={handleSubmit(submit)} onBlur={onBlurHandler} onKeyDown={onKeyDownHandler}>\n        {formError && <FormRow><span className={classes.formError}>{formError.message}</span></FormRow>}\n        {childrenWithProps}\n    </form>\n}\n\n\n\nexport const FormRow: React.FC<RowPropsType> = ({\n                                                     children,\n                                                     control,\n                                                     align = 'fill'\n                                                 }) => {\n    const childrenWithProps = React.Children.map(children, child => {\n        if (React.isValidElement(child)) {\n            return React.cloneElement(child, {control, align})\n        }\n        return child\n    })\n\n    return <div className={classnames(\n        classes.row,\n        {[classes[align]]: align}\n    )}>\n        {childrenWithProps}\n    </div>\n}\n\n\n\nexport const Item: React.FC<ItemPropsType> = ({\n                                                  children,\n                                                  label,\n                                                  labelPosition = 'top',\n                                                  required = false,\n                                                  disabled = false,\n                                                  error, align = 'fill'\n                                              }) => {\n    return <label className={classnames(classes.item, {[classes[labelPosition]]: labelPosition})}>\n        <div className={classnames(classes.label, {[classes.disabled]: disabled})}>\n            {required && <span className={classes.labelRequired}>*</span>}\n            <span className={classes.labelText}>{label}</span>\n            {error?.type === 'required' && <span className={classes.formItemError}>This field is required</span>}\n            {error?.type === 'server' && <span className={classes.formItemError}>{error.message}</span>}\n        </div>\n        {children}\n    </label>\n}\n\n\n\n","import {getAuthUserData} from './auth.reducer'\nimport {InferActionsTypes, ThunkType} from '../store'\nimport {startMessagesListening, stopMessagesListening} from './dialogs.reducer'\n\n// INITIAL STATE\nconst initialState = {\n    initialized: false\n}\ntype AppStateType = typeof initialState\n\n// REDUCER\nexport const appReducer = (state: AppStateType = initialState, action: AppActionType): AppStateType => {\n    switch (action.type) {\n        case 'rsn/app/INITIALIZE_APP': {\n            return {\n                ...state,\n                initialized: action.initialized\n            }\n        }\n        default: {\n            return state\n        }\n    }\n}\n\n//region ACTION CREATORS\nexport const appActions = {\n    setInitialized: (initialized: boolean) => ({type: 'rsn/app/INITIALIZE_APP', initialized} as const)\n}\nexport type AppActionType = ReturnType<InferActionsTypes<typeof appActions>>\n//endregion\n\n//region THUNK CREATORS\nexport const initializeApp = (): ThunkType<AppActionType> => async (dispatch) => {\n    await Promise.all([ // put all that needed to be checked to init app inside this array\n        dispatch(getAuthUserData()),\n        dispatch(startMessagesListening())\n    ])\n    dispatch(appActions.setInitialized(true))\n}\n\nexport const deinitializeApp = (): ThunkType<AppActionType> => async (dispatch) => {\n    dispatch(stopMessagesListening())\n    dispatch(appActions.setInitialized(false))\n}\n//endregion","import React, {useState} from \"react\";\nimport {NavLink} from \"react-router-dom\";\nimport classes from \"components/Layout/Header/UserControl/UserControl.module.scss\";\nimport {Avatar} from \"components/_shared/Avatar/Avatar\";\nimport {Button} from 'components/_shared/Button/Button'\n\ntype PropsType = {\n    username?: string\n    avatar?: string | null\n    logout: () => void\n}\n\nexport const UserControl: React.FC<PropsType> = (props) => {\n    const [isOpened, setIsOpened] = useState(false)\n\n    const clickHandler = () => {\n        setIsOpened(!isOpened)\n    }\n\n    return (\n        <div className={classes.userControl}>\n            <NavLink to={`/profile/${props.username}`}><Avatar smallImg={props.avatar} online size={30}/></NavLink>\n            <div className={classes.userControlDropdown}>\n                <button className={classes.userControlUsername} onClick={clickHandler}>{props.username}</button>\n                {isOpened && <div className={classes.userControlList}>\n                    <ul>\n                        <li><NavLink to='/settings'><Button type=\"text\">Settings</Button></NavLink></li>\n                        <li><Button type=\"text\" onClick={() => props.logout()}>Logout</Button></li>\n                    </ul>\n                </div>}\n            </div>\n        </div>\n    )\n}","export default __webpack_public_path__ + \"static/media/logo.7329ea12.svg\";","import React from 'react'\nimport {NavLink} from 'react-router-dom'\nimport classes from './Logo.module.scss'\nimport logo from 'assets/images/logo.svg'\n\nexport const Logo: React.FC = () => <div className={classes.logo}>\n    <NavLink to='/'>\n        <img src={logo} alt=\"Bind\"/>\n    </NavLink>\n</div>","import React from 'react'\nimport classes from 'components/Layout/Header/Header.module.scss'\nimport {UserControl} from 'components/Layout/Header/UserControl/UserControl'\nimport {Logo} from 'components/_shared/Logo/Logo'\n\ntype PropsType = {\n    authorized: boolean\n    username?: string\n    avatar?: string | null\n    logout: () => void\n}\n\nconst Header: React.FC<PropsType> = (props) => {\n    return (\n        <div className={classes.header}>\n            <Logo/>\n            {props.authorized && <div className={classes.userControl}>\n                <UserControl username={props.username} avatar={props.avatar} logout={props.logout}/>\n            </div>}\n        </div>\n    )\n}\n\nexport default Header","import {NavLink} from 'react-router-dom'\nimport React from 'react'\nimport classes from 'components/Layout/SideBar/SidebarNavigation/SidebarNavigation.module.scss'\n\nimport {Card} from 'components/_shared/Card/Card'\nimport {PersonLinesFill, ChatLeftTextFill, PeopleFill, GearWide, HouseDoorFill} from 'react-bootstrap-icons'\nimport {Button} from 'components/_shared/Button/Button'\n\ntype PropsType = {}\n\nconst SidebarNavigation: React.FC<PropsType> = () => {\n    return (\n        <Card>\n            <div className={classes.Navigation}>\n                <List>\n                    <Item to='/feed'>\n                        <Button type={'link'} size={'lg'}>\n                            <Button.Icon><HouseDoorFill/></Button.Icon>\n                            <Button.Text>Feed</Button.Text>\n                        </Button>\n                    </Item>\n                    <Item to='/profile'>\n                        <Button type={'link'} size={'lg'}>\n                            <Button.Icon><PersonLinesFill/></Button.Icon>\n                            <Button.Text>Profile</Button.Text>\n                        </Button>\n                    </Item>\n                    <Item to='/dialogs'>\n                        <Button type={'link'} size={'lg'}>\n                            <Button.Icon><ChatLeftTextFill/></Button.Icon>\n                            <Button.Text>Dialogs</Button.Text>\n                            <Button.Badge>12</Button.Badge>\n                        </Button>\n                    </Item>\n                    <Item to='/users'>\n                        <Button type={'link'} size={'lg'}>\n                            <Button.Icon><PeopleFill/></Button.Icon>\n                            <Button.Text>Users</Button.Text>\n                        </Button>\n                    </Item>\n                    <Item to='/settings'>\n                        <Button type={'link'} size={'lg'}>\n                            <Button.Icon><GearWide/></Button.Icon>\n                            <Button.Text>Settings</Button.Text>\n                        </Button>\n                    </Item>\n                </List>\n            </div>\n        </Card>\n    )\n}\n\nconst List: React.FC = ({children}) => {\n    return (\n        <ul>\n            {children}\n        </ul>\n    )\n}\n\nconst Item: React.FC<{to: string}> = ({to, children}) => {\n    return (\n        <li>\n            <NavLink to={to}>\n                {children}\n            </NavLink>\n        </li>\n    )\n}\n\nexport default SidebarNavigation","import React from 'react'\nimport classes from 'components/Layout/SideBar/SidebarSubscriptions/SidebarSubscriptions.module.scss'\nimport {Card} from 'components/_shared/Card/Card'\nimport {Avatar} from 'components/_shared/Avatar/Avatar'\nimport {NavLink} from 'react-router-dom'\nimport {UserItemDataType} from 'types/types'\n\ntype PropsType = {\n    subscriptions: Array<UserItemDataType>\n}\n\nconst SidebarSubscriptions: React.FC<PropsType> = ({subscriptions}) => {\n    return (\n        <Card>\n            <div className={classes.sidebarFriends}>\n                <div className={classes.Title}>Subscriptions</div>\n                <div className={classes.Avatars}>\n                    {subscriptions.length !== 0 && subscriptions.map(sub => <NavLink to={`/profile/${sub.username}`}\n                                                                            key={sub._id}>\n                            <Avatar smallImg={sub.avatar.small} online size={50} name={sub.firstName}/>\n                        </NavLink>\n                    )}\n                </div>\n                <div className={classes.Link}><NavLink to='/users/subscriptions'>View All ({subscriptions.length})</NavLink></div>\n            </div>\n        </Card>\n    )\n}\n\nexport default SidebarSubscriptions","import React from 'react'\nimport classes from 'components/Layout/BottomNavigation/BottomNavigation.module.scss'\nimport colors from 'assets/styles/colors.module.scss'\nimport {Button} from 'components/_shared/Button/Button'\nimport {ChatLeftTextFill, PeopleFill, HouseDoorFill, DoorOpenFill} from 'react-bootstrap-icons'\nimport {NavLink} from 'react-router-dom'\nimport {Avatar} from 'components/_shared/Avatar/Avatar'\n\ntype Props = {\n    authorized: boolean\n    avatar?: string | null\n}\n\nexport const BottomNavigation: React.FC<Props> = ({avatar, authorized}) => {\n    return <div className={classes.wrapper}>\n        {authorized && <div className={classes.item}>\n            <NavLink to={'/feed'}>\n                <Button type={'link'} size={'lg'}>\n                    <Button.Icon><HouseDoorFill color={colors.fontLight}/></Button.Icon>\n                </Button>\n            </NavLink>\n        </div>}\n        <div className={classes.item}>\n            <NavLink to={'/users'}>\n                <Button type={'link'} size={'lg'}>\n                    <Button.Icon><PeopleFill color={colors.fontLight}/></Button.Icon>\n                </Button>\n            </NavLink>\n        </div>\n        {authorized && <div className={classes.item}>\n            <NavLink to={'/dialogs'}>\n                <Button type={'link'} size={'lg'}>\n                    <Button.Icon><ChatLeftTextFill color={colors.fontLight}/></Button.Icon>\n                </Button>\n            </NavLink>\n        </div>}\n        {authorized && <div className={classes.item}>\n            <NavLink to={'/profile'}>\n                <Button type={'link'} size={'lg'}>\n                    <Button.Icon><Avatar smallImg={avatar} size={24}/></Button.Icon>\n                </Button>\n            </NavLink>\n        </div>}\n        {!authorized && <div className={classes.item}>\n            <NavLink to={'/login'}>\n                <Button type={'link'} size={'lg'}>\n                    <Button.Icon><DoorOpenFill color={colors.fontLight}/></Button.Icon>\n                </Button>\n            </NavLink>\n        </div>}\n    </div>\n}","import React from 'react'\nimport {StateType} from 'redux/store'\nimport {useDispatch, useSelector} from 'react-redux'\nimport classes from './Layout.module.scss'\nimport Header from 'components/Layout/Header/Header'\nimport {Card} from 'components/_shared/Card/Card'\nimport LoginForm from 'components/_forms/LoginForm'\nimport SidebarNavigation from 'components/Layout/SideBar/SidebarNavigation/SidebarNavigation'\nimport SidebarSubscriptions from 'components/Layout/SideBar/SidebarSubscriptions/SidebarSubscriptions'\nimport {AvatarType, UserItemDataType} from 'types/types'\nimport {logout} from 'redux/reducers/auth.reducer'\nimport {useBreakpoint} from 'utils/hooks'\nimport {BottomNavigation} from 'components/Layout/BottomNavigation/BottomNavigation'\nimport {Button} from 'components/_shared/Button/Button'\nimport {Row} from 'components/_shared/Flex/Flex'\n\ntype PropsType = {\n    sidebar?: boolean\n    background?: boolean\n    authUserName?: string\n    authUserAvatar?: AvatarType\n    subscriptions: Array<UserItemDataType>\n    onLogout: () => void\n}\n\nconst Layout: React.FC<PropsType> = ({\n                                         children,\n                                         sidebar = false,\n                                         background = false,\n                                         subscriptions,\n                                         authUserName,\n                                         authUserAvatar,\n                                         onLogout\n                                     }) => {\n    const toggleTheme = () => {\n        document.body.classList.toggle('dark')\n    }\n\n    const authorized = useSelector((state: StateType) => state.auth.authorized)\n    const {tablet} = useBreakpoint()\n    return (\n        <div className={classes.layout}>\n            <AppBar>\n                <Header authorized={authorized} username={authUserName} avatar={authUserAvatar?.small}\n                        logout={onLogout}/>\n            </AppBar>\n\n            <Main>\n                {sidebar && !tablet && <Sidebar>\n                    <Card>\n                        <Row padding={10} horizontalAlign={'center'}>\n                            <Button onClick={toggleTheme}>Toggle theme</Button>\n                        </Row>\n                    </Card>\n                    {!authorized && <Card>\n                        <div style={{padding: '10px'}}><LoginForm/></div>\n                    </Card>}\n                    {authorized && <SidebarNavigation/>}\n                    {authorized && !tablet && <SidebarSubscriptions subscriptions={subscriptions}/>}\n                </Sidebar>}\n\n                <Content>\n                    {children}\n                </Content>\n            </Main>\n\n            {tablet && authUserAvatar && <BottomNavigation avatar={authUserAvatar?.small} authorized={authorized}/>}\n            {tablet && !authUserAvatar && <BottomNavigation authorized={authorized}/>}\n\n            {background && <div className={classes.background}>\n                <img src=\"https://source.unsplash.com/random/1920x1080/?nature\" alt=\"\"/>\n            </div>}\n        </div>\n    )\n}\n\nconst Container: React.FC = ({children}) => <div className={classes.container}>\n    {children}\n</div>\n\nconst AppBar: React.FC = ({children}) => {\n    return (\n        <div className={classes.appBar}>\n            <Container>\n                {children}\n            </Container>\n        </div>\n    )\n}\n\nconst Main: React.FC = ({children}) => {\n    return (\n        <Container>\n            <div className={classes.main}>\n                {children}\n            </div>\n        </Container>\n    )\n}\n\nconst Content: React.FC = ({children}) => {\n    return (\n        <div className={classes.content}>\n            {children}\n        </div>\n    )\n}\n\nconst Sidebar: React.FC = ({children}) => {\n    return (\n        <div className={classes.sidebar}>\n            {children}\n        </div>\n    )\n}\n\nconst LayoutContainer: React.FC<{ sidebar?: boolean, background?: boolean }> = (props) => {\n    const dispatch = useDispatch()\n    const authUserSubscriptions = useSelector((state: StateType) => state.auth.user?.subscriptions || [])\n    const authUserName = useSelector((state: StateType) => state.auth.user?.username)\n    const authUserAvatar = useSelector((state: StateType) => state.auth.user?.avatar)\n\n    const onLogout = () => {\n        dispatch(logout())\n    }\n\n    return <Layout {...props} subscriptions={authUserSubscriptions} authUserName={authUserName}\n                   authUserAvatar={authUserAvatar} onLogout={onLogout}/>\n}\n\nexport default LayoutContainer\n","import React from 'react'\nimport {useAuthCheck} from 'utils/hooks'\nimport {Redirect} from 'react-router-dom'\n\nconst HomePage = () => {\n    const authorized = useAuthCheck()\n    if (authorized) {\n        return <Redirect to={`/feed`}/>\n    } else {\n        return <Redirect to={`/login`}/>\n    }\n}\n\nexport default HomePage","import React, {lazy, Suspense, useEffect} from 'react'\nimport {Route, Switch} from 'react-router-dom'\nimport {useDispatch, useSelector} from 'react-redux'\n\nimport {StateType} from 'redux/store'\nimport {deinitializeApp, initializeApp} from 'redux/reducers/app.reducer'\nimport Layout from 'components/Layout/Layout'\nimport Spinner from 'components/_shared/Spinner/Spinner'\nimport HomePage from 'components/_pages/HomePage'\n\nconst RegistrationPage = lazy(() => import('components/_pages/RegistrationPage'))\nconst LoginPage = lazy(() => import('components/_pages/LoginPage'))\nconst ProfilePage = lazy(() => import('components/_pages/ProfilePage'))\nconst UsersPage = lazy(() => import('components/_pages/UsersPage'))\nconst DialogsPage = lazy(() => import('components/_pages/DialogsPage'))\nconst PostPage = lazy(() => import('components/_pages/PostPage'))\nconst FeedPage = lazy(() => import('components/_pages/FeedPage'))\n\nconst TestPage = lazy(() => import('components/TestPage/TestPage'))\nconst FormTestPage = lazy(() => import('components/TestPage/FormTestPage'))\n\n\nconst App: React.FC = () => {\n    return (\n        <Suspense fallback={<AppSpinner/>}>\n            <Switch>\n                {/*Pages*/}\n                <Route path=\"/feed\" render={() => <Layout sidebar={true}><FeedPage/></Layout>}/>\n                <Route path=\"/post/:id\" render={() => <Layout sidebar={true}><PostPage/></Layout>}/>\n                <Route exact path=\"/profile/:username?\" render={() => <Layout sidebar={true}><ProfilePage/></Layout>}/>\n                <Route path=\"/dialogs/:username?\" render={() => <Layout sidebar={true}><DialogsPage/></Layout>}/>\n                <Route path=\"/users/:filter?\" render={() => <Layout sidebar={true}><UsersPage/></Layout>}/>\n\n                {/*Pages under construction*/}\n                <Route path=\"/settings\" render={() => <Layout sidebar={true}>Settings Page</Layout>}/>\n\n                {/*Component testing playgrounds (delete on prod)*/}\n                <Route path={'/testpage'} component={TestPage}/>\n                <Route path={'/formtestpage'} component={FormTestPage}/>\n\n                <Route path=\"/login\" render={() => <Layout background={true}><LoginPage/></Layout>}/>\n                <Route path=\"/register\" render={() => <Layout background={true}><RegistrationPage/></Layout>}/>\n                <Route exact path=\"/\" component={HomePage}/>\n\n                <Route render={() => <div>404 Error: No such page</div>}/>\n            </Switch>\n        </Suspense>\n    )\n}\n\n// Container\nconst AppContainer: React.FC = () => {\n    const dispatch = useDispatch()\n    const initialized = useSelector((state: StateType) => state.app.initialized)\n\n\n    useEffect(() => {\n        dispatch(initializeApp())\n        return () => { dispatch(deinitializeApp()) }\n    }, [dispatch])\n\n    if (!initialized) return <Spinner size={100} thickness={4} fullscreen={true}/>\n\n    return (\n        <App/>\n    )\n}\n\nconst AppSpinner = () => <div style={{ width: '100vw', height: '100vh', display: 'flex', justifyContent: 'center', alignItems: 'center'}}>\n    <Spinner size={100} thickness={4}/>\n</div>\n\nexport default AppContainer\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import {applyMiddleware, combineReducers, createStore, Action} from 'redux'\nimport {AuthActionType, authReducer} from './reducers/auth.reducer'\n\nimport profileReducer, {ProfileActionType} from './reducers/profile.reducer'\nimport postsReducer, {PostsActionType} from './reducers/posts.reducer'\nimport {AppActionType, appReducer} from './reducers/app.reducer'\nimport {UsersActionType, usersReducer} from './reducers/users.reducer'\nimport thunkMiddleware, {ThunkAction} from 'redux-thunk'\nimport {dialogsReducer} from './reducers/dialogs.reducer'\n\n// generic for extracting action types from actions object\nexport type InferActionsTypes<T> = T extends { [key: string]: infer U } ? U : never\n\n// includes all action types from all reducer files\nexport type ActionType = AppActionType | AuthActionType | ProfileActionType | UsersActionType | PostsActionType\nexport type AsyncThunkType = ThunkAction<Promise<void>, StateType, unknown, ActionType>\nexport type ThunkType<A extends Action> = ThunkAction<Promise<void>, StateType, unknown, A>\n\nconst rootReducer = combineReducers({\n    app: appReducer,\n    auth: authReducer,\n    profile: profileReducer,\n    users: usersReducer,\n    posts: postsReducer,\n    dialogs: dialogsReducer,\n})\n\ntype RootReducerType = typeof rootReducer   // get root reducer type that returns app state\nexport type StateType = ReturnType<RootReducerType> // get app state type\n\nconst store = createStore(\n    rootReducer,\n    applyMiddleware(thunkMiddleware)\n)\n\n// @ts-ignore\nwindow.s = store\n\nexport default store\n//\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport 'assets/styles/normalize.scss'\nimport 'assets/styles/global.scss'\nimport App from './components/App'\nimport reportWebVitals from './reportWebVitals'\nimport {BrowserRouter} from 'react-router-dom'\nimport store from './redux/store'\nimport {Provider} from 'react-redux'\n\nReactDOM.render(\n    <React.StrictMode>\n        <Provider store={store}>\n            <BrowserRouter>\n                <App/>\n            </BrowserRouter>\n        </Provider>\n    </React.StrictMode>\n    , document.getElementById('root')\n)\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals()\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dark\":\"Button_dark__2hb9F\",\"button\":\"Button_button__2X27R\",\"sm\":\"Button_sm__2gjuz\",\"md\":\"Button_md__6PFeM\",\"lg\":\"Button_lg__3Hs0D\",\"xl\":\"Button_xl__1nRBA\",\"spinner\":\"Button_spinner__3kVjI\",\"primary\":\"Button_primary__87yBk\",\"secondary\":\"Button_secondary__1D9ri\",\"neutral\":\"Button_neutral__1CHr3\",\"text\":\"Button_text__33Oj_\",\"link\":\"Button_link__klhEA\",\"cancel\":\"Button_cancel__2IlJx\",\"content\":\"Button_content__30ZlE\",\"contentText\":\"Button_contentText__3YZJd\",\"contentIcon\":\"Button_contentIcon__2B1ov\",\"buttonSpinner\":\"Button_buttonSpinner__3X163\",\"badge\":\"Button_badge__DJyOF\"};","import {coreApi, handleError, handleResponse} from './core.api'\nimport {EditProfileDataType} from './profile.api'\nimport {AuthUserDataType} from '../types/types'\n\n//region DATA TYPES\n// GET /auth/me/ response\n// contains userId, email and username of currently logged in user\nexport type AuthorizedUserDataType = {\n    userId: string\n    email: string\n    username: string\n    profile: EditProfileDataType\n}\n\n// POST /auth/login/\n// contains data needed for login (gathered from login form)\nexport type LoginDataType = {\n    email: string\n    password: string\n    rememberMe: boolean\n}\n\n// POST /auth/register/\n// contains data needed for registration (gathered from registration form)\nexport type RegistrationDataType = {\n    firstName: string\n    lastName: string\n    username: string\n    email: string\n    password: string\n}\n//endregion\n\nexport const authApi = {\n    login: (loginData: LoginDataType) => coreApi\n        .post('/auth/login', loginData)\n        .then(handleResponse())\n        .catch(handleError()),\n\n    me: () => coreApi\n        .get('/auth/me')\n        .then(handleResponse<AuthUserDataType>())\n        .catch(handleError()),\n\n    refreshToken: () => coreApi\n        .post('http://localhost:5000/api/auth/refresh-tokens')\n        .then(handleResponse())\n        .catch(handleError()),\n\n    logout: () => coreApi\n        .delete('/auth/logout')\n        .then(handleResponse())\n        .catch(handleError()),\n\n    register: (registrationData: RegistrationDataType) => coreApi\n        .post('/auth/register', registrationData)\n        .then(handleResponse())\n        .catch(handleError())\n}\n\n\ncoreApi.interceptors.response.use(\n    (res) => {\n        return res\n    },\n    async (err) => {\n        const originalConfig = err.config\n        if (err.response.status === 401 && !originalConfig._retry && err.response.data.message !== 'Invalid token') {\n            originalConfig._retry = true\n            await authApi.refreshToken()\n            return coreApi(originalConfig);\n        }\n        return Promise.reject(err)\n    }\n)","import {authApi, LoginDataType, RegistrationDataType} from 'api/auth.api'\nimport {ResultCodes} from 'api/core.api'\nimport {InferActionsTypes, ThunkType} from '../store'\nimport {startMessagesListening, stopMessagesListening} from './dialogs.reducer'\nimport {AuthUserDataType, ServerValidationErrorType} from 'types/types'\n\n// INITIAL STATE\nconst initialState = {\n    authorized: false,\n    user: null as AuthUserDataType | null,\n    registrationErrors: [] as Array<ServerValidationErrorType>,\n    loginErrors: [] as Array<ServerValidationErrorType>,\n    registrationSuccessful: false\n}\ntype AuthStateType = typeof initialState\n\n// REDUCER\nexport const authReducer = (state: AuthStateType = initialState, action: AuthActionType): AuthStateType => {\n    switch (action.type) {\n        case 'rsn/auth/SET_USER': {\n            return {\n                ...state,\n                authorized: true,\n                user: action.user\n            }\n        }\n        case 'rsn/auth/CLEAR_USER': {\n            return {\n                ...state,\n                authorized: false,\n                user: null\n            }\n        }\n        case 'rsn/auth/SET_REGISTRATION_SUCCESSFUL': {\n            return {\n                ...state,\n                registrationSuccessful: action.registrationSuccessful\n            }\n        }\n        case 'rsn/auth/SET_REGISTRATION_ERRORS': {\n            return  {\n                ...state,\n                registrationErrors: action.errors\n            }\n        }\n        case 'rsn/auth/SET_LOGIN_ERRORS': {\n            return {\n                ...state,\n                loginErrors: action.errors\n            }\n        }\n        default: {\n            return state\n        }\n    }\n}\n\n//region ACTION CREATORS\nexport const authActions = {\n    setUser: (user: AuthUserDataType) => ({\n        type: 'rsn/auth/SET_USER',\n        user\n    } as const),\n    clearUser: () => ({type: 'rsn/auth/CLEAR_USER'} as const),\n    setRegistrationSuccessful: (registrationSuccessful: boolean) => ({\n        type: 'rsn/auth/SET_REGISTRATION_SUCCESSFUL',\n        registrationSuccessful\n    } as const),\n    setRegistrationErrors: (errors: Array<ServerValidationErrorType>) => ({\n        type: 'rsn/auth/SET_REGISTRATION_ERRORS',\n        errors\n    } as const),\n    setLoginErrors: (errors: Array<ServerValidationErrorType>) => ({\n        type: 'rsn/auth/SET_LOGIN_ERRORS',\n        errors\n    } as const)\n}\nexport type AuthActionType = ReturnType<InferActionsTypes<typeof authActions>>\n//endregion\n\n//region THUNK CREATORS\nexport const login = (loginFormData: LoginDataType): ThunkType<AuthActionType> => async (dispatch) => {\n    const res = await authApi.login(loginFormData)\n    if (res.resultCode === ResultCodes.success) {\n        dispatch(getAuthUserData())\n        dispatch(startMessagesListening())\n    }\n    if (res.resultCode === ResultCodes.error) {\n        dispatch(authActions.setLoginErrors(res.errors))\n    }\n}\n\nexport const logout = (): ThunkType<AuthActionType> => async (dispatch) => {\n    const res = await authApi.logout()\n    if (res.resultCode === ResultCodes.success) {\n        dispatch(getAuthUserData())\n        dispatch(stopMessagesListening())\n    }\n    if (res.resultCode === ResultCodes.error) {\n        console.log(res)\n    }\n}\n\nexport const getAuthUserData = (): ThunkType<AuthActionType> => async (dispatch) => {\n    const res = await authApi.me()\n    if (res.resultCode === ResultCodes.success) {\n        const {user} = res.data\n        dispatch(authActions.setUser(user))\n    } else {\n        dispatch(stopMessagesListening())\n        dispatch(authActions.clearUser())\n    }\n\n    if (res.resultCode === ResultCodes.error) {\n        console.log(res)\n    }\n    if (res.resultCode === ResultCodes.expiredToken) {\n        console.log(res)\n    }\n}\n\n\nexport const register = (registrationData: RegistrationDataType): ThunkType<AuthActionType> => async (dispatch) => {\n    const res = await authApi.register(registrationData)\n    if (res.resultCode === ResultCodes.success) {\n        dispatch(authActions.setRegistrationSuccessful(true))\n    }\n    if (res.resultCode === ResultCodes.error) {\n        dispatch(authActions.setRegistrationErrors(res.errors))\n    }\n}\n//endregion","import axios, {AxiosError, AxiosResponse} from 'axios'\nimport {ServerValidationErrorType} from 'types/types'\n\nexport const coreApi = axios.create({\n    baseURL: 'http://localhost:5000/api/',\n    withCredentials: true,\n    // validateStatus: status => status < 500\n})\n\n// basic result codes. used by default in ResponseType\n// can be extended if needed\nexport enum ResultCodes {\n    success = 0,\n    error = 1,\n    authError = 10,\n    expiredToken = 11,\n}\n\n// all server responses have this type\nexport type APIResponseType<D = undefined> = {\n    resultCode: ResultCodes\n    message: string\n    data: D\n    errors?: Array<ServerValidationErrorType>\n}\nexport const handleResponse = <DataType = undefined>() => (res: AxiosResponse<APIResponseType<DataType>>) => {\n    return res.data\n}\n\nexport const handleError = () => (err: AxiosError) => {\n    return err.response?.data\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dark\":\"Form_dark__2LdZt\",\"wrapper\":\"Form_wrapper__1IgJv\",\"formError\":\"Form_formError__db5A1\",\"row\":\"Form_row__WKQaG\",\"left\":\"Form_left__3_yUo\",\"right\":\"Form_right__1qBjB\",\"center\":\"Form_center__3YLZC\",\"fill\":\"Form_fill__2XNHO\",\"item\":\"Form_item__3V9Wa\",\"label\":\"Form_label__1FR0D\",\"disabled\":\"Form_disabled__306fU\",\"labelText\":\"Form_labelText__1uFJ4\",\"labelRequired\":\"Form_labelRequired__3-CSb\",\"formItemError\":\"Form_formItemError__2unol\"};","import {MessageType} from '../types/types'\nimport {io} from 'socket.io-client'\n\nlet subscribers = [] as Array<(message: MessageType) => void>\n\nlet socket = io('http://localhost:5000', {withCredentials: true, autoConnect: false})\n\ntype ServerMessageResponseType = { dialogId: string, message: MessageType }\nconst handleServerMessage = (serverMessageResponse: ServerMessageResponseType) => {\n    console.log('Message from server ', serverMessageResponse.message)\n    subscribers.forEach(s => s(serverMessageResponse.message))\n}\n\nsocket.on('server-message', handleServerMessage)\n\nsocket.on('connect', () => console.log('Socket connection opened'))\nsocket.on('disconnect', () => console.log('Socket connection closed'))\n\nexport const socketApi = {\n    connect() {\n        if (!socket.connected) socket.connect()\n    },\n    disconnect() {\n        if (socket.connected) {\n            socket.disconnect()\n            subscribers = []\n        }\n    },\n    subscribe(callback: (message: MessageType) => void) {\n        subscribers.push(callback)\n        return () => {\n            subscribers = subscribers.filter(s => s !== callback)\n        }\n    },\n    unsubscribe(callback: (message: MessageType) => void) {\n        subscribers = subscribers.filter(s => s !== callback)\n    },\n    sendMessage(message: string, dialogId: string) {\n        socket.emit('client-message', message, dialogId)\n    },\n    joinDialogs() {\n        socket.emit('client-join-dialogs')\n    }\n}","import {coreApi, handleError, handleResponse} from './core.api'\nimport {DialogType, MessageType, UserItemDataType} from '../types/types'\n\ntype DialogDataType = {\n    dialog: {\n        _id: string,\n        createdAt: Date,\n        updatedAt: Date,\n        users: Array<UserItemDataType>,\n        messages: Array<MessageType>\n    }\n}\n\ntype DialogsDataType = {\n    dialogs: Array<DialogType>\n}\n\nexport const dialogApi = {\n    getDialogs: () => coreApi\n        .get(`/dialog`)\n        .then(handleResponse<DialogsDataType>())\n        .catch(handleError()),\n    getMessages: (username: string) => coreApi\n        .get(`/dialog/${username}`)\n        .then(handleResponse<DialogDataType>())\n        .catch(handleError())\n}","import {InferActionsTypes, ThunkType} from '../store'\nimport {DialogType, MessageType} from 'types/types'\nimport {socketApi} from 'api/socket.api'\nimport {Dispatch} from 'react'\nimport {dialogApi} from 'api/dialog.api'\nimport {ResultCodes} from 'api/core.api'\n\n\n// INITIAL STATE\nconst initialState = {\n    currentDialogId: null as string | null,\n    messages: [] as Array<MessageType>,\n    dialogs: [] as Array<DialogType>\n}\ntype DialogsStateType = typeof initialState\n\n// REDUCER\nexport const dialogsReducer = (state: DialogsStateType = initialState, action: DialogsActionType): DialogsStateType => {\n    switch (action.type) {\n        case 'rsn/chat/ADD_MESSAGE': {\n            return {\n                ...state,\n                messages: [...state.messages, action.message],\n                dialogs: state.dialogs.map(dialog => (dialog._id === action.message.dialogId) ? {...dialog, updated: action.message.date} : dialog)\n            }\n        }\n        case 'rsn/chat/SET_DIALOG': {\n            return {\n                ...state,\n                currentDialogId: action.currentDialogId,\n                messages: action.messages\n            }\n        }\n        case 'rsn/chat/SET_DIALOGS': {\n            return {\n                ...state,\n                dialogs: action.dialogs\n            }\n        }\n        default: {\n            return state\n        }\n    }\n}\n\n//region ACTION CREATORS\nexport const dialogsActions = {\n    setDialog: (currentDialogId: string, messages: Array<MessageType>) => ({type: 'rsn/chat/SET_DIALOG', currentDialogId, messages} as const),\n    setDialogs: (dialogs: Array<DialogType>) => ({type: 'rsn/chat/SET_DIALOGS', dialogs} as const),\n    addMessage: (message: MessageType) => ({type: 'rsn/chat/ADD_MESSAGE', message} as const),\n}\nexport type DialogsActionType = ReturnType<InferActionsTypes<typeof dialogsActions>>\n//endregion\n\n//region THUNK CREATORS\n// todo: need to test and debug dialogs. sometimes messages not added to state immediately after sending.\nlet _messageHandler: ((message: MessageType) => void) | null = null\nconst messageHandlerCreator = (dispatch: Dispatch<DialogsActionType>) => {\n\n    if (_messageHandler) return _messageHandler\n    return (message: MessageType) => {\n        dispatch(dialogsActions.addMessage(message))\n    }\n}\n\nexport const startMessagesListening = (): ThunkType<DialogsActionType> => async (dispatch) => {\n    socketApi.connect()\n    socketApi.joinDialogs()\n    socketApi.subscribe(messageHandlerCreator(dispatch))\n}\nexport const stopMessagesListening = (): ThunkType<DialogsActionType> => async (dispatch) => {\n    socketApi.unsubscribe(messageHandlerCreator(dispatch))\n    socketApi.disconnect()\n}\nexport const sendMessage = (message: string, dialogId: string): ThunkType<DialogsActionType> => async (dispatch) => {\n    socketApi.sendMessage(message, dialogId)\n    dispatch(getDialogs())\n}\n\nexport const getDialogs = (): ThunkType<DialogsActionType> => async (dispatch) => {\n    const res =  await dialogApi.getDialogs()\n\n    if (res.resultCode === ResultCodes.success) {\n        dispatch(dialogsActions.setDialogs(res.data.dialogs))\n    }\n    if (res.resultCode === ResultCodes.error) {\n        console.log(res)\n    }\n}\n\nexport const openDialog = (username: string): ThunkType<DialogsActionType> => async (dispatch) => {\n    const res = await dialogApi.getMessages(username)\n    if (res.resultCode === ResultCodes.success) {\n        dispatch(dialogsActions.setDialog(res.data.dialog._id, res.data.dialog.messages))\n    }\n    if (res.resultCode === ResultCodes.error) {\n        console.log(res)\n    }\n}\n//endregion\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dark\":\"Avatar_dark__1YuV1\",\"wrapper\":\"Avatar_wrapper__-6Oyv\",\"border\":\"Avatar_border__1TxWY\",\"image\":\"Avatar_image__3cwVV\",\"shadow\":\"Avatar_shadow__19hLN\",\"buttons\":\"Avatar_buttons__3JY8W\",\"photo\":\"Avatar_photo__4sCkc\",\"onLineIndicator\":\"Avatar_onLineIndicator__1VnnP\",\"name\":\"Avatar_name__32WMT\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dark\":\"Flex_dark__VglvW\",\"row\":\"Flex_row__1qkrg\",\"bordered\":\"Flex_bordered__2oy8P\",\"col\":\"Flex_col__16wLV\",\"item\":\"Flex_item__2h0t2\",\"space\":\"Flex_space__1qV_U\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"white\":\"#fff\",\"black\":\"#000\",\"accent\":\"#3f72af\",\"dark\":\"colors_dark__1REuw\",\"mid\":\"#d3e5ff\",\"light\":\"#f9f7f7\",\"error\":\"#ef3e36\",\"success\":\"#9cec5b\",\"darkGrey\":\"#404040\",\"midGrey\":\"gray\",\"lightGrey\":\"#f2f2f2\",\"textDark\":\"var(--text-color-dark)\",\"textMid\":\"var(--text-color-mid)\",\"textLight\":\"var(--text-color-light)\",\"textLink\":\"var(--text-color-link)\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dark\":\"Layout_dark__1DNiK\",\"layout\":\"Layout_layout__vps_j\",\"background\":\"Layout_background__3hwwR\",\"container\":\"Layout_container__1qghn\",\"appBar\":\"Layout_appBar__TzzsT\",\"main\":\"Layout_main__3OBIG\",\"content\":\"Layout_content__3nMgS\",\"sidebar\":\"Layout_sidebar__2EpYu\"};","import React from 'react'\nimport classes from './Card.module.scss'\n\ntype PropsType = {maxWidth?: number}\n\nexport const Card: React.FC<PropsType> = ({children, maxWidth}) => <div\n    className={classes.Card}\n    style={{maxWidth}}\n>\n    {children}\n</div>","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dark\":\"BottomNavigation_dark__3hB8O\",\"wrapper\":\"BottomNavigation_wrapper__1D3OW\",\"item\":\"BottomNavigation_item__1FQdv\"};","import React, {useEffect, useState} from 'react'\nimport classes from './Avatar.module.scss'\nimport classnames from 'classnames'\nimport defaultAvatarImage from 'assets/images/avatar-default.jpg'\nimport {Area} from 'react-easy-crop/types'\nimport ImageUploadForm from 'components/_forms/ImageUploadForm/ImageUploadForm'\nimport {Button} from 'components/_shared/Button/Button'\nimport {PencilFill, ZoomIn} from 'react-bootstrap-icons'\nimport {ModalWindow} from 'components/_shared/ModalWindow/ModalWindow'\n\ntype PropsType = {\n    smallImg?: string | null\n    largeImg?: string | null\n    size?: number\n    name?: string\n    border?: boolean\n    shadow?: boolean\n    online?: boolean\n    onEdit?: (image: File, cropArea: Area) => void\n}\n\nexport const Avatar: React.FC<PropsType> = ({\n                                                smallImg,\n                                                largeImg,\n                                                size = 90,\n                                                name,\n                                                online,\n                                                border = false,\n                                                shadow = false,\n                                                onEdit\n                                            }) => {\n    const zoomable = !!(smallImg && largeImg)\n    const editable = !!onEdit\n\n    const [editModalOpened, setEditModalOpened] = useState(false)\n    const [zoomModalOpened, setZoomModalOpened] = useState(false)\n\n    useEffect(() => {\n        setEditModalOpened(false)\n    }, [smallImg])\n    const openEditModal = () => setEditModalOpened(true)\n    const closeEditModal = () => setEditModalOpened(false)\n\n    useEffect(() => {\n        setZoomModalOpened(false)\n    }, [])\n    const openZoomModal = () => setZoomModalOpened(true)\n    const closeZoomModal = () => setZoomModalOpened(false)\n\n    return (\n        <div\n            className={classnames(\n                classes.wrapper,\n                {[classes.border]: border},\n                {[classes.shadow]: shadow}\n            )}\n            style={{width: size}}\n        >\n\n            <div className={classes.image} style={{width: size, height: size}}>\n\n                {(editable || zoomable) && <AvatarButtons\n                    onEditClick={editable ? openEditModal : undefined}\n                    onZoomClick={zoomable ? openZoomModal : undefined}\n                />}\n\n                <div className={classes.photo}>\n                    <img src={smallImg || defaultAvatarImage} alt=\"avatar\"/>\n                </div>\n\n                {online && <div className={classes.onLineIndicator}/>}\n            </div>\n\n            {name && <div className={classes.name}>{name}</div>}\n\n            {editable && onEdit && <EditAvatarModalWindow\n                open={editModalOpened}\n                onSubmit={onEdit}\n                onClose={closeEditModal}\n            />}\n\n            {zoomable && largeImg && <ZoomAvatarModalWindow\n                img={largeImg}\n                open={zoomModalOpened}\n                onClose={closeZoomModal}\n            />}\n        </div>\n    )\n}\n\n\ntype EditAvatarModalWindowPropsType = {\n    open: boolean,\n    onSubmit: (image: File, cropArea: Area) => void\n    onClose: () => void\n}\nconst EditAvatarModalWindow: React.FC<EditAvatarModalWindowPropsType> = ({\n                                                                             open,\n                                                                             onSubmit,\n                                                                             onClose\n                                                                         }) => {\n    return (\n        <ModalWindow open={open}>\n            <ImageUploadForm aspect={1} onSubmit={onSubmit} closeModal={onClose}/>\n        </ModalWindow>\n    )\n}\n\n\ntype ZoomAvatarModalWindowPropsType = {\n    img: string,\n    open: boolean,\n    onClose: () => void\n}\nconst ZoomAvatarModalWindow: React.FC<ZoomAvatarModalWindowPropsType> = ({\n                                                                             img,\n                                                                             open,\n                                                                             onClose\n                                                                         }) => {\n    return (\n        <ModalWindow open={open} close={onClose}>\n            {img && <img src={img} alt=\"\"/>}\n        </ModalWindow>\n    )\n}\n\n\ntype AvatarButtonsPropsType = {\n    onEditClick?: () => void\n    onZoomClick?: () => void\n}\nconst AvatarButtons: React.FC<AvatarButtonsPropsType> = ({\n                                                             onEditClick,\n                                                             onZoomClick\n                                                         }) => {\n    return (\n        <div className={classes.buttons}>\n            {onZoomClick && <Button onClick={onZoomClick} type={'text'} size={'lg'} style={{color: 'white'}}>\n                <Button.Icon>\n                    <ZoomIn color={'white'}/>\n                </Button.Icon>\n            </Button>}\n            {onEditClick && <Button onClick={onEditClick} type={'text'} size={'lg'} style={{color: 'white'}}>\n                <Button.Icon>\n                    <PencilFill color={'white'}/>\n                </Button.Icon>\n            </Button>}\n        </div>\n    )\n}","export default \"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEBLAEsAAD/4QBWRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAAAAAEsAAAAAQAAASwAAAAB/+0ALFBob3Rvc2hvcCAzLjAAOEJJTQQEAAAAAAAPHAFaAAMbJUccAQAAAgAEAP/hDIFodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvADw/eHBhY2tldCBiZWdpbj0n77u/JyBpZD0nVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkJz8+Cjx4OnhtcG1ldGEgeG1sbnM6eD0nYWRvYmU6bnM6bWV0YS8nIHg6eG1wdGs9J0ltYWdlOjpFeGlmVG9vbCAxMC4xMCc+CjxyZGY6UkRGIHhtbG5zOnJkZj0naHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyc+CgogPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9JycKICB4bWxuczp0aWZmPSdodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyc+CiAgPHRpZmY6UmVzb2x1dGlvblVuaXQ+MjwvdGlmZjpSZXNvbHV0aW9uVW5pdD4KICA8dGlmZjpYUmVzb2x1dGlvbj4zMDAvMTwvdGlmZjpYUmVzb2x1dGlvbj4KICA8dGlmZjpZUmVzb2x1dGlvbj4zMDAvMTwvdGlmZjpZUmVzb2x1dGlvbj4KIDwvcmRmOkRlc2NyaXB0aW9uPgoKIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PScnCiAgeG1sbnM6eG1wTU09J2h0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8nPgogIDx4bXBNTTpEb2N1bWVudElEPmFkb2JlOmRvY2lkOnN0b2NrOjEwYjk3ZTMwLTY5ZmMtNDVlZS1iN2MwLWU2ZmZmOGJjOTNhNjwveG1wTU06RG9jdW1lbnRJRD4KICA8eG1wTU06SW5zdGFuY2VJRD54bXAuaWlkOmNhNTY3YzM3LWY1MTctNDQ1Ni05Y2Y3LTc2Mzg5NWQyOWQ1NTwveG1wTU06SW5zdGFuY2VJRD4KIDwvcmRmOkRlc2NyaXB0aW9uPgo8L3JkZjpSREY+CjwveDp4bXBtZXRhPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAo8P3hwYWNrZXQgZW5kPSd3Jz8+/9sAQwAFAwQEBAMFBAQEBQUFBgcMCAcHBwcPCwsJDBEPEhIRDxERExYcFxMUGhURERghGBodHR8fHxMXIiQiHiQcHh8e/9sAQwEFBQUHBgcOCAgOHhQRFB4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4e/8AAEQgBaAFoAwEiAAIRAQMRAf/EABsAAQACAwEBAAAAAAAAAAAAAAAFBgMEBwEC/8QAPRABAAIBAgIEDAQEBgMBAAAAAAECAwQRBQYTITFBEhYiUVRxgZGSscHRFCNhoTJCUnIVQ1Ni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\"","import React from 'react'\nimport classes from './Spinner.module.scss'\n\ntype PropsType = {\n    size?: number\n    color?: string\n    thickness?: number\n    fullscreen?: boolean\n}\nconst Spinner: React.FC<PropsType> = ({\n                                          size = 20,\n                                          color = '#00BFFF',\n                                          thickness = 2,\n    fullscreen= false\n                                      }) => {\n    const style = {\n        width: size,\n        height: size,\n        borderWidth: thickness,\n        borderLeftColor: color,\n        borderBottomColor: color,\n        borderRightColor: color\n    }\n\n    return (\n        <div className={fullscreen ? classes.fullscreen : ''}>\n            <div className={classes.spinner} style={style}/>\n        </div>\n    )\n}\n\nexport default Spinner","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dark\":\"UserControl_dark__r3-na\",\"userControl\":\"UserControl_userControl__1ax5J\",\"userControlDropdown\":\"UserControl_userControlDropdown__11iA0\",\"userControlUsername\":\"UserControl_userControlUsername__3zwhR\",\"userControlList\":\"UserControl_userControlList__2moAy\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dark\":\"InputFile_dark__315XE\",\"inputFile\":\"InputFile_inputFile__3wa1w\",\"spinner\":\"InputFile_spinner__1bACb\",\"dragActive\":\"InputFile_dragActive__3-290\",\"cropperContainer\":\"InputFile_cropperContainer__1uVMX\",\"imageCrop\":\"InputFile_imageCrop__tzrhy\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dark\":\"ModalWindow_dark__gRlSV\",\"header\":\"ModalWindow_header__1wqhA\",\"title\":\"ModalWindow_title__QwVLR\",\"button\":\"ModalWindow_button__2AUC1\",\"content\":\"ModalWindow_content__24nri\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dark\":\"SidebarSubscriptions_dark__1CU1F\",\"sidebarFriends\":\"SidebarSubscriptions_sidebarFriends__2QcoA\",\"Title\":\"SidebarSubscriptions_Title__1bOCD\",\"Avatars\":\"SidebarSubscriptions_Avatars___nuro\",\"Link\":\"SidebarSubscriptions_Link__1S7QW\"};","import breakpoints from 'assets/styles/breakpoints.module.scss'\nimport {useDispatch, useSelector} from 'react-redux'\nimport {useEffect, useState} from 'react'\nimport {getAuthUserData} from 'redux/reducers/auth.reducer'\nimport {StateType} from 'redux/store'\n\nexport const useAuthCheck = () => {\n    const dispatch = useDispatch()\n    useEffect(() => {\n        dispatch(getAuthUserData())\n    }, [dispatch])\n\n    return useSelector((state: StateType) => state.auth.authorized)\n}\n\nexport const useBreakpoint = () => {\n    const [width, setWidth] = useState<number>(0)\n\n    const updateDimensions = () => {\n        setWidth(window.innerWidth)\n    }\n\n    useEffect(() => {\n        updateDimensions()\n        window.addEventListener('resize', updateDimensions)\n\n        return () => window.addEventListener('resize', updateDimensions);\n    }, [])\n\n    const breakpointsObject: {[key: string]: boolean} = {}\n    for (const [key, value] of Object.entries(breakpoints)) {\n        breakpointsObject[key] = width < Number.parseInt(value)\n    }\n\n    return breakpointsObject\n}\n\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"btnSmall\":\"12\",\"btnMedium\":\"15\",\"btnLarge\":\"18\",\"avatarProfile\":\"130\",\"avatarProfilePhoneTablet\":\"100\",\"dark\":\"sizes_dark__1qGfd\"};","import 'reactjs-popup/dist/index.css'\nimport React from 'react'\nimport './popupjs.css'\nimport Popup from 'reactjs-popup'\nimport {XLg} from 'react-bootstrap-icons'\nimport classes from './ModalWindow.module.scss'\nimport {Button} from 'components/_shared/Button/Button'\n\ntype Props = {\n    title?: string\n    open: boolean\n    close?: () => void\n}\n\nexport const ModalWindow: React.FC<Props> = ({title, close, open, children}) => {\n    return <Popup open={open} modal nested onClose={close}\n                  contentStyle={{borderRadius: 5, padding: '10px'}}\n                  closeOnDocumentClick={false}>\n        {(title || close) && <div className={classes.header}>\n            <div className={classes.title}>{title}</div>\n            <div className={classes.button} style={{marginBottom: 10}}>\n                <Button type={'cancel'} size='sm' onClick={close}>\n                    <Button.Icon><XLg/></Button.Icon>\n                </Button>\n            </div>\n        </div>}\n        <div className={classes.content}>\n            {children}\n        </div>\n    </Popup>\n}","import React, {CSSProperties} from 'react'\nimport classnames from 'classnames'\nimport classes from './Button.module.scss'\nimport colors from 'assets/styles/colors.module.scss'\nimport sizes from 'assets/styles/sizes.module.scss'\nimport Spinner from 'components/_shared/Spinner/Spinner'\n\ntype ButtonTypes = 'primary' | 'secondary' | 'neutral' | 'text' | 'link' | 'cancel'\ntype ButtonSizes = 'sm' | 'md' | 'lg' | 'xl'\n\ntype ButtonType = {\n    onClick?: (e: React.MouseEvent) => void\n    type?: ButtonTypes\n    size?: ButtonSizes\n    disabled?: boolean\n    spinner?: boolean\n    style?: CSSProperties\n}\n\nexport const Button: React.FC<ButtonType> & {\n    Icon: React.FC,\n    Text: React.FC,\n    Spinner: React.FC<{type: ButtonTypes, size: ButtonSizes}>,\n    Badge: React.FC\n} = ({\n         children,\n         onClick,\n         type = 'primary',\n         size = 'md',\n         disabled = false,\n         spinner = false,\n         style\n     }) => {\n\n    return (\n        <button onClick={onClick} disabled={disabled || spinner} style={style}\n                className={classnames(\n                    classes.button,\n                    {[classes.primary]: !type || type === 'primary'},\n                    {[classes.secondary]: type === 'secondary'},\n                    {[classes.neutral]: type === 'neutral'},\n                    {[classes.text]: type === 'text'},\n                    {[classes.cancel]: type === 'cancel'},\n                    {[classes.link]: type === 'link'},\n\n                    {[classes.spinner]: spinner},\n\n                    {[classes[size]]: size },\n                )}>\n\n            <div className={classnames(\n                classes.content,\n                {[classes.spinner]: spinner}\n            )}>\n                {children}\n                {spinner && <div className={classes.buttonSpinner}>\n                    <Button.Spinner size={size} type={type}/>\n                </div>}\n            </div>\n\n        </button>\n    )\n\n}\n\nButton.Icon = ({children}) => {\n    return <div className={classes.contentIcon}>\n        {children}\n    </div>\n}\n\nButton.Text = ({children}) => {\n    return <div className={classes.contentText}>\n        {children}\n    </div>\n}\n\nButton.Spinner = ({type, size}) => {\n    const spinnerColor = (type === 'primary' || type === 'cancel') ? colors.fontLight : colors.fontDark\n    const spinnerSizes: {[key: string]: string} = {\n        sm: sizes.btnSmall,\n        md: sizes.btnMedium,\n        lg: sizes.btnLarge\n    }\n    const spinnerSize = Number.parseInt(spinnerSizes[size])\n    return <Spinner color={spinnerColor} size={spinnerSize}/>\n}\n\nButton.Badge = ({children}) => {\n    return <div className={classes.badge}>{children}</div>\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dark\":\"Header_dark__2kYXd\",\"header\":\"Header_header__2Ko_3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dark\":\"Spinner_dark__13gp1\",\"fullscreen\":\"Spinner_fullscreen__1BQ8a\",\"spinner\":\"Spinner_spinner__KWXlP\",\"spin\":\"Spinner_spin__3ILAz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dark\":\"InputImageCrop_dark__1dhnZ\",\"cropperContainer\":\"InputImageCrop_cropperContainer__JlIko\",\"imageCrop\":\"InputImageCrop_imageCrop__2Hyu3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dark\":\"InputText_dark__-ZdoW\",\"input\":\"InputText_input__zkTt8\",\"error\":\"InputText_error__3-bBW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dark\":\"InputPassword_dark__2ZYlm\",\"input\":\"InputPassword_input__2d_Nv\",\"error\":\"InputPassword_error__F73Vm\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dark\":\"InputCheckbox_dark__1W8oT\",\"checkbox\":\"InputCheckbox_checkbox__rfK0M\",\"box\":\"InputCheckbox_box__1KElf\"};","import React, {CSSProperties} from 'react'\nimport classes from 'components/_shared/Flex/Flex.module.scss'\nimport classnames from 'classnames'\n\ntype RowProps = {\n    children?: Array<React.ReactElement | boolean> | React.ReactElement | boolean\n    verticalAlign?: 'start' | 'end' | 'center' | 'space-between' | 'space-around'\n    horizontalAlign?: 'start' | 'end' | 'center' | 'space-between' | 'space-around'\n    padding?: number | string\n    margin?: number | string\n    gap?: number\n    bordered?: boolean\n}\n\nexport const Row: React.FC<RowProps> = ({\n                                            children,\n                                            verticalAlign = 'start',\n                                            horizontalAlign = 'start',\n                                            padding = 0,\n                                            gap = 0,\n                                            bordered\n                                        }) => {\n    return <div\n        className={classnames(\n            classes.row,\n            {[classes.bordered]: bordered})\n        }\n        style={{\n            alignItems: 'stretch',\n            justifyContent: horizontalAlign,\n            padding\n        }}\n    >\n        {(children instanceof Array) && children.map((child, index) => {\n                if (typeof child === 'boolean') return false\n                return React.cloneElement(child, {\n                    key: index,\n                    style: {\n                        marginRight: (index === children.length - 1) ? 0 : gap,\n                        justifyContent: verticalAlign\n                    },\n                    className: child.props.className + ' ' + classes.col\n                })\n            }\n        )}\n\n        {children && typeof children !== 'boolean' && !(children instanceof Array) &&\n            React.cloneElement(children, {\n                style: {\n                    marginRight: 0,\n                    justifyContent: verticalAlign\n                },\n                className: children.props.className + ' ' + classes.col\n            })\n        }\n    </div>\n}\n\ntype ColProps = {\n    verticalAlign?: 'start' | 'end' | 'center' | 'space-between' | 'space-around'\n    horizontalAlign?: 'start' | 'end' | 'center' | 'baseline' | 'stretch'\n    style?: CSSProperties,\n    padding?: number | string,\n    gap?: number,\n    bordered?: boolean,\n    stretch?: boolean,\n}\n\nexport const Col: React.FC<ColProps> = ({\n                                            children,\n                                            style,\n                                            verticalAlign,\n                                            horizontalAlign = 'start',\n                                            padding = 0,\n                                            gap = 0,\n                                            bordered,\n    stretch= false\n                                        }) => {\n\n    return <div className={classnames(classes.col, {[classes.bordered]: bordered})} style={{\n        padding,\n        marginRight: style?.marginRight,\n        alignItems: horizontalAlign,\n        justifyContent: verticalAlign ? verticalAlign : style?.justifyContent,\n        flex: stretch ? 1 : undefined\n    }}>\n\n        {React.Children.map(children, child => <div className={classes.item} style={{marginBottom: gap}}>\n            {child}\n        </div>)}\n    </div>\n}\n\nexport const Space: React.FC = () => {\n    return <div className={classes.space}/>\n}\n","import {Controller, RegisterOptions} from 'react-hook-form'\nimport {Control} from 'react-hook-form/dist/types/form'\nimport React from 'react'\nimport classes from './InputText.module.scss'\nimport {Item} from 'components/_shared/Form/Form'\n\ntype InputTextPropsType = {\n    name: string,\n    label?: string,\n    placeholder?: string,\n    rules?: RegisterOptions,\n    control?: Control,\n    disabled?: boolean\n    autoFocus?: boolean\n}\n\nexport const InputText: React.FC<InputTextPropsType> = ({\n                                                            name,\n                                                            label,\n                                                            rules,\n                                                            control,\n                                                            disabled = false,\n                                                            autoFocus = false,\n                                                            placeholder\n                                                        }) => {\n    return <Controller\n        control={control}\n        name={name}\n        rules={rules}\n        render={({field, fieldState}) => <Item label={label} required={!!rules?.required} error={fieldState.error}\n                                               disabled={disabled}>\n            <input\n                type={'text'}\n                className={`${classes.input} ${fieldState.error ? classes.error : ''}`}\n                name={field.name}\n                value={field.value}\n                onChange={field.onChange}\n                disabled={disabled}\n                autoFocus={autoFocus}\n                placeholder={placeholder}\n            />\n        </Item>}\n    />\n}","import {coreApi, handleError, handleResponse} from './core.api'\nimport {CommentType, PostType} from 'types/types'\n\nexport type PostsDataType = { posts: Array<PostType> }\nexport type PostDataType = { post: PostType }\nexport type PostCommentDataType = { comment: CommentType }\n\nexport type NewPostDataType = {\n    post: PostType\n}\n\nexport const postApi = {\n    getPosts: () => coreApi\n        .get(`/post`)\n        .then(handleResponse<PostsDataType>())\n        .catch(handleError()),\n    getFeed: () => coreApi\n        .get(`/post/feed`)\n        .then(handleResponse<PostsDataType>())\n        .catch(handleError()),\n    getUserPosts: (username: string) => coreApi\n        .get(`/user/${username}/posts`)\n        .then(handleResponse<PostsDataType>())\n        .catch(handleError()),\n    getPost: (postId: string) => coreApi\n        .get(`/post/${postId}`)\n        .then(handleResponse<PostDataType>())\n        .catch(handleError()),\n    addPost: (text: string) => coreApi\n        .post(`/post`, { text })\n        .then(handleResponse<NewPostDataType>())\n        .catch(handleError()),\n    deletePost: (id: string) => coreApi\n        .delete(`/post/${id}`)\n        .then(handleResponse())\n        .catch(handleError()),\n    addLike: (id: string) => coreApi\n        .post(`/post/${id}/like`)\n        .then(handleResponse())\n        .catch(handleError()),\n    deleteLike: (id: string) => coreApi\n        .delete(`/post/${id}/like`)\n        .then(handleResponse())\n        .catch(handleError()),\n    addPostComment: (postId: string, text: string) => coreApi\n        .post(`post/${postId}/comment`, { text })\n        .then(handleResponse<PostCommentDataType>())\n        .catch(handleError()),\n    deletePostComment: (commentId: string) => coreApi\n        .delete(`post/comment/${commentId}`)\n        .then(handleResponse())\n        .catch(handleError())\n}","// INITIAL STATE\nimport {AuthUserDataType, CommentType, PostType, UserItemDataType} from 'types/types'\nimport {InferActionsTypes, ThunkType} from '../store'\nimport {postApi} from 'api/post.api'\nimport {ResultCodes} from 'api/core.api'\nimport {authActions, AuthActionType} from './auth.reducer'\n\nconst initialState = {\n    posts: [] as Array<PostType>,\n    isAddPostPending: false as boolean\n}\nexport type PostsStateType = typeof initialState\n\n// REDUCER\nconst reducer = (state: PostsStateType = initialState, action: PostsActionType): PostsStateType => {\n    switch (action.type) {\n        case 'rsn/post/SET_POSTS': {\n            return {\n                ...state,\n                posts: action.posts\n            }\n        }\n        case 'rsn/post/ADD_POST': {\n            return {\n                ...state,\n                posts: [...state.posts, action.post]\n            }\n        }\n        case 'rsn/post/SET_ADD_POST_PENDING': {\n            return {\n                ...state,\n                isAddPostPending: action.isPending\n            }\n        }\n        case 'rsn/post/DELETE_POST': {\n            return {\n                ...state,\n                posts: state.posts.filter(post => post._id !== action.id)\n            }\n        }\n        case 'rsn/post/ADD_POST_LIKE': {\n            const user: UserItemDataType = {\n                _id: action.user._id,\n                username: action.user.username,\n                firstName: action.user.firstName,\n                lastName: action.user.lastName,\n                avatar: action.user.avatar,\n                subscriptions: action.user.subscriptions\n            }\n            return {\n                ...state,\n                posts: state.posts.map(post => (post._id !== action.postId) ? post : {\n                    ...post,\n                    likes: [...post.likes, user]\n                })\n            }\n        }\n        case 'rsn/post/DELETE_POST_LIKE': {\n            return {\n                ...state,\n                posts: state.posts.map(post => (post._id !== action.postId) ? post : {\n                    ...post,\n                    likes: post.likes.filter(user => user._id !== action.user._id)\n                })\n            }\n        }\n        case 'rsn/post/ADD_POST_COMMENT': {\n            return {\n                ...state,\n                posts: state.posts.map(post => (post._id !== action.postId) ? post : {\n                    ...post,\n                    comments: [...post.comments, action.comment]\n                })\n            }\n        }\n        case 'rsn/post/DELETE_POST_COMMENT': {\n            return {\n                ...state,\n                posts: state.posts.map(post => (!post.comments.map(comment => comment._id).includes(action.commentId)) ?\n                    post :\n                    {...post, comments: post.comments.filter(comment => comment._id !== action.commentId)}\n                )\n            }\n        }\n        default: {\n            return state\n        }\n    }\n}\nexport default reducer\n\nexport const postsActions = {\n    setPosts: (posts: Array<PostType>) => ({type: 'rsn/post/SET_POSTS', posts} as const),\n    addPost: (post: PostType) => ({type: 'rsn/post/ADD_POST', post} as const),\n    deletePost: (id: string) => ({type: 'rsn/post/DELETE_POST', id} as const),\n    setAddPostPending: (isPending: boolean) => ({type: 'rsn/post/SET_ADD_POST_PENDING', isPending} as const),\n    addPostLike: (postId: string, user: AuthUserDataType) => ({type: 'rsn/post/ADD_POST_LIKE', postId, user} as const),\n    deletePostLike: (postId: string, user: AuthUserDataType) => ({\n        type: 'rsn/post/DELETE_POST_LIKE',\n        postId,\n        user\n    } as const),\n    addPostComment: (postId: string, comment: CommentType) => ({\n        type: 'rsn/post/ADD_POST_COMMENT',\n        postId,\n        comment\n    } as const),\n    deletePostComment: (commentId: string) => ({type: 'rsn/post/DELETE_POST_COMMENT', commentId} as const)\n}\nexport type PostsActionType = ReturnType<InferActionsTypes<typeof postsActions>>\n\nexport const getPost = (postId: string): ThunkType<PostsActionType> => async (dispatch) => {\n    const res = await postApi.getPost(postId)\n    if (res.resultCode === ResultCodes.success) {\n        dispatch(postsActions.setPosts([res.data.post]))\n    }\n    if (res.resultCode === ResultCodes.error) {\n        console.log(res)\n    }\n}\n\nexport const getFeedPosts = (): ThunkType<PostsActionType> => async (dispatch) => {\n    const res = await postApi.getFeed()\n    if (res.resultCode === ResultCodes.success) {\n        dispatch(postsActions.setPosts(res.data.posts))\n    }\n    if (res.resultCode === ResultCodes.error) {\n        console.log(res)\n    }\n}\n\nexport const getUserPosts = (username: string): ThunkType<PostsActionType> => async (dispatch) => {\n    const res = await postApi.getUserPosts(username)\n\n    if (res.resultCode === ResultCodes.success) {\n        dispatch(postsActions.setPosts(res.data.posts))\n    }\n    if (res.resultCode === ResultCodes.error) {\n        console.log(res)\n    }\n}\nexport const addPost = (text: string): ThunkType<PostsActionType | AuthActionType> => async (dispatch) => {\n    dispatch(postsActions.setAddPostPending(true))\n    const res = await postApi.addPost(text)\n    dispatch(postsActions.setAddPostPending(false))\n    if (res.resultCode === ResultCodes.success) {\n        console.log(res)\n        dispatch(postsActions.addPost(res.data.post))\n    }\n    if (res.resultCode === ResultCodes.authError) {\n        dispatch(authActions.clearUser())\n    }\n    if (res.resultCode === ResultCodes.error) {\n        console.log(res)\n    }\n}\nexport const deletePost = (id: string): ThunkType<PostsActionType> => async (dispatch) => {\n    const res = await postApi.deletePost(id)\n    if (res.resultCode === ResultCodes.success) {\n        dispatch(postsActions.deletePost(id))\n    }\n    if (res.resultCode === ResultCodes.error) {\n        console.log(res)\n    }\n}\n\nexport const addPostLike = (id: string): ThunkType<PostsActionType> => async (dispatch, getState) => {\n    const user = getState().auth.user\n    const res = await postApi.addLike(id)\n    if ((res.resultCode === ResultCodes.success) && user) {\n        dispatch(postsActions.addPostLike(id, user))\n    }\n    if (res.resultCode === ResultCodes.error) {\n        console.log(res)\n    }\n}\n\nexport const deletePostLike = (id: string): ThunkType<PostsActionType> => async (dispatch, getState) => {\n    const user = getState().auth.user\n    const res = await postApi.deleteLike(id)\n    if ((res.resultCode === ResultCodes.success) && user) {\n        dispatch(postsActions.deletePostLike(id, user))\n    }\n    if (res.resultCode === ResultCodes.error) {\n        console.log(res)\n    }\n}\n\nexport const addPostComment = (postId: string, text: string): ThunkType<PostsActionType> => async (dispatch, getState) => {\n    const user = getState().auth.user\n    const res = await postApi.addPostComment(postId, text)\n    if ((res.resultCode === ResultCodes.success) && user) {\n        dispatch(postsActions.addPostComment(postId, res.data.comment))\n    }\n    if (res.resultCode === ResultCodes.error) {\n        console.log(res)\n    }\n}\n\nexport const deletePostComment = (commentId: string): ThunkType<PostsActionType> => async (dispatch) => {\n    const res = await postApi.deletePostComment(commentId)\n    if ((res.resultCode === ResultCodes.success)) {\n        dispatch(postsActions.deletePostComment(commentId))\n    }\n    if (res.resultCode === ResultCodes.error) {\n        console.log(res)\n    }\n}","import React from 'react'\nimport {Controller, RegisterOptions} from 'react-hook-form'\nimport classes from './InputPassword.module.scss'\nimport {Control} from 'react-hook-form/dist/types/form'\nimport {Item} from 'components/_shared/Form/Form'\n\ntype InputPasswordPropsType = {\n    name: string,\n    label?: string,\n    rules?: RegisterOptions,\n    control?: Control,\n    disabled?: boolean\n}\nexport const InputPassword: React.FC<InputPasswordPropsType> = ({\n                                                                    name,\n                                                                    label,\n                                                                    rules,\n                                                                    control,\n                                                                    disabled = false\n                                                                }) => {\n    return <Controller\n        control={control}\n        name={name}\n        rules={rules}\n        render={({field, fieldState}) => <Item label={label} required={!!rules?.required} error={fieldState.error}\n                                               disabled={disabled}>\n            <input\n                type={'password'}\n                className={`${classes.input} ${fieldState.error ? classes.error : ''}`}\n                name={field.name}\n                value={field.value}\n                onChange={field.onChange}\n                disabled={disabled}\n            />\n        </Item>}\n    />\n}","import {AvatarType, ContactsType, FormDataType, LocationType, UserDataType} from '../types/types'\nimport {coreApi, handleError, handleResponse} from './core.api'\n\n// used for getting and updating user profile\nexport type EditProfileDataType = {\n    firstName: string,\n    lastName: string,\n    birthDate: string | null,\n    bio: string | null,\n    contacts: ContactsType | null,\n    location: LocationType | null,\n}\n\nexport const profileApi = {\n    getProfile: (username: string) => coreApi\n        .get(`/profile/${username}`)\n        .then(handleResponse<{ user: UserDataType }>())\n        .catch(handleError()),\n\n    updateProfile: (profileData: EditProfileDataType) => coreApi\n        .put('/profile', {...profileData})\n        .then(handleResponse())\n        .catch(handleError()),\n\n    updateAvatar: (formData: FormDataType) => coreApi\n        .put('/profile/avatar', formData)\n        .then(handleResponse<{ avatar: AvatarType }>())\n        .catch(handleError()),\n\n    updateCoverImage: (formData: FormDataType) => coreApi\n        .put('/profile/cover', formData)\n        .then(handleResponse<{ coverImage: string }>())\n        .catch(handleError()),\n\n    updateStatus: (status: string) => coreApi\n        .put('/profile/status', { status })\n        .then(handleResponse())\n        .catch(handleError())\n}","import {AvatarType, FormDataType, PostType, UserDataType} from '../../types/types'\nimport {profileApi, EditProfileDataType} from '../../api/profile.api'\nimport {ResultCodes} from '../../api/core.api'\nimport {InferActionsTypes, ThunkType} from '../store'\n\n// INITIAL STATE\nconst initialState = {\n    user: {} as UserDataType,\n    posts: [] as Array<PostType>,\n    isAddPostPending: false as boolean\n}\nexport type ProfileStateType = typeof initialState\n\n// REDUCER\nconst reducer = (state: ProfileStateType = initialState, action: ProfileActionType): ProfileStateType => {\n    switch (action.type) {\n        case 'rsn/profile/SET_PROFILE': {\n            return {\n                ...state,\n                user: {\n                    ...state.user,\n                    ...action.userProfileData,\n                },\n            }\n        }\n        case 'rsn/profile/UPDATE_PROFILE': {\n            return {\n                ...state,\n                user: {\n                    ...state.user,\n                    firstName: action.userProfileData.firstName,\n                    lastName: action.userProfileData.lastName,\n                    bio: action.userProfileData.bio,\n                    birthDate: action.userProfileData.birthDate,\n                    location: {\n                        ...state.user.location,\n                        ...action.userProfileData.location\n                    },\n                    contacts: {\n                        ...state.user.contacts,\n                        ...action.userProfileData.contacts\n                    }\n                }\n            }\n        }\n        case 'rsn/profile/SET_AVATAR': {\n            return {\n                ...state,\n                user: {\n                    ...state.user,\n                    avatar: {...state.user.avatar, ...action.avatar}\n                },\n                // post: state.post.map(post => ({...post, author: {...post.author, avatar: action.avatar}}))\n            }\n        }\n        case 'rsn/profile/SET_COVER_IMAGE': {\n            return {\n                ...state,\n                user: {\n                    ...state.user,\n                    coverImage: action.coverImage\n                }\n            }\n        }\n        case 'rsn/profile/SET_STATUS': {\n            return {\n                ...state,\n                user: {\n                    ...state.user,\n                    status: action.status\n                }\n            }\n        }\n        default: {\n            return state\n        }\n    }\n}\nexport default reducer\n\n//regions ACTION CREATORS\nexport const profileActions = {\n    setProfile: (userProfileData: UserDataType) => ({type: 'rsn/profile/SET_PROFILE', userProfileData} as const),\n    updateProfile: (userProfileData: EditProfileDataType) => ({type: 'rsn/profile/UPDATE_PROFILE', userProfileData} as const),\n    setAvatar: (avatar: AvatarType) => ({type: 'rsn/profile/SET_AVATAR', avatar} as const),\n    setCoverImage: (coverImage: string) => ({type: 'rsn/profile/SET_COVER_IMAGE', coverImage} as const),\n    setStatus: (status: string) => ({type: 'rsn/profile/SET_STATUS', status} as const)\n}\nexport type ProfileActionType = ReturnType<InferActionsTypes<typeof profileActions>>\n//endregion\n\n//region THUNK CREATORS\nexport const getUserData = (username: string): ThunkType<ProfileActionType> => async (dispatch) => {\n    const res = await profileApi.getProfile(username)\n\n    if (res.resultCode === ResultCodes.success) {\n        dispatch(profileActions.setProfile(res.data.user))\n    }\n    if (res.resultCode === ResultCodes.error) {\n        console.log(res)\n    }\n}\n\nexport const updateStatus = (status: string): ThunkType<ProfileActionType> => async (dispatch) => {\n    const res = await profileApi.updateStatus(status)\n\n    if (res.resultCode === ResultCodes.success) {\n        dispatch(profileActions.setStatus(status))\n    }\n    if (res.resultCode === ResultCodes.error) {\n        console.log(res)\n    }\n}\n\nexport const updateProfile = (profileData: EditProfileDataType): ThunkType<ProfileActionType> => async (dispatch) => {\n    const res = await profileApi.updateProfile(profileData)\n\n    if (res.resultCode === ResultCodes.success) {\n        dispatch(profileActions.updateProfile(profileData))\n    }\n    if (res.resultCode === ResultCodes.error) {\n        console.log(res)\n    }\n}\n\nexport const updateAvatar = (formData: FormDataType): ThunkType<ProfileActionType> => async (dispatch) => {\n    const res = await profileApi.updateAvatar(formData)\n    if (res.resultCode === ResultCodes.success) {\n        dispatch(profileActions.setAvatar(res.data.avatar))\n    }\n    if (res.resultCode === ResultCodes.error) {\n        console.log(res)\n    }\n}\n\nexport const updateCoverImage = (formData: FormDataType): ThunkType<ProfileActionType> => async (dispatch) => {\n    const res = await profileApi.updateCoverImage(formData)\n    if (res.resultCode === ResultCodes.success) {\n        dispatch(profileActions.setCoverImage(res.data.coverImage))\n    }\n    if (res.resultCode === ResultCodes.error) {\n        console.log(res)\n    }\n}\n\n\n\n//endregion"],"sourceRoot":""}