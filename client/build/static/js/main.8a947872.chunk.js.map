{"version":3,"sources":["components/_shared/Input/InputFile/InputFile.tsx","components/_forms/LoginForm.tsx","components/_shared/Input/InputCheckbox/InputCheckbox.tsx","api/user.api.ts","redux/reducers/users.reducer.ts","components/_shared/Input/InputImageCrop/InputImageCrop.tsx","components/_forms/ImageUploadForm/ImageUploadForm.tsx","components/_shared/Logo/Logo.module.scss","components/_shared/Card/Card.module.scss","components/Layout/SideBar/SidebarNavigation/SidebarNavigation.module.scss","assets/styles/breakpoints.module.scss","components/_shared/Form/Form.tsx","components/_shared/Button/Button.module.scss","redux/reducers/app.reducer.ts","components/Layout/Header/UserControl/UserControl.tsx","assets/images/logo.svg","components/_shared/Logo/Logo.tsx","components/Layout/Header/Header.tsx","components/Layout/SideBar/SidebarNavigation/SidebarNavigation.tsx","components/Layout/SideBar/SidebarSubscriptions/SidebarSubscriptions.tsx","components/Layout/BottomNavigation/BottomNavigation.tsx","components/Layout/Layout.tsx","components/_pages/HomePage.tsx","components/App.tsx","reportWebVitals.js","redux/store.ts","index.js","redux/reducers/auth.reducer.ts","components/_shared/Form/Form.module.scss","api/core.api.ts","components/_shared/Avatar/Avatar.module.scss","api/socket.api.ts","api/dialog.api.ts","redux/reducers/dialogs.reducer.ts","components/_shared/Flex/Flex.module.scss","assets/styles/colors.module.scss","components/Layout/Layout.module.scss","api/auth.api.ts","components/Layout/BottomNavigation/BottomNavigation.module.scss","components/_shared/Card/Card.tsx","components/_shared/Avatar/Avatar.tsx","assets/images/avatar-default.jpg","components/_shared/Flex/Flex.tsx","components/_shared/Spinner/Spinner.tsx","components/Layout/Header/UserControl/UserControl.module.scss","components/_shared/Input/InputFile/InputFile.module.scss","components/_shared/ModalWindow/ModalWindow.module.scss","components/Layout/SideBar/SidebarSubscriptions/SidebarSubscriptions.module.scss","utils/hooks.ts","assets/styles/sizes.module.scss","components/Layout/Header/Header.module.scss","components/_shared/Spinner/Spinner.module.scss","components/_shared/Input/InputImageCrop/InputImageCrop.module.scss","components/_shared/Input/InputText/InputText.module.scss","components/_shared/Button/Button.tsx","components/_shared/Input/InputPassword/InputPassword.module.scss","components/_shared/Input/InputCheckbox/InputCheckbox.module.scss","utils/functions.ts","api/post.api.ts","redux/reducers/posts.reducer.ts","components/_shared/Input/InputText/InputText.tsx","components/_shared/ModalWindow/ModalWindow.tsx","components/_shared/Input/InputPassword/InputPassword.tsx","api/profile.api.ts","redux/reducers/profile.reducer.ts"],"names":["CustomInputFile","onChange","onDrop","useCallback","acceptedFiles","useDropzone","getRootProps","getInputProps","isDragActive","className","classes","inputFile","dragActive","inputFileBox","InputFile","name","label","rules","control","disabled","render","field","fieldState","required","error","file","LoginForm","onSubmit","errors","type","size","Text","LoginFormContainer","useSelector","state","auth","loginErrors","dispatch","useDispatch","loginFormData","login","InputCheckbox","labelPosition","checkbox","onBlur","box","userApi","coreApi","get","then","handleResponse","catch","handleError","userId","post","delete","initialState","users","subscribePendingUserIds","usersReducer","action","filter","usersActions","getUsers","a","res","resultCode","ResultCodes","success","data","console","log","subscribe","getAuthUserData","unsubscribe","InputImageCrop","aspect","srcFileUrl","ImageCrop","useState","zoom","setZoom","x","y","crop","setCrop","imageCrop","cropperContainer","image","showGrid","onCropComplete","croppedArea","croppedAreaPixels","onCropChange","onZoomChange","style","width","min","max","step","value","ImageUploadForm","closeModal","setSrcFileUrl","Form","marginLeft","Button","onClick","window","URL","createObjectURL","gap","e","preventDefault","module","exports","children","initialValues","submitOnBlur","submitOnEnter","resetAfterSubmit","useForm","defaultValues","mode","handleSubmit","reset","setError","watch","setValue","formError","setFormError","useEffect","find","forEach","message","childrenWithProps","React","Children","map","child","isValidElement","cloneElement","submit","wrapper","onKeyDown","key","ctrlKey","elementName","target","elementValue","FormRow","FormSection","height","classnames","section","align","row","Item","item","labelRequired","labelText","formItemError","initialized","appActions","UserControl","props","isOpened","setIsOpened","addEventListener","userControl","to","username","Avatar","smallImg","avatar","online","userControlDropdown","userControlUsername","stopPropagation","userControlList","logout","Logo","logo","src","alt","Header","header","authorized","List","SidebarNavigation","unreadMessagesCount","dialogs","Card","Navigation","Icon","Badge","SidebarSubscriptions","subscriptions","sidebarFriends","Title","Avatars","length","sub","small","checkOnline","updatedAt","firstName","_id","Link","BottomNavigation","color","colors","textLight","Layout","sidebar","background","authUserName","authUserAvatar","onLogout","tablet","useBreakpoint","layout","padding","Container","container","AppBar","appBar","Main","main","Content","content","Sidebar","LayoutContainer","authUserSubscriptions","user","HomePage","useAuthCheck","RegistrationPage","lazy","LoginPage","ProfilePage","UsersPage","DialogsPage","PostPage","FeedPage","TestPage","FormTestPage","App","fallback","path","exact","component","AppSpinner","display","justifyContent","alignItems","Spinner","thickness","AppContainer","app","Promise","all","startMessagesListening","stopMessagesListening","fullscreen","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","rootReducer","combineReducers","authReducer","profile","profileReducer","posts","postsReducer","dialogsReducer","store","createStore","applyMiddleware","thunkMiddleware","s","ReactDOM","document","getElementById","registrationErrors","registrationSuccessful","authActions","setUser","clearUser","setRegistrationSuccessful","setRegistrationErrors","setLoginErrors","authApi","me","expiredToken","register","registrationData","process","axios","create","baseURL","withCredentials","err","response","serverMessageSubscribers","unreadMessagesSubscribers","notAuthorizedSubscribers","authorizedSubscribers","connectSubscribers","socket","io","autoConnect","reconnection","on","serverMessageResponse","unreadMessagesResponse","socketApi","connected","connect","disconnect","connectCallback","serverMessageCallback","unreadMessagesCallback","notAuthorizedCallback","authorizedCallback","push","dialogId","emit","dialogApi","messageId","patch","currentDialogId","messages","cachedMessage","dialog","updated","date","isRead","text","dialogsActions","connectHandlerCreator","getState","sendMessage","messageHandlerCreator","unreadMessagesHandlerCreator","notAuthorizedHandlerCreator","refreshToken","authorizedHandlerCreator","getDialogs","openDialog","closeDialog","readMessage","loginData","interceptors","use","originalConfig","config","status","_retry","reject","maxWidth","ref","largeImg","border","shadow","onEdit","zoomable","editable","modalActive","setModalActive","onZoomClick","undefined","photo","onLineIndicator","img","open","onClose","AvatarModalWindow","editMode","setEditMode","closeHandler","ModalWindow","horizontalAlign","marginTop","cropArea","AvatarButton","buttons","icon","Row","verticalAlign","bordered","Array","index","marginRight","col","Col","stretch","flex","marginBottom","Space","space","borderWidth","borderLeftColor","borderBottomColor","borderRightColor","spinner","setWidth","updateDimensions","innerWidth","breakpointsObject","Object","entries","breakpoints","Number","parseInt","getWindowDimensions","innerHeight","useWindowDimensions","windowDimensions","setWindowDimensions","handleResize","removeEventListener","button","primary","secondary","neutral","cancel","link","buttonSpinner","contentIcon","contentText","spinnerColor","fontLight","fontDark","spinnerSizes","sm","sizes","btnSmall","md","btnMedium","lg","btnLarge","spinnerSize","badge","formatDate","format","moment","lastSeenDate","currentDate","Date","getTime","trimString","slice","postApi","postId","id","commentId","isAddPostPending","postsActions","reducer","isPending","lastName","now","toString","likes","comments","comment","includes","getPost","getFeedPosts","getUserPosts","addPost","authError","deletePost","addPostLike","deletePostLike","addPostComment","deletePostComment","InputText","autoFocus","placeholder","input","title","close","modal","nested","contentStyle","borderRadius","closeOnDocumentClick","InputPassword","profileApi","profileData","put","formData","profileActions","userProfileData","bio","birthDate","location","contacts","coverImage","getUserData","updateStatus","updateProfile","updateAvatar","updateCoverImage"],"mappings":"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","file":"static/js/main.8a947872.chunk.js","sourcesContent":["import {Controller, RegisterOptions} from 'react-hook-form'\r\nimport {Control} from 'react-hook-form/dist/types/form'\r\nimport React, {useCallback} from 'react'\r\nimport {useDropzone} from 'react-dropzone'\r\nimport classes from './InputFile.module.scss'\r\nimport {Item} from 'components/_shared/Form/Form'\r\n\r\nexport const CustomInputFile: React.FC<{ onChange: (file: File) => void }> = (({\r\n                                                                                   onChange\r\n                                                                               }) => {\r\n    const onDrop = useCallback(acceptedFiles => {\r\n        onChange && onChange(acceptedFiles[0])\r\n    }, [onChange])\r\n    const {getRootProps, getInputProps, isDragActive} = useDropzone({onDrop})\r\n\r\n    return (\r\n        <div className={classes.inputFile + (isDragActive ? ' ' + classes.dragActive : '')} {...getRootProps()}>\r\n            <input {...getInputProps()}/>\r\n            {\r\n                isDragActive ?\r\n                    <span className={classes.inputFileBox}>Drop your files here...</span> :\r\n                    <span className={classes.inputFileBox}>Drop your files here or click to select files</span>\r\n            }\r\n        </div>\r\n    )\r\n})\r\ntype InputFilePropsType = {\r\n    name: string,\r\n    label?: string,\r\n    rules?: RegisterOptions,\r\n    control?: Control,\r\n    rows?: number,\r\n    disabled?: boolean,\r\n    onChange?: (file: File) => void\r\n}\r\nexport const InputFile: React.FC<InputFilePropsType> = ({\r\n                                                            name,\r\n                                                            label,\r\n                                                            rules,\r\n                                                            control,\r\n                                                            disabled = false,\r\n                                                            onChange\r\n                                                        }) => {\r\n    return <Controller\r\n        control={control}\r\n        name={name}\r\n        rules={rules}\r\n        render={({field, fieldState}) => {\r\n            const handleChange = (file: File) => {\r\n                onChange && onChange(file)\r\n                field.onChange(file)\r\n            }\r\n            return <Item label={label} required={!!rules?.required} error={fieldState.error}\r\n                         disabled={disabled}>\r\n                <CustomInputFile onChange={handleChange}/>\r\n            </Item>\r\n        }}\r\n    />\r\n}","import React from 'react'\r\nimport {login} from 'redux/reducers/auth.reducer'\r\nimport {LoginDataType} from 'api/auth.api'\r\nimport {useDispatch, useSelector} from 'react-redux'\r\nimport {ThunkDispatch} from 'redux-thunk'\r\nimport {StateType} from 'redux/store'\r\nimport {AuthActionType} from 'redux/reducers/auth.reducer'\r\nimport {Button} from 'components/_shared/Button/Button'\r\nimport {Form, FormRow} from 'components/_shared/Form/Form'\r\nimport {InputText} from 'components/_shared/Input/InputText/InputText'\r\nimport {InputPassword} from 'components/_shared/Input/InputPassword/InputPassword'\r\nimport {InputCheckbox} from 'components/_shared/Input/InputCheckbox/InputCheckbox'\r\nimport {ServerValidationErrorType} from 'types/types'\r\n\r\ntype PropsType = {\r\n    onSubmit: (loginFormData: LoginDataType) => void\r\n    errors?: Array<ServerValidationErrorType>\r\n}\r\n\r\nconst LoginForm: React.FC<PropsType> = ({onSubmit, errors}) => {\r\n    return (\r\n        <Form onSubmit={onSubmit} errors={errors}>\r\n            <FormRow>\r\n                <InputText name={'email'} label={'E-mail'} rules={{required: true}}/>\r\n            </FormRow>\r\n            <FormRow>\r\n                <InputPassword name={'password'} label={'Password'} rules={{required: true}}/>\r\n            </FormRow>\r\n            <FormRow>\r\n                <InputCheckbox name={'rememberMe'} label={'Remember me'}/>\r\n            </FormRow>\r\n            <FormRow>\r\n                <Button type='primary' size='lg'>\r\n                    <Button.Text>Log in</Button.Text>\r\n                </Button>\r\n            </FormRow>\r\n        </Form>\r\n    )\r\n}\r\n\r\n\r\nconst LoginFormContainer: React.FC = () => {\r\n    const errors = useSelector((state: StateType) => state.auth.loginErrors)\r\n    const dispatch: ThunkDispatch<StateType, LoginDataType, AuthActionType> = useDispatch()\r\n\r\n    const onSubmit = (loginFormData: LoginDataType) => {\r\n        dispatch(login(loginFormData))\r\n    }\r\n\r\n    return <LoginForm onSubmit={onSubmit} errors={errors}/>\r\n}\r\n\r\nexport default LoginFormContainer\r\n","import {Controller, RegisterOptions} from 'react-hook-form'\r\nimport {Control} from 'react-hook-form/dist/types/form'\r\nimport React from 'react'\r\nimport classes from './InputCheckbox.module.scss'\r\nimport {Item} from 'components/_shared/Form/Form'\r\n\r\ntype CheckboxPropsType = {\r\n    name: string,\r\n    label?: string,\r\n    rules?: RegisterOptions,\r\n    control?: Control,\r\n    rows?: number,\r\n    disabled?: boolean\r\n}\r\n\r\nexport const InputCheckbox: React.FC<CheckboxPropsType> = ({\r\n                                                          name,\r\n                                                          label,\r\n                                                          rules,\r\n                                                          control,\r\n                                                          disabled = false\r\n                                                      }) => {\r\n    return <Controller\r\n        control={control}\r\n        name={name}\r\n        rules={rules}\r\n        render={({field, fieldState}) => <Item label={label} required={!!rules?.required} error={fieldState.error}\r\n                                               labelPosition='right' disabled={disabled}>\r\n            <div className={classes.checkbox}>\r\n                <input\r\n                    type=\"checkbox\"\r\n                    name={name}\r\n                    onChange={field.onChange}\r\n                    onBlur={field.onBlur}\r\n                    disabled={disabled}\r\n                />\r\n                <span className={classes.box}/>\r\n            </div>\r\n        </Item>}\r\n    />\r\n}","import {coreApi, handleError, handleResponse} from './core.api'\r\nimport {UserItemDataType} from '../types/types'\r\n\r\n// GET /users/\r\n// used for getting users list on users page\r\nexport type UsersDataType = {\r\n    users: Array<UserItemDataType>\r\n}\r\n\r\nexport const userApi = {\r\n    getUsers: () => coreApi\r\n        .get('/user')\r\n        .then(handleResponse<UsersDataType>())\r\n        .catch(handleError()),\r\n    subscribe: (userId: string) => coreApi\r\n        .post(`/subscription/${userId}`)\r\n        .then(handleResponse())\r\n        .catch(handleError()),\r\n    unsubscribe: (userId: string) => coreApi\r\n        .delete(`/subscription/${userId}`)\r\n        .then(handleResponse())\r\n        .catch(handleError())\r\n}","import {UserItemDataType} from 'types/types'\r\nimport {userApi} from 'api/user.api'\r\nimport {ResultCodes} from 'api/core.api'\r\nimport {InferActionsTypes, ThunkType} from '../store'\r\nimport {getAuthUserData} from 'redux/reducers/auth.reducer'\r\n\r\n// INITIAL STATE\r\nconst initialState = {\r\n    users: [] as Array<UserItemDataType>,\r\n    subscribePendingUserIds: [] as Array<string>\r\n}\r\nexport type UsersStateType = typeof initialState\r\n\r\n// REDUCER\r\nexport const usersReducer = (state: UsersStateType = initialState, action: UsersActionType): UsersStateType => {\r\n    switch (action.type) {\r\n        case 'rsn/users/SET_USERS': {\r\n            return {\r\n                ...state,\r\n                users: action.users\r\n            }\r\n        }\r\n        case 'rsn/users/ADD_SUBSCRIBE_PENDING_USER_ID': {\r\n            return {\r\n                ...state,\r\n                subscribePendingUserIds: [...state.subscribePendingUserIds, action.userId]\r\n            }\r\n        }\r\n        case 'rsn/users/DELETE_SUBSCRIBE_PENDING_USER_ID': {\r\n            return {\r\n                ...state,\r\n                subscribePendingUserIds: state.subscribePendingUserIds.filter(userId => userId !== action.userId)\r\n            }\r\n        }\r\n        default: {\r\n            return state\r\n        }\r\n    }\r\n}\r\n\r\n//region ACTION CREATORS\r\nexport const usersActions = {\r\n    setUsers: (users: Array<UserItemDataType>) => ({type: 'rsn/users/SET_USERS', users} as const),\r\n    addSubscribePendingUserId: (userId: string) => ({type: 'rsn/users/ADD_SUBSCRIBE_PENDING_USER_ID', userId} as const),\r\n    deleteSubscribePendingUserId: (userId: string) => ({type: 'rsn/users/DELETE_SUBSCRIBE_PENDING_USER_ID', userId} as const)\r\n}\r\nexport type UsersActionType = ReturnType<InferActionsTypes<typeof usersActions>>\r\n//endregion\r\n\r\n//region THUNK CREATORS\r\nexport const getUsers = (): ThunkType<UsersActionType> => async (dispatch) => {\r\n    const res = await userApi.getUsers()\r\n    if (res.resultCode === ResultCodes.success) {\r\n        dispatch(usersActions.setUsers(res.data.users))\r\n    }\r\n    if (res.resultCode === ResultCodes.error) {\r\n        console.log(res)\r\n    }\r\n}\r\n\r\nexport const subscribe = (userId: string): ThunkType<UsersActionType> => async (dispatch) => {\r\n    dispatch(usersActions.addSubscribePendingUserId(userId))\r\n    const res = await userApi.subscribe(userId)\r\n    dispatch(usersActions.deleteSubscribePendingUserId(userId))\r\n    if (res.resultCode === ResultCodes.success) {\r\n        dispatch(getAuthUserData())\r\n    }\r\n    if (res.resultCode === ResultCodes.error) {\r\n        console.log(res)\r\n    }\r\n}\r\n\r\nexport const unsubscribe = (userId: string): ThunkType<UsersActionType> => async (dispatch) => {\r\n    dispatch(usersActions.addSubscribePendingUserId(userId))\r\n    const res = await userApi.unsubscribe(userId)\r\n    dispatch(usersActions.deleteSubscribePendingUserId(userId))\r\n    if (res.resultCode === ResultCodes.success) {\r\n        dispatch(getAuthUserData())\r\n    }\r\n    if (res.resultCode === ResultCodes.error) {\r\n        console.log(res)\r\n    }\r\n}\r\n//endregion","import React, {useState} from 'react'\r\nimport {Controller, RegisterOptions} from 'react-hook-form'\r\nimport {Area, Point} from 'react-easy-crop/types'\r\nimport {Control} from 'react-hook-form/dist/types/form'\r\nimport classes from './InputImageCrop.module.scss'\r\nimport Cropper from 'react-easy-crop'\r\nimport Slider from 'rc-slider'\r\nimport 'rc-slider/assets/index.css';\r\nimport {Item} from 'components/_shared/Form/Form'\r\n\r\ntype InputImageCropPropsType = {\r\n    name: string,\r\n    label?: string,\r\n    rules?: RegisterOptions,\r\n    control?: Control,\r\n    aspect?: number,\r\n    srcFileUrl: string\r\n    disabled?: boolean,\r\n    onChange?: (crop: Area) => void\r\n}\r\nexport const InputImageCrop: React.FC<InputImageCropPropsType> = ({\r\n                                                                      name,\r\n                                                                      label,\r\n                                                                      rules,\r\n                                                                      control,\r\n                                                                      disabled = false,\r\n                                                                      onChange,\r\n                                                                      aspect = 1,\r\n                                                                      srcFileUrl\r\n                                                                  }) => {\r\n    return <Controller\r\n        control={control}\r\n        name={name}\r\n        rules={rules}\r\n        render={({field, fieldState}) => {\r\n            return <Item label={label} required={!!rules?.required} error={fieldState.error}\r\n                         disabled={disabled}>\r\n                <ImageCrop aspect={aspect} srcFileUrl={srcFileUrl}\r\n                           onChange={field.onChange}/>\r\n            </Item>\r\n        }}\r\n    />\r\n}\r\ntype ImageCropPropsType = {\r\n    aspect: number\r\n    srcFileUrl?: string\r\n    onChange?: (value: Area) => void\r\n}\r\nconst ImageCrop: React.FC<ImageCropPropsType> = ({aspect, srcFileUrl, onChange}) => {\r\n    const [zoom, setZoom] = useState<number>(1)\r\n    const [crop, setCrop] = useState<Point>({\r\n        x: 0,\r\n        y: 0\r\n    } as Point)\r\n\r\n    const onCropComplete = (croppedArea: Area, croppedAreaPixels: Area) => {\r\n        onChange && onChange(croppedAreaPixels)\r\n    }\r\n\r\n    const sliderChangeHandler = (value: number) => {\r\n        setZoom(value)\r\n    }\r\n    return (\r\n        <div className={classes.imageCrop}>\r\n            <div className={classes.cropperContainer}>\r\n                {srcFileUrl && <Cropper\r\n                    image={srcFileUrl}\r\n                    crop={crop}\r\n                    zoom={zoom}\r\n                    showGrid={false}\r\n                    aspect={aspect}\r\n                    onCropComplete={onCropComplete}\r\n                    onCropChange={setCrop}\r\n                    onZoomChange={setZoom}\r\n                />}\r\n            </div>\r\n            <div style={{width: '100%'}}>\r\n                Use this slider to zoom your image\r\n                <Slider\r\n                    min={1}\r\n                    max={3}\r\n                    step={0.01}\r\n                    value={zoom}\r\n                    onChange={sliderChangeHandler}\r\n                />\r\n            </div>\r\n        </div>\r\n    )\r\n}","import React, {useState} from 'react'\r\nimport {Area} from 'react-easy-crop/types'\r\nimport {Button} from 'components/_shared/Button/Button'\r\nimport {Form, FormRow} from 'components/_shared/Form/Form'\r\nimport {InputFile} from 'components/_shared/Input/InputFile/InputFile'\r\nimport {InputImageCrop} from 'components/_shared/Input/InputImageCrop/InputImageCrop'\r\nimport {Row} from 'components/_shared/Flex/Flex'\r\n\r\n\r\ntype PropsType = {\r\n    aspect: number\r\n    onSubmit: (image: File, cropArea: Area) => void\r\n    closeModal?: () => void\r\n}\r\n\r\nconst ImageUploadForm: React.FC<PropsType> = ({aspect, onSubmit, closeModal}) => {\r\n    const [srcFileUrl, setSrcFileUrl] = useState<string | null>(null)\r\n\r\n    const fileChangeHandler = (file: File) => {\r\n        setSrcFileUrl(window.URL.createObjectURL(file))\r\n    }\r\n\r\n    const submit = (data: { file: File, crop: Area }) => {\r\n        onSubmit(data.file, data.crop)\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <Form onSubmit={submit}>\r\n                <FormRow>\r\n                    <div style={{marginLeft: 'auto'}}>\r\n                        {closeModal && <Button type={'cancel'} size='lg' onClick={closeModal}>\r\n                            <Button.Text>Close</Button.Text>\r\n                        </Button>}\r\n                    </div>\r\n                </FormRow>\r\n\r\n                {!srcFileUrl && <FormRow>\r\n                    <InputFile\r\n                        name={'file'}\r\n                        label={'Drop your files in the area below'}\r\n                        rules={{required: true}}\r\n                        onChange={fileChangeHandler}\r\n                    />\r\n                </FormRow>}\r\n\r\n                {srcFileUrl && <FormRow>\r\n                    <InputImageCrop\r\n                        name={'crop'}\r\n                        aspect={aspect}\r\n                        srcFileUrl={srcFileUrl}\r\n                    />\r\n                </FormRow>}\r\n\r\n                <Row gap={10}>\r\n                    {!!srcFileUrl && <Button size=\"lg\">\r\n                        <Button.Text>\r\n                            Save\r\n                        </Button.Text>\r\n                    </Button>}\r\n                    {!!srcFileUrl && <Button type='secondary' size=\"lg\" onClick={(e) => {\r\n                        e.preventDefault()\r\n                        setSrcFileUrl(null)}}\r\n                    >\r\n                        <Button.Text>Choose other image</Button.Text>\r\n                    </Button>}\r\n                </Row>\r\n\r\n            </Form>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ImageUploadForm","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dark\":\"Logo_dark__3VTn1\",\"logo\":\"Logo_logo__UYdoF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dark\":\"Card_dark__8GUj6\",\"Card\":\"Card_Card__3m6Ze\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dark\":\"SidebarNavigation_dark__2zbEV\",\"Navigation\":\"SidebarNavigation_Navigation__3RDFd\",\"NavigationTitle\":\"SidebarNavigation_NavigationTitle__2eaY9\",\"NavigationList\":\"SidebarNavigation_NavigationList__TM9dC\",\"NavigationItem\":\"SidebarNavigation_NavigationItem__EcQIr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"phone\":\"400\",\"phoneWide\":\"480\",\"phoneTablet\":\"560\",\"tabletSmall\":\"640\",\"tablet\":\"768\",\"tabletWide\":\"1024\",\"desktop\":\"1248\",\"desktopWide\":\"1440\",\"dark\":\"breakpoints_dark__305np\"};","import React, {useEffect, useState} from 'react'\r\nimport classes from 'components/_shared/Form/Form.module.scss'\r\nimport classnames from 'classnames'\r\nimport {useForm} from 'react-hook-form'\r\nimport {Control} from 'react-hook-form/dist/types/form'\r\nimport {FieldError} from 'react-hook-form/dist/types'\r\nimport {ServerValidationErrorType} from 'types/types'\r\n\r\n\r\ntype FormPropsType = {\r\n    onSubmit: (data: any) => void\r\n    initialValues?: { [key: string]: any }\r\n    errors?: Array<ServerValidationErrorType>\r\n    resetAfterSubmit?: boolean\r\n    submitOnBlur?: boolean\r\n    submitOnEnter?: boolean\r\n}\r\ntype RowPropsType = {\r\n    control?: Control,\r\n    align?: 'fill' | 'left' | 'right' | 'center'\r\n}\r\ntype SectionPropsType = {\r\n    control?: Control,\r\n    height?: number | string,\r\n}\r\ntype ItemPropsType = {\r\n    label?: string,\r\n    labelPosition?: 'top' | 'left' | 'right'\r\n    required?: boolean,\r\n    disabled?: boolean,\r\n    error?: FieldError,\r\n    align?: 'fill' | 'left' | 'right' | 'center'\r\n}\r\nexport const Form: React.FC<FormPropsType> = ({\r\n                                                   onSubmit,\r\n                                                   children,\r\n                                                   initialValues,\r\n                                                  errors= [],\r\n                                                   submitOnBlur = false,\r\n                                                    submitOnEnter = false,\r\n    resetAfterSubmit = false\r\n                                               }) => {\r\n    const {control, handleSubmit, reset, setError, watch, setValue} = useForm({\r\n        defaultValues: {\r\n            ...initialValues\r\n        },\r\n        mode: 'onBlur'\r\n    })\r\n    const [formError, setFormError] = useState<ServerValidationErrorType | null>(null)\r\n    useEffect(() => {\r\n        setFormError(errors.find(error => error.field === 'form') || null)\r\n        errors.forEach(({field, message}) => setError(field, {type: 'server', message}))\r\n    }, [errors, setError])\r\n\r\n    const childrenWithProps = React.Children.map(children, child => {\r\n        if (React.isValidElement(child)) {\r\n            return React.cloneElement(child, {control})\r\n        }\r\n        return child\r\n    })\r\n\r\n    const submit = (data: { [key: string]: any }) => {\r\n        onSubmit(data)\r\n        if (resetAfterSubmit) reset()\r\n    }\r\n\r\n    const onBlurHandler = () => {\r\n        if (submitOnBlur) handleSubmit(submit)()\r\n    }\r\n\r\n    const onKeyDownHandler = (e: any) => {\r\n\r\n        // handle 'Enter' key\r\n        if (e.key === 'Enter') {\r\n            if (submitOnEnter && e.ctrlKey) {\r\n                const elementName = e.target.name\r\n                const elementValue = watch(elementName)\r\n                setValue(elementName, elementValue + '\\n')\r\n            }\r\n\r\n            if (submitOnEnter && !e.ctrlKey) {\r\n                e.preventDefault()\r\n                handleSubmit(submit)()\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    return <form className={classes.wrapper} onSubmit={handleSubmit(submit)} onBlur={onBlurHandler} onKeyDown={onKeyDownHandler}>\r\n        {formError && <FormRow><span className={classes.formError}>{formError.message}</span></FormRow>}\r\n        {childrenWithProps}\r\n    </form>\r\n}\r\n\r\nexport const FormSection: React.FC<SectionPropsType> = ({\r\n                                                    children,\r\n                                                    control,\r\n    height\r\n                                                }) => {\r\n    const childrenWithProps = React.Children.map(children, child => {\r\n        if (React.isValidElement(child)) {\r\n            return React.cloneElement(child, {control})\r\n        }\r\n        return child\r\n    })\r\n\r\n    return <div className={classnames(\r\n        classes.section,\r\n    )} style={{height}}>\r\n        {childrenWithProps}\r\n    </div>\r\n}\r\n\r\nexport const FormRow: React.FC<RowPropsType> = ({\r\n                                                     children,\r\n                                                     control,\r\n                                                     align = 'fill'\r\n                                                 }) => {\r\n    const childrenWithProps = React.Children.map(children, child => {\r\n        if (React.isValidElement(child)) {\r\n            return React.cloneElement(child, {control, align})\r\n        }\r\n        return child\r\n    })\r\n\r\n    return <div className={classnames(\r\n        classes.row,\r\n        {[classes[align]]: align}\r\n    )}>\r\n        {childrenWithProps}\r\n    </div>\r\n}\r\n\r\n\r\n\r\nexport const Item: React.FC<ItemPropsType> = ({\r\n                                                  children,\r\n                                                  label,\r\n                                                  labelPosition = 'top',\r\n                                                  required = false,\r\n                                                  disabled = false,\r\n                                                  error, align = 'fill'\r\n                                              }) => {\r\n    return <label className={classnames(classes.item, {[classes[labelPosition]]: labelPosition})}>\r\n        <div className={classnames(classes.label, {[classes.disabled]: disabled})}>\r\n            {required && <span className={classes.labelRequired}>*</span>}\r\n            <span className={classes.labelText}>{label}</span>\r\n            {error?.type === 'required' && <span className={classes.formItemError}>This field is required</span>}\r\n            {error?.type === 'server' && <span className={classes.formItemError}>{error.message}</span>}\r\n        </div>\r\n        {children}\r\n    </label>\r\n}\r\n\r\n\r\n\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dark\":\"Button_dark__2RGq5\",\"button\":\"Button_button__weADF\",\"sm\":\"Button_sm__13lnr\",\"md\":\"Button_md__1Bgru\",\"lg\":\"Button_lg__2FVH1\",\"xl\":\"Button_xl__1XaK_\",\"spinner\":\"Button_spinner__1U8Il\",\"primary\":\"Button_primary__195PU\",\"secondary\":\"Button_secondary__37cSb\",\"neutral\":\"Button_neutral__1TlXs\",\"text\":\"Button_text__1ZbWk\",\"link\":\"Button_link__2MQ8w\",\"cancel\":\"Button_cancel__2nTg_\",\"content\":\"Button_content__16b-2\",\"contentText\":\"Button_contentText__3AFXE\",\"contentIcon\":\"Button_contentIcon__2zRhF\",\"buttonSpinner\":\"Button_buttonSpinner__2OjyC\",\"badge\":\"Button_badge__1AQCE\"};","import {getAuthUserData} from './auth.reducer'\r\nimport {InferActionsTypes, ThunkType} from '../store'\r\nimport {startMessagesListening, stopMessagesListening} from './dialogs.reducer'\r\n\r\n// INITIAL STATE\r\nconst initialState = {\r\n    initialized: false\r\n}\r\ntype AppStateType = typeof initialState\r\n\r\n// REDUCER\r\nexport const appReducer = (state: AppStateType = initialState, action: AppActionType): AppStateType => {\r\n    switch (action.type) {\r\n        case 'rsn/app/INITIALIZE_APP': {\r\n            return {\r\n                ...state,\r\n                initialized: action.initialized\r\n            }\r\n        }\r\n        default: {\r\n            return state\r\n        }\r\n    }\r\n}\r\n\r\n//region ACTION CREATORS\r\nexport const appActions = {\r\n    setInitialized: (initialized: boolean) => ({type: 'rsn/app/INITIALIZE_APP', initialized} as const)\r\n}\r\nexport type AppActionType = ReturnType<InferActionsTypes<typeof appActions>>\r\n//endregion\r\n\r\n//region THUNK CREATORS\r\nexport const initializeApp = (): ThunkType<AppActionType> => async (dispatch) => {\r\n    await Promise.all([ // put all that needed to be checked to init app inside this array\r\n        dispatch(getAuthUserData()),\r\n        dispatch(startMessagesListening())\r\n    ])\r\n    dispatch(appActions.setInitialized(true))\r\n}\r\n\r\nexport const deinitializeApp = (): ThunkType<AppActionType> => async (dispatch) => {\r\n    dispatch(stopMessagesListening())\r\n    dispatch(appActions.setInitialized(false))\r\n}\r\n//endregion","import React, {useState} from \"react\";\r\nimport {NavLink} from \"react-router-dom\";\r\nimport classes from \"components/Layout/Header/UserControl/UserControl.module.scss\";\r\nimport {Avatar} from \"components/_shared/Avatar/Avatar\";\r\nimport {Button} from 'components/_shared/Button/Button'\r\n\r\ntype PropsType = {\r\n    username?: string\r\n    avatar?: string | null\r\n    logout: () => void\r\n}\r\n\r\nexport const UserControl: React.FC<PropsType> = (props) => {\r\n    const [isOpened, setIsOpened] = useState(false)\r\n\r\n    const clickHandler = (e: React.MouseEvent) => {\r\n        e.stopPropagation()\r\n        setIsOpened(!isOpened)\r\n    }\r\n\r\n    window.addEventListener('click', () => {\r\n        setIsOpened(false)\r\n    })\r\n\r\n    return (\r\n        <div className={classes.userControl}>\r\n            <NavLink to={`/profile/${props.username}`}><Avatar smallImg={props.avatar} online size={30}/></NavLink>\r\n            <div className={classes.userControlDropdown}>\r\n                <button className={classes.userControlUsername} onClick={clickHandler}>{props.username}</button>\r\n                {isOpened && <div className={classes.userControlList}>\r\n                    <ul>\r\n                        <li><NavLink to='/settings'><Button type=\"text\">Settings</Button></NavLink></li>\r\n                        <li><Button type=\"text\" onClick={() => props.logout()}>Logout</Button></li>\r\n                    </ul>\r\n                </div>}\r\n            </div>\r\n        </div>\r\n    )\r\n}","export default __webpack_public_path__ + \"static/media/logo.e4a842eb.svg\";","import React from 'react'\r\nimport {NavLink} from 'react-router-dom'\r\nimport classes from './Logo.module.scss'\r\nimport logo from 'assets/images/logo.svg'\r\n\r\nexport const Logo: React.FC = () => <div className={classes.logo}>\r\n    <NavLink to='/'>\r\n        <img src={logo} alt=\"Bind\"/>\r\n    </NavLink>\r\n</div>","import React from 'react'\r\nimport classes from 'components/Layout/Header/Header.module.scss'\r\nimport {UserControl} from 'components/Layout/Header/UserControl/UserControl'\r\nimport {Logo} from 'components/_shared/Logo/Logo'\r\n\r\ntype PropsType = {\r\n    authorized: boolean\r\n    username?: string\r\n    avatar?: string | null\r\n    logout: () => void\r\n}\r\n\r\nconst Header: React.FC<PropsType> = (props) => {\r\n    return (\r\n        <div className={classes.header}>\r\n            <Logo/>\r\n            {props.authorized && <div className={classes.userControl}>\r\n                <UserControl username={props.username} avatar={props.avatar} logout={props.logout}/>\r\n            </div>}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Header","import {NavLink} from 'react-router-dom'\r\nimport React from 'react'\r\nimport classes from 'components/Layout/SideBar/SidebarNavigation/SidebarNavigation.module.scss'\r\n\r\nimport {Card} from 'components/_shared/Card/Card'\r\nimport {PersonLinesFill, ChatLeftTextFill, PeopleFill, GearWide, HouseDoorFill} from 'react-bootstrap-icons'\r\nimport {Button} from 'components/_shared/Button/Button'\r\nimport {useSelector} from 'react-redux'\r\nimport {StateType} from '../../../../redux/store'\r\n\r\ntype PropsType = {}\r\n\r\nconst SidebarNavigation: React.FC<PropsType> = () => {\r\n    const unreadMessagesCount = useSelector((state: StateType) => state.dialogs.unreadMessagesCount)\r\n\r\n    return (\r\n        <Card>\r\n            <div className={classes.Navigation}>\r\n                <List>\r\n                    <Item to='/feed'>\r\n                        <Button type={'link'} size={'lg'}>\r\n                            <Button.Icon><HouseDoorFill/></Button.Icon>\r\n                            <Button.Text>Feed</Button.Text>\r\n                        </Button>\r\n                    </Item>\r\n                    <Item to='/profile'>\r\n                        <Button type={'link'} size={'lg'}>\r\n                            <Button.Icon><PersonLinesFill/></Button.Icon>\r\n                            <Button.Text>Profile</Button.Text>\r\n                        </Button>\r\n                    </Item>\r\n                    <Item to='/dialogs'>\r\n                        <Button type={'link'} size={'lg'}>\r\n                            <Button.Icon><ChatLeftTextFill/></Button.Icon>\r\n                            <Button.Text>Dialogs</Button.Text>\r\n                            {!!unreadMessagesCount && <Button.Badge>{unreadMessagesCount}</Button.Badge>}\r\n                        </Button>\r\n                    </Item>\r\n                    <Item to='/users'>\r\n                        <Button type={'link'} size={'lg'}>\r\n                            <Button.Icon><PeopleFill/></Button.Icon>\r\n                            <Button.Text>Users</Button.Text>\r\n                        </Button>\r\n                    </Item>\r\n                    <Item to='/settings'>\r\n                        <Button type={'link'} size={'lg'}>\r\n                            <Button.Icon><GearWide/></Button.Icon>\r\n                            <Button.Text>Settings</Button.Text>\r\n                        </Button>\r\n                    </Item>\r\n                </List>\r\n            </div>\r\n        </Card>\r\n    )\r\n}\r\n\r\nconst List: React.FC = ({children}) => {\r\n    return (\r\n        <ul>\r\n            {children}\r\n        </ul>\r\n    )\r\n}\r\n\r\nconst Item: React.FC<{to: string}> = ({to, children}) => {\r\n    return (\r\n        <li>\r\n            <NavLink to={to}>\r\n                {children}\r\n            </NavLink>\r\n        </li>\r\n    )\r\n}\r\n\r\nexport default SidebarNavigation\r\n","import React from 'react'\r\nimport classes from 'components/Layout/SideBar/SidebarSubscriptions/SidebarSubscriptions.module.scss'\r\nimport {Card} from 'components/_shared/Card/Card'\r\nimport {Avatar} from 'components/_shared/Avatar/Avatar'\r\nimport {NavLink} from 'react-router-dom'\r\nimport {UserItemDataType} from 'types/types'\r\nimport {checkOnline} from 'utils/functions'\r\n\r\ntype PropsType = {\r\n    subscriptions: Array<UserItemDataType>\r\n}\r\n\r\nconst SidebarSubscriptions: React.FC<PropsType> = ({subscriptions}) => {\r\n    return (\r\n        <Card>\r\n            <div className={classes.sidebarFriends}>\r\n                <div className={classes.Title}>Subscriptions</div>\r\n                <div className={classes.Avatars}>\r\n                    {subscriptions.length !== 0 && subscriptions.map(sub => <NavLink to={`/profile/${sub.username}`}\r\n                                                                            key={sub._id}>\r\n                            <Avatar smallImg={sub.avatar.small} online={checkOnline(sub.updatedAt)} size={50} name={sub.firstName}/>\r\n                        </NavLink>\r\n                    )}\r\n                </div>\r\n                <div className={classes.Link}><NavLink to='/users/subscriptions'>View All ({subscriptions.length})</NavLink></div>\r\n            </div>\r\n        </Card>\r\n    )\r\n}\r\n\r\nexport default SidebarSubscriptions","import React from 'react'\r\nimport classes from 'components/Layout/BottomNavigation/BottomNavigation.module.scss'\r\nimport colors from 'assets/styles/colors.module.scss'\r\nimport {Button} from 'components/_shared/Button/Button'\r\nimport {ChatLeftTextFill, PeopleFill, HouseDoorFill, DoorOpenFill} from 'react-bootstrap-icons'\r\nimport {NavLink} from 'react-router-dom'\r\nimport {Avatar} from 'components/_shared/Avatar/Avatar'\r\nimport {useSelector} from 'react-redux'\r\nimport {StateType} from 'redux/store'\r\n\r\ntype Props = {\r\n    authorized: boolean\r\n    avatar?: string | null\r\n}\r\n\r\nexport const BottomNavigation: React.FC<Props> = ({avatar, authorized}) => {\r\n    const unreadMessagesCount = useSelector((state: StateType) => state.dialogs.unreadMessagesCount)\r\n    return <div className={classes.wrapper}>\r\n        {authorized && <div className={classes.item}>\r\n            <NavLink to={'/feed'}>\r\n                <Button type={'link'} size={'lg'}>\r\n                    <Button.Icon><HouseDoorFill color={colors.textLight}/></Button.Icon>\r\n                </Button>\r\n            </NavLink>\r\n        </div>}\r\n        <div className={classes.item}>\r\n            <NavLink to={'/users'}>\r\n                <Button type={'link'} size={'lg'}>\r\n                    <Button.Icon><PeopleFill color={colors.textLight}/></Button.Icon>\r\n                </Button>\r\n            </NavLink>\r\n        </div>\r\n        {authorized && <div className={classes.item}>\r\n            <NavLink to={'/dialogs'}>\r\n                <Button type={'link'} size={'lg'}>\r\n                    <Button.Icon><ChatLeftTextFill color={colors.textLight}/></Button.Icon>\r\n                    {!!unreadMessagesCount && <Button.Badge>{unreadMessagesCount}</Button.Badge>}\r\n                </Button>\r\n            </NavLink>\r\n        </div>}\r\n        {authorized && <div className={classes.item}>\r\n            <NavLink to={'/profile'}>\r\n                <Button type={'link'} size={'lg'}>\r\n                    <Button.Icon><Avatar smallImg={avatar} size={24}/></Button.Icon>\r\n                </Button>\r\n            </NavLink>\r\n        </div>}\r\n        {!authorized && <div className={classes.item}>\r\n            <NavLink to={'/login'}>\r\n                <Button type={'link'} size={'lg'}>\r\n                    <Button.Icon><DoorOpenFill color={colors.textLight}/></Button.Icon>\r\n                </Button>\r\n            </NavLink>\r\n        </div>}\r\n    </div>\r\n}","import React from 'react'\r\nimport {StateType} from 'redux/store'\r\nimport {useDispatch, useSelector} from 'react-redux'\r\nimport classes from './Layout.module.scss'\r\nimport Header from 'components/Layout/Header/Header'\r\nimport {Card} from 'components/_shared/Card/Card'\r\nimport LoginForm from 'components/_forms/LoginForm'\r\nimport SidebarNavigation from 'components/Layout/SideBar/SidebarNavigation/SidebarNavigation'\r\nimport SidebarSubscriptions from 'components/Layout/SideBar/SidebarSubscriptions/SidebarSubscriptions'\r\nimport {AvatarType, UserItemDataType} from 'types/types'\r\nimport {logout} from 'redux/reducers/auth.reducer'\r\nimport {useBreakpoint} from 'utils/hooks'\r\nimport {BottomNavigation} from 'components/Layout/BottomNavigation/BottomNavigation'\r\nimport {checkOnline} from 'utils/functions'\r\n\r\ntype PropsType = {\r\n    sidebar?: boolean\r\n    background?: boolean\r\n    authUserName?: string\r\n    authUserAvatar?: AvatarType\r\n    subscriptions: Array<UserItemDataType>\r\n    onLogout: () => void\r\n}\r\n\r\nconst Layout: React.FC<PropsType> = ({\r\n                                         children,\r\n                                         sidebar = false,\r\n                                         background = false,\r\n                                         subscriptions,\r\n                                         authUserName,\r\n                                         authUserAvatar,\r\n                                         onLogout,\r\n                                     }) => {\r\n    const authorized = useSelector((state: StateType) => state.auth.authorized)\r\n    const {tablet} = useBreakpoint()\r\n    return (\r\n        <div className={classes.layout}>\r\n            <AppBar>\r\n                <Header authorized={authorized} username={authUserName} avatar={authUserAvatar?.small}\r\n                        logout={onLogout}/>\r\n            </AppBar>\r\n\r\n            <Main>\r\n                {sidebar && !tablet && <Sidebar>\r\n                    {!authorized && <Card>\r\n                        <div style={{padding: '10px'}}><LoginForm/></div>\r\n                    </Card>}\r\n                    {authorized && <SidebarNavigation/>}\r\n                    {authorized && !tablet && <SidebarSubscriptions subscriptions={subscriptions}/>}\r\n                </Sidebar>}\r\n\r\n                <Content>\r\n                    {children}\r\n                </Content>\r\n            </Main>\r\n\r\n            {tablet && authUserAvatar && <BottomNavigation avatar={authUserAvatar?.small} authorized={authorized}/>}\r\n            {tablet && !authUserAvatar && <BottomNavigation authorized={authorized}/>}\r\n\r\n            {background && <div className={classes.background}>\r\n                <img src=\"https://source.unsplash.com/random/1920x1080/?nature\" alt=\"\"/>\r\n            </div>}\r\n        </div>\r\n    )\r\n}\r\n\r\nconst Container: React.FC = ({children}) => <div className={classes.container}>\r\n    {children}\r\n</div>\r\n\r\nconst AppBar: React.FC = ({children}) => {\r\n    return (\r\n        <div className={classes.appBar}>\r\n            <Container>\r\n                {children}\r\n            </Container>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst Main: React.FC = ({children}) => {\r\n    return (\r\n        <Container>\r\n            <div className={classes.main}>\r\n                {children}\r\n            </div>\r\n        </Container>\r\n    )\r\n}\r\n\r\nconst Content: React.FC = ({children}) => {\r\n    return (\r\n        <div className={classes.content}>\r\n            {children}\r\n        </div>\r\n    )\r\n}\r\n\r\nconst Sidebar: React.FC = ({children}) => {\r\n    return (\r\n        <div className={classes.sidebar}>\r\n            {children}\r\n        </div>\r\n    )\r\n}\r\n\r\nconst LayoutContainer: React.FC<{ sidebar?: boolean, background?: boolean }> = (props) => {\r\n    const dispatch = useDispatch()\r\n    const authUserSubscriptions = useSelector((state: StateType) => state.auth.user?.subscriptions || [])\r\n    const authUserName = useSelector((state: StateType) => state.auth.user?.username)\r\n    const authUserAvatar = useSelector((state: StateType) => state.auth.user?.avatar)\r\n\r\n    const onLogout = () => {\r\n        dispatch(logout())\r\n    }\r\n\r\n    return <Layout {...props} subscriptions={authUserSubscriptions} authUserName={authUserName}\r\n                   authUserAvatar={authUserAvatar} onLogout={onLogout}/>\r\n}\r\n\r\nexport default LayoutContainer\r\n","import React from 'react'\r\nimport {useAuthCheck} from 'utils/hooks'\r\nimport {Redirect} from 'react-router-dom'\r\n\r\nconst HomePage = () => {\r\n    const authorized = useAuthCheck()\r\n    if (authorized) {\r\n        return <Redirect to={`/feed`}/>\r\n    } else {\r\n        return <Redirect to={`/login`}/>\r\n    }\r\n}\r\n\r\nexport default HomePage","import React, {lazy, Suspense, useEffect} from 'react'\r\nimport {Route, Switch} from 'react-router-dom'\r\nimport {useDispatch, useSelector} from 'react-redux'\r\n\r\nimport {StateType} from 'redux/store'\r\nimport {deinitializeApp, initializeApp} from 'redux/reducers/app.reducer'\r\nimport Layout from 'components/Layout/Layout'\r\nimport Spinner from 'components/_shared/Spinner/Spinner'\r\nimport HomePage from 'components/_pages/HomePage'\r\n\r\nconst RegistrationPage = lazy(() => import('components/_pages/RegistrationPage'))\r\nconst LoginPage = lazy(() => import('components/_pages/LoginPage'))\r\nconst ProfilePage = lazy(() => import('components/_pages/ProfilePage'))\r\nconst UsersPage = lazy(() => import('components/_pages/UsersPage'))\r\nconst DialogsPage = lazy(() => import('components/_pages/DialogsPage'))\r\nconst PostPage = lazy(() => import('components/_pages/PostPage'))\r\nconst FeedPage = lazy(() => import('components/_pages/FeedPage'))\r\n\r\nconst TestPage = lazy(() => import('components/TestPage/TestPage'))\r\nconst FormTestPage = lazy(() => import('components/TestPage/FormTestPage'))\r\n\r\n\r\nconst App: React.FC = () => {\r\n    return (\r\n        <Suspense fallback={<AppSpinner/>}>\r\n            <Switch>\r\n                {/*Pages*/}\r\n                <Route path=\"/feed\" render={() => <Layout sidebar={true}><FeedPage/></Layout>}/>\r\n                <Route path=\"/post/:id\" render={() => <Layout sidebar={true}><PostPage/></Layout>}/>\r\n                <Route exact path=\"/profile/:username?\" render={() => <Layout sidebar={true}><ProfilePage/></Layout>}/>\r\n                <Route path=\"/dialogs/:username?\" render={() => <Layout sidebar={true}><DialogsPage/></Layout>}/>\r\n                <Route path=\"/users/:filter?\" render={() => <Layout sidebar={true}><UsersPage/></Layout>}/>\r\n\r\n                {/*Pages under construction*/}\r\n                <Route path=\"/settings\" render={() => <Layout sidebar={true}>Settings Page</Layout>}/>\r\n\r\n                {/*Component testing playgrounds (delete on prod)*/}\r\n                <Route path={'/testpage'} component={TestPage}/>\r\n                <Route path={'/formtestpage'} component={FormTestPage}/>\r\n\r\n                <Route path=\"/login\" render={() => <Layout background={true}><LoginPage/></Layout>}/>\r\n                <Route path=\"/register\" render={() => <Layout background={true}><RegistrationPage/></Layout>}/>\r\n                <Route exact path=\"/\" component={HomePage}/>\r\n\r\n                <Route render={() => <div>404 Error: No such page</div>}/>\r\n            </Switch>\r\n        </Suspense>\r\n    )\r\n}\r\n\r\n// Container\r\nconst AppContainer: React.FC = () => {\r\n    const dispatch = useDispatch()\r\n    const initialized = useSelector((state: StateType) => state.app.initialized)\r\n\r\n\r\n    useEffect(() => {\r\n        dispatch(initializeApp())\r\n        return () => { dispatch(deinitializeApp()) }\r\n    }, [dispatch])\r\n\r\n    if (!initialized) return <Spinner size={100} thickness={4} fullscreen={true}/>\r\n\r\n    return (\r\n        <App/>\r\n    )\r\n}\r\n\r\nconst AppSpinner = () => <div style={{ width: '100vw', height: '100vh', display: 'flex', justifyContent: 'center', alignItems: 'center'}}>\r\n    <Spinner size={100} thickness={4}/>\r\n</div>\r\n\r\nexport default AppContainer\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import {applyMiddleware, combineReducers, createStore, Action} from 'redux'\r\nimport {AuthActionType, authReducer} from './reducers/auth.reducer'\r\n\r\nimport profileReducer, {ProfileActionType} from './reducers/profile.reducer'\r\nimport postsReducer, {PostsActionType} from './reducers/posts.reducer'\r\nimport {AppActionType, appReducer} from './reducers/app.reducer'\r\nimport {UsersActionType, usersReducer} from './reducers/users.reducer'\r\nimport thunkMiddleware, {ThunkAction} from 'redux-thunk'\r\nimport {dialogsReducer} from './reducers/dialogs.reducer'\r\n\r\n// generic for extracting action types from actions object\r\nexport type InferActionsTypes<T> = T extends { [key: string]: infer U } ? U : never\r\n\r\n// includes all action types from all reducer files\r\nexport type ActionType = AppActionType | AuthActionType | ProfileActionType | UsersActionType | PostsActionType\r\nexport type AsyncThunkType = ThunkAction<Promise<void>, StateType, unknown, ActionType>\r\nexport type ThunkType<A extends Action> = ThunkAction<Promise<void>, StateType, unknown, A>\r\n\r\nconst rootReducer = combineReducers({\r\n    app: appReducer,\r\n    auth: authReducer,\r\n    profile: profileReducer,\r\n    users: usersReducer,\r\n    posts: postsReducer,\r\n    dialogs: dialogsReducer,\r\n})\r\n\r\ntype RootReducerType = typeof rootReducer   // get root reducer type that returns app state\r\nexport type StateType = ReturnType<RootReducerType> // get app state type\r\n\r\nconst store = createStore(\r\n    rootReducer,\r\n    applyMiddleware(thunkMiddleware)\r\n)\r\n\r\n// @ts-ignore\r\nwindow.s = store\r\n\r\nexport default store\r\n//\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport 'assets/styles/normalize.scss'\r\nimport 'assets/styles/global.scss'\r\nimport App from './components/App'\r\nimport reportWebVitals from './reportWebVitals'\r\nimport {HashRouter} from 'react-router-dom'\r\nimport store from './redux/store'\r\nimport {Provider} from 'react-redux'\r\n\r\nReactDOM.render(\r\n        <Provider store={store}>\r\n            <HashRouter>\r\n                <App/>\r\n            </HashRouter>\r\n        </Provider>\r\n    , document.getElementById('root')\r\n)\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals()\r\n","import {authApi, LoginDataType, RegistrationDataType} from 'api/auth.api'\r\nimport {ResultCodes} from 'api/core.api'\r\nimport {InferActionsTypes, ThunkType} from '../store'\r\nimport {startMessagesListening, stopMessagesListening} from './dialogs.reducer'\r\nimport {AuthUserDataType, ServerValidationErrorType} from 'types/types'\r\n\r\n// INITIAL STATE\r\nconst initialState = {\r\n    authorized: false,\r\n    user: null as AuthUserDataType | null,\r\n    registrationErrors: [] as Array<ServerValidationErrorType>,\r\n    loginErrors: [] as Array<ServerValidationErrorType>,\r\n    registrationSuccessful: false\r\n}\r\ntype AuthStateType = typeof initialState\r\n\r\n// REDUCER\r\nexport const authReducer = (state: AuthStateType = initialState, action: AuthActionType): AuthStateType => {\r\n    switch (action.type) {\r\n        case 'rsn/auth/SET_USER': {\r\n            return {\r\n                ...state,\r\n                authorized: true,\r\n                user: action.user\r\n            }\r\n        }\r\n        case 'rsn/auth/CLEAR_USER': {\r\n            return {\r\n                ...state,\r\n                authorized: false,\r\n                user: null\r\n            }\r\n        }\r\n        case 'rsn/auth/SET_REGISTRATION_SUCCESSFUL': {\r\n            return {\r\n                ...state,\r\n                registrationSuccessful: action.registrationSuccessful\r\n            }\r\n        }\r\n        case 'rsn/auth/SET_REGISTRATION_ERRORS': {\r\n            return  {\r\n                ...state,\r\n                registrationErrors: action.errors\r\n            }\r\n        }\r\n        case 'rsn/auth/SET_LOGIN_ERRORS': {\r\n            return {\r\n                ...state,\r\n                loginErrors: action.errors\r\n            }\r\n        }\r\n        default: {\r\n            return state\r\n        }\r\n    }\r\n}\r\n\r\n//region ACTION CREATORS\r\nexport const authActions = {\r\n    setUser: (user: AuthUserDataType) => ({\r\n        type: 'rsn/auth/SET_USER',\r\n        user\r\n    } as const),\r\n    clearUser: () => ({type: 'rsn/auth/CLEAR_USER'} as const),\r\n    setRegistrationSuccessful: (registrationSuccessful: boolean) => ({\r\n        type: 'rsn/auth/SET_REGISTRATION_SUCCESSFUL',\r\n        registrationSuccessful\r\n    } as const),\r\n    setRegistrationErrors: (errors: Array<ServerValidationErrorType>) => ({\r\n        type: 'rsn/auth/SET_REGISTRATION_ERRORS',\r\n        errors\r\n    } as const),\r\n    setLoginErrors: (errors: Array<ServerValidationErrorType>) => ({\r\n        type: 'rsn/auth/SET_LOGIN_ERRORS',\r\n        errors\r\n    } as const)\r\n}\r\nexport type AuthActionType = ReturnType<InferActionsTypes<typeof authActions>>\r\n//endregion\r\n\r\n//region THUNK CREATORS\r\nexport const login = (loginFormData: LoginDataType): ThunkType<AuthActionType> => async (dispatch) => {\r\n    const res = await authApi.login(loginFormData)\r\n    if (res.resultCode === ResultCodes.success) {\r\n        dispatch(getAuthUserData())\r\n        dispatch(startMessagesListening())\r\n    }\r\n    if (res.resultCode === ResultCodes.error) {\r\n        dispatch(authActions.setLoginErrors(res.errors))\r\n    }\r\n}\r\n\r\nexport const logout = (): ThunkType<AuthActionType> => async (dispatch) => {\r\n    const res = await authApi.logout()\r\n    if (res.resultCode === ResultCodes.success) {\r\n        dispatch(getAuthUserData())\r\n        dispatch(stopMessagesListening())\r\n    }\r\n    if (res.resultCode === ResultCodes.error) {\r\n        console.log(res)\r\n    }\r\n}\r\n\r\nexport const getAuthUserData = (): ThunkType<AuthActionType> => async (dispatch) => {\r\n    const res = await authApi.me()\r\n    if (res.resultCode === ResultCodes.success) {\r\n        const {user} = res.data\r\n        dispatch(authActions.setUser(user))\r\n    } else {\r\n        dispatch(stopMessagesListening())\r\n        dispatch(authActions.clearUser())\r\n    }\r\n\r\n    if (res.resultCode === ResultCodes.error) {\r\n        console.log(res)\r\n    }\r\n    if (res.resultCode === ResultCodes.expiredToken) {\r\n        console.log(res)\r\n    }\r\n}\r\n\r\n\r\nexport const register = (registrationData: RegistrationDataType): ThunkType<AuthActionType> => async (dispatch) => {\r\n    const res = await authApi.register(registrationData)\r\n    if (res.resultCode === ResultCodes.success) {\r\n        dispatch(authActions.setRegistrationSuccessful(true))\r\n    }\r\n    if (res.resultCode === ResultCodes.error) {\r\n        dispatch(authActions.setRegistrationErrors(res.errors))\r\n    }\r\n}\r\n//endregion","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dark\":\"Form_dark__1yEn7\",\"wrapper\":\"Form_wrapper__4LySP\",\"formError\":\"Form_formError__2tat8\",\"section\":\"Form_section__3s0K1\",\"row\":\"Form_row__1vU7f\",\"left\":\"Form_left__k3WRF\",\"right\":\"Form_right__2Jbz6\",\"center\":\"Form_center__Qase8\",\"fill\":\"Form_fill__ErT7-\",\"item\":\"Form_item__k-6ci\",\"label\":\"Form_label__36idU\",\"disabled\":\"Form_disabled__1CQsb\",\"labelText\":\"Form_labelText__4Kxmy\",\"labelRequired\":\"Form_labelRequired__2z3kP\",\"formItemError\":\"Form_formItemError__LnpMn\"};","import axios, {AxiosError, AxiosResponse} from 'axios'\r\nimport {ServerValidationErrorType} from 'types/types'\r\n\r\nconsole.log(process.env.REACT_APP_API_URL)\r\n\r\nexport const coreApi = axios.create({\r\n    baseURL: process.env.REACT_APP_API_URL + 'api/',\r\n    withCredentials: true,\r\n    // validateStatus: status => status < 500\r\n})\r\n\r\n// basic result codes. used by default in ResponseType\r\n// can be extended if needed\r\nexport enum ResultCodes {\r\n    success = 0,\r\n    error = 1,\r\n    authError = 10,\r\n    expiredToken = 11,\r\n}\r\n\r\n// all server responses have this type\r\nexport type APIResponseType<D = undefined> = {\r\n    resultCode: ResultCodes\r\n    message: string\r\n    data: D\r\n    errors?: Array<ServerValidationErrorType>\r\n}\r\nexport const handleResponse = <DataType = undefined>() => (res: AxiosResponse<APIResponseType<DataType>>) => {\r\n    return res.data\r\n}\r\n\r\nexport const handleError = () => (err: AxiosError) => {\r\n    return err.response?.data\r\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dark\":\"Avatar_dark__1LTA6\",\"wrapper\":\"Avatar_wrapper__jpAF3\",\"border\":\"Avatar_border__28yBP\",\"image\":\"Avatar_image__2LZ-q\",\"shadow\":\"Avatar_shadow__11fZd\",\"buttons\":\"Avatar_buttons__2ABNw\",\"icon\":\"Avatar_icon__12z5N\",\"photo\":\"Avatar_photo__1NYeI\",\"onLineIndicator\":\"Avatar_onLineIndicator__JD9ez\",\"name\":\"Avatar_name__1dq2q\"};","import {MessageType} from '../types/types'\r\nimport {io} from 'socket.io-client'\r\n\r\nlet serverMessageSubscribers = [] as Array<(message: MessageType) => void>\r\nlet unreadMessagesSubscribers = [] as Array<(unreadMessagesCount: number) => void>\r\nlet notAuthorizedSubscribers = [] as Array<() => void>\r\nlet authorizedSubscribers = [] as Array<() => void>\r\nlet connectSubscribers = [] as Array<() => void>\r\n\r\nlet socket = io(process.env.REACT_APP_API_URL || 'http://localhost:5000/', {withCredentials: true, autoConnect: false, reconnection: true})\r\n\r\n// handle dialog message from server\r\ntype ServerMessageResponseType = { dialogId: string, message: MessageType }\r\nconst handleServerMessage = (serverMessageResponse: ServerMessageResponseType) => {\r\n    serverMessageSubscribers.forEach(s => s(serverMessageResponse.message))\r\n}\r\nsocket.on('server-message', handleServerMessage)\r\n\r\n// handle unread message notification from server\r\ntype UnreadMessagesResponseType = { unreadMessagesCount: number }\r\nconst handleUnreadMessages = (unreadMessagesResponse: UnreadMessagesResponseType) => {\r\n    unreadMessagesSubscribers.forEach(s => s(unreadMessagesResponse.unreadMessagesCount))\r\n}\r\nsocket.on('unread-message', handleUnreadMessages)\r\n\r\n// handle not authorized event\r\nconst handleNotAuthorized = () => {\r\n    notAuthorizedSubscribers.forEach(async s => await s())\r\n}\r\nsocket.on('not-authorized', handleNotAuthorized)\r\n\r\nconst handleAuthorized = () => {\r\n    authorizedSubscribers.forEach(s => s())\r\n}\r\nsocket.on('authorized', handleAuthorized)\r\n\r\nconst handleConnect = () => {\r\n    console.log('Socket connection opened')\r\n    connectSubscribers.forEach(s => s())\r\n}\r\nsocket.on('connect', handleConnect)\r\nsocket.on('disconnect', () => console.log('Socket connection closed'))\r\n\r\n\r\n\r\nexport const socketApi = {\r\n    connect() {\r\n        if (!socket.connected) socket.connect()\r\n    },\r\n    disconnect() {\r\n        if (socket.connected) {\r\n            socket.disconnect()\r\n            connectSubscribers = []\r\n            serverMessageSubscribers = []\r\n            unreadMessagesSubscribers = []\r\n            notAuthorizedSubscribers = []\r\n            authorizedSubscribers = []\r\n        }\r\n    },\r\n\r\n    subscribe(\r\n        connectCallback: () => void,\r\n        serverMessageCallback: (message: MessageType) => void,\r\n        unreadMessagesCallback: (unreadMessagesCount: number) => void,\r\n        notAuthorizedCallback: () => void,\r\n        authorizedCallback: () => void\r\n    ) {\r\n        connectSubscribers.push(connectCallback)\r\n        serverMessageSubscribers.push(serverMessageCallback)\r\n        unreadMessagesSubscribers.push(unreadMessagesCallback)\r\n        notAuthorizedSubscribers.push(notAuthorizedCallback)\r\n        authorizedSubscribers.push(authorizedCallback)\r\n    },\r\n\r\n    unsubscribe(\r\n        connectCallback: () => void,\r\n        serverMessageCallback: (message: MessageType) => void,\r\n        unreadMessagesCallback: (unreadMessagesCount: number) => void,\r\n        notAuthorizedCallback: () => void,\r\n        authorizedCallback: () => void\r\n    ) {\r\n        connectSubscribers = connectSubscribers.filter(s => s !== connectCallback)\r\n        serverMessageSubscribers = serverMessageSubscribers.filter(s => s !== serverMessageCallback)\r\n        unreadMessagesSubscribers = unreadMessagesSubscribers.filter(s => s !== unreadMessagesCallback)\r\n        notAuthorizedSubscribers = notAuthorizedSubscribers.filter(s => s !== notAuthorizedCallback)\r\n        authorizedSubscribers = authorizedSubscribers.filter(s => s !== authorizedCallback)\r\n    },\r\n    sendMessage(message: string, dialogId: string) {\r\n        socket.emit('client-message', message, dialogId)\r\n    }\r\n}\r\n","import {coreApi, handleError, handleResponse} from './core.api'\r\nimport {DialogType, MessageType, UserItemDataType} from '../types/types'\r\n\r\ntype DialogDataType = {\r\n    dialog: {\r\n        _id: string,\r\n        createdAt: Date,\r\n        updatedAt: Date,\r\n        users: Array<UserItemDataType>,\r\n        messages: Array<MessageType>\r\n    }\r\n}\r\n\r\ntype DialogsDataType = {\r\n    dialogs: Array<DialogType>\r\n}\r\n\r\nexport const dialogApi = {\r\n    getDialogs: () => coreApi\r\n        .get(`/dialog`)\r\n        .then(handleResponse<DialogsDataType>())\r\n        .catch(handleError()),\r\n    getMessages: (username: string) => coreApi\r\n        .get(`/dialog/${username}`)\r\n        .then(handleResponse<DialogDataType>())\r\n        .catch(handleError()),\r\n    markMessageAsRead: (messageId: string) => coreApi\r\n        .patch(`/message/${messageId}`)\r\n        .then(handleResponse<{message: MessageType, unreadMessagesCount: number}>())\r\n        .catch(handleError())\r\n}\r\n","import {InferActionsTypes, StateType, ThunkType} from '../store'\r\nimport {DialogType, MessageType} from 'types/types'\r\nimport {socketApi} from 'api/socket.api'\r\nimport {Dispatch} from 'react'\r\nimport {dialogApi} from 'api/dialog.api'\r\nimport {ResultCodes} from 'api/core.api'\r\nimport {authApi} from 'api/auth.api'\r\n\r\n\r\n// INITIAL STATE\r\nconst initialState = {\r\n    currentDialogId: null as string | null,\r\n    messages: [] as Array<MessageType>,\r\n    dialogs: [] as Array<DialogType>,\r\n    cachedMessage: null as { text: string, dialogId: string } | null,\r\n    unreadMessagesCount: 0\r\n}\r\ntype DialogsStateType = typeof initialState\r\n\r\n// REDUCER\r\nexport const dialogsReducer = (state: DialogsStateType = initialState, action: DialogsActionType): DialogsStateType => {\r\n    switch (action.type) {\r\n        case 'rsn/chat/ADD_MESSAGE': {\r\n            return {\r\n                ...state,\r\n                messages: [...state.messages, action.message],\r\n                dialogs: state.dialogs.map(dialog => (dialog._id === action.message.dialog) ? {\r\n                    ...dialog,\r\n                    updated: action.message.date\r\n                } : dialog)\r\n            }\r\n        }\r\n        case 'rsn/chat/SET_DIALOG': {\r\n            return {\r\n                ...state,\r\n                currentDialogId: action.currentDialogId,\r\n                messages: action.messages\r\n            }\r\n        }\r\n        case 'rsn/chat/UNSET_DIALOG': {\r\n            return {\r\n                ...state,\r\n                currentDialogId: null,\r\n                messages: []\r\n            }\r\n        }\r\n        case 'rsn/chat/SET_DIALOGS': {\r\n            return {\r\n                ...state,\r\n                dialogs: action.dialogs\r\n            }\r\n        }\r\n        case 'rsn/chat/SET_UNREAD_MESSAGES_COUNT': {\r\n            return {\r\n                ...state,\r\n                unreadMessagesCount: action.unreadMessagesCount\r\n            }\r\n        }\r\n        case 'rsn/chat/MARK_MESSAGE_AS_READ': {\r\n            return {\r\n                ...state,\r\n                messages: state.messages.map(message => message._id !== action.messageId ? message : {...message, isRead: true})\r\n            }\r\n        }\r\n        case 'rsn/chat/SET_CACHED_MESSAGE': {\r\n            return {\r\n                ...state,\r\n                cachedMessage: {text: action.text, dialogId: action.dialogId}\r\n            }\r\n        }\r\n        case 'rsn/chat/CLEAR_CACHED_MESSAGE': {\r\n            return {\r\n                ...state,\r\n                cachedMessage: null\r\n            }\r\n        }\r\n        default: {\r\n            return state\r\n        }\r\n    }\r\n}\r\n\r\n//region ACTION CREATORS\r\nexport const dialogsActions = {\r\n    setDialog: (currentDialogId: string, messages: Array<MessageType>) => ({\r\n        type: 'rsn/chat/SET_DIALOG',\r\n        currentDialogId,\r\n        messages\r\n    } as const),\r\n    unsetDialog: () => ({type: 'rsn/chat/UNSET_DIALOG'} as const),\r\n    setDialogs: (dialogs: Array<DialogType>) => ({type: 'rsn/chat/SET_DIALOGS', dialogs} as const),\r\n    addMessage: (message: MessageType) => ({type: 'rsn/chat/ADD_MESSAGE', message} as const),\r\n    setUnreadMessagesCount: (unreadMessagesCount: number) => ({\r\n        type: 'rsn/chat/SET_UNREAD_MESSAGES_COUNT',\r\n        unreadMessagesCount\r\n    } as const),\r\n    markMessageAsRead: (messageId: string) => ({type: 'rsn/chat/MARK_MESSAGE_AS_READ', messageId} as const),\r\n    setCachedMessage: (text: string, dialogId: string) => ({type: 'rsn/chat/SET_CACHED_MESSAGE', text, dialogId} as const),\r\n    clearCachedMessage: () => ({type: 'rsn/chat/CLEAR_CACHED_MESSAGE'} as const)\r\n}\r\nexport type DialogsActionType = ReturnType<InferActionsTypes<typeof dialogsActions>>\r\n//endregion\r\n\r\n//region THUNK CREATORS\r\n// todo: need to test and debug dialogs. sometimes message not added to state immediately after sending.\r\nlet _connectHandler: (() => void) | null = null\r\nconst connectHandlerCreator = (dispatch: Dispatch<DialogsActionType | ThunkType<DialogsActionType>>, getState: () => StateType) => {\r\n    if (_connectHandler) return _connectHandler\r\n    return () => {\r\n        console.log('connect handler')\r\n        const {cachedMessage} = getState().dialogs\r\n        if (cachedMessage) {\r\n            dispatch(sendMessage(cachedMessage.text, cachedMessage.dialogId))\r\n            dispatch(dialogsActions.clearCachedMessage())\r\n        }\r\n    }\r\n}\r\n\r\nlet _messageHandler: ((message: MessageType) => void) | null = null\r\nconst messageHandlerCreator = (dispatch: Dispatch<DialogsActionType>) => {\r\n    if (_messageHandler) return _messageHandler\r\n    return (message: MessageType) => {\r\n        dispatch(dialogsActions.addMessage(message))\r\n    }\r\n}\r\n\r\nlet _unreadMessagesHandler: ((unreadMessagesCount: number) => void) | null = null\r\nconst unreadMessagesHandlerCreator = (dispatch: Dispatch<DialogsActionType>) => {\r\n    if (_unreadMessagesHandler) return _unreadMessagesHandler\r\n    return (unreadMessagesCount: number) => {\r\n        dispatch(dialogsActions.setUnreadMessagesCount(unreadMessagesCount))\r\n    }\r\n}\r\n\r\nlet _notAuthorizedHandler: (() => null) | null = null\r\nconst notAuthorizedHandlerCreator = (dispatch: Dispatch<ThunkType<DialogsActionType> | DialogsActionType>) => {\r\n    if (_notAuthorizedHandler) return _notAuthorizedHandler\r\n    return async () => {\r\n        console.log('dispatch not authorized websocket event')\r\n        dispatch(stopMessagesListening())\r\n        const res = await authApi.refreshToken()\r\n        if (res.resultCode === ResultCodes.success) dispatch(startMessagesListening())\r\n    }\r\n}\r\n\r\nlet _authorizedHandler: (() => null) | null = null\r\nconst authorizedHandlerCreator = (dispatch: Dispatch<ThunkType<DialogsActionType> | DialogsActionType>, getState: () => StateType) => {\r\n    if (_authorizedHandler) return _authorizedHandler\r\n    return async () => {\r\n\r\n    }\r\n}\r\n\r\nexport const startMessagesListening = (): ThunkType<DialogsActionType> => async (dispatch, getState) => {\r\n    socketApi.connect()\r\n    socketApi.subscribe(\r\n        connectHandlerCreator(dispatch, getState),\r\n        messageHandlerCreator(dispatch),\r\n        unreadMessagesHandlerCreator(dispatch),\r\n        notAuthorizedHandlerCreator(dispatch),\r\n        authorizedHandlerCreator(dispatch, getState)\r\n    )\r\n}\r\nexport const stopMessagesListening = (): ThunkType<DialogsActionType> => async (dispatch, getState) => {\r\n    socketApi.unsubscribe(\r\n        connectHandlerCreator(dispatch, getState),\r\n        messageHandlerCreator(dispatch),\r\n        unreadMessagesHandlerCreator(dispatch),\r\n        notAuthorizedHandlerCreator(dispatch),\r\n        authorizedHandlerCreator(dispatch, getState)\r\n    )\r\n    socketApi.disconnect()\r\n}\r\n\r\n// todo should refresh tokens if not authorized + add authorization verification on backend\r\nexport const sendMessage = (message: string, dialogId: string): ThunkType<DialogsActionType> => async (dispatch, getState) => {\r\n    dispatch(dialogsActions.setCachedMessage(message, dialogId))\r\n    socketApi.sendMessage(message, dialogId)\r\n}\r\n\r\nexport const getDialogs = (): ThunkType<DialogsActionType> => async (dispatch) => {\r\n    const res = await dialogApi.getDialogs()\r\n\r\n    if (res.resultCode === ResultCodes.success) {\r\n        dispatch(dialogsActions.setDialogs(res.data.dialogs))\r\n    }\r\n    if (res.resultCode === ResultCodes.error) {\r\n        console.log(res)\r\n    }\r\n}\r\n\r\nexport const openDialog = (username: string): ThunkType<DialogsActionType> => async (dispatch) => {\r\n    const res = await dialogApi.getMessages(username)\r\n    if (res.resultCode === ResultCodes.success) {\r\n        dispatch(dialogsActions.setDialog(res.data.dialog._id, res.data.dialog.messages))\r\n    }\r\n    if (res.resultCode === ResultCodes.error) {\r\n        console.log(res)\r\n    }\r\n}\r\n\r\nexport const closeDialog = (): ThunkType<DialogsActionType> => async (dispatch) => {\r\n    dispatch(dialogsActions.unsetDialog())\r\n}\r\n\r\nexport const readMessage = (messageId: string): ThunkType<DialogsActionType> => async (dispatch) => {\r\n    const res = await dialogApi.markMessageAsRead(messageId)\r\n    if (res.resultCode === ResultCodes.success) {\r\n        dispatch(dialogsActions.markMessageAsRead(res.data.message._id))\r\n        dispatch(dialogsActions.setUnreadMessagesCount(res.data.unreadMessagesCount))\r\n    }\r\n    if (res.resultCode === ResultCodes.error) {\r\n        console.log(res)\r\n    }\r\n}\r\n//endregion\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dark\":\"Flex_dark__10I9f\",\"row\":\"Flex_row__3_1u3\",\"bordered\":\"Flex_bordered__1vTO2\",\"col\":\"Flex_col__1rgou\",\"item\":\"Flex_item__3eYY8\",\"space\":\"Flex_space__2U2zF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"white\":\"#fff\",\"black\":\"#000\",\"accent\":\"#3f72af\",\"dark\":\"colors_dark__3o0-V\",\"mid\":\"#d3e5ff\",\"light\":\"#f9f7f7\",\"error\":\"#ef3e36\",\"success\":\"#9cec5b\",\"darkGrey\":\"#404040\",\"midGrey\":\"gray\",\"lightGrey\":\"#f2f2f2\",\"textDark\":\"var(--text-color-dark)\",\"textMid\":\"var(--text-color-mid)\",\"textLight\":\"var(--text-color-light)\",\"textLink\":\"var(--text-color-link)\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dark\":\"Layout_dark__3-BOz\",\"layout\":\"Layout_layout__1qY40\",\"background\":\"Layout_background__1ckCD\",\"container\":\"Layout_container__Dwyg-\",\"appBar\":\"Layout_appBar__21p33\",\"main\":\"Layout_main__3EDn4\",\"content\":\"Layout_content__2n8_1\",\"sidebar\":\"Layout_sidebar__1Ql7Y\"};","import {coreApi, handleError, handleResponse} from './core.api'\r\nimport {EditProfileDataType} from './profile.api'\r\nimport {AuthUserDataType} from '../types/types'\r\n\r\n\r\n//region DATA TYPES\r\n// GET /auth/me/ response\r\n// contains userId, email and username of currently logged in user\r\nexport type AuthorizedUserDataType = {\r\n    userId: string\r\n    email: string\r\n    username: string\r\n    profile: EditProfileDataType\r\n}\r\n\r\n// POST /auth/login/\r\n// contains data needed for login (gathered from login form)\r\nexport type LoginDataType = {\r\n    email: string\r\n    password: string\r\n    rememberMe: boolean\r\n}\r\n\r\n// POST /auth/register/\r\n// contains data needed for registration (gathered from registration form)\r\nexport type RegistrationDataType = {\r\n    firstName: string\r\n    lastName: string\r\n    username: string\r\n    email: string\r\n    password: string\r\n}\r\n//endregion\r\n\r\nexport const authApi = {\r\n    login: (loginData: LoginDataType) => coreApi\r\n        .post('/auth/login', loginData)\r\n        .then(handleResponse())\r\n        .catch(handleError()),\r\n\r\n    me: () => coreApi\r\n        .get('/auth/me')\r\n        .then(handleResponse<AuthUserDataType>())\r\n        .catch(handleError()),\r\n\r\n    refreshToken: () => coreApi\r\n        .post('/auth/refresh-tokens')\r\n        .then(handleResponse())\r\n        .catch(handleError()),\r\n\r\n    logout: () => coreApi\r\n        .delete('/auth/logout')\r\n        .then(handleResponse())\r\n        .catch(handleError()),\r\n\r\n    register: (registrationData: RegistrationDataType) => coreApi\r\n        .post('/auth/register', registrationData)\r\n        .then(handleResponse())\r\n        .catch(handleError())\r\n}\r\n\r\n\r\ncoreApi.interceptors.response.use(\r\n    (res) => {\r\n        return res\r\n    },\r\n    async (err) => {\r\n        const originalConfig = err.config\r\n        if (err.response.status === 401 && !originalConfig._retry && err.response.data.message !== 'Invalid token') {\r\n            originalConfig._retry = true\r\n            await authApi.refreshToken()\r\n            return coreApi(originalConfig);\r\n        }\r\n        return Promise.reject(err)\r\n    }\r\n)","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dark\":\"BottomNavigation_dark__1Vu2Q\",\"wrapper\":\"BottomNavigation_wrapper__rXt0g\",\"item\":\"BottomNavigation_item__2MFmA\"};","import React from 'react'\r\nimport classes from './Card.module.scss'\r\n\r\ntype PropsType = {\r\n    maxWidth?: number\r\n    ref?: React.Ref<HTMLDivElement>\r\n}\r\n\r\nexport const Card: React.FC<PropsType> = ({children, maxWidth, ref}) => <div\r\n    className={classes.Card}\r\n    style={{maxWidth}}\r\n    ref={ref}\r\n>\r\n    {children}\r\n</div>","import React, {useEffect, useState} from 'react'\r\nimport classes from './Avatar.module.scss'\r\nimport classnames from 'classnames'\r\nimport defaultAvatarImage from 'assets/images/avatar-default.jpg'\r\nimport {Area} from 'react-easy-crop/types'\r\nimport ImageUploadForm from 'components/_forms/ImageUploadForm/ImageUploadForm'\r\nimport {Button} from 'components/_shared/Button/Button'\r\nimport {PencilFill, XLg, ZoomIn, ArrowLeft} from 'react-bootstrap-icons'\r\nimport {ModalWindow} from 'components/_shared/ModalWindow/ModalWindow'\r\nimport {Row, Space} from 'components/_shared/Flex/Flex'\r\n\r\ntype PropsType = {\r\n    smallImg?: string | null\r\n    largeImg?: string | null\r\n    size?: number\r\n    name?: string\r\n    border?: boolean\r\n    shadow?: boolean\r\n    online?: boolean\r\n    onEdit?: (image: File, cropArea: Area) => void\r\n}\r\n\r\nexport const Avatar: React.FC<PropsType> = ({\r\n                                                smallImg,\r\n                                                largeImg,\r\n                                                size = 90,\r\n                                                name,\r\n                                                online,\r\n                                                border = false,\r\n                                                shadow = false,\r\n                                                onEdit\r\n                                            }) => {\r\n    const zoomable = !!(smallImg && largeImg)\r\n    const editable = !!onEdit\r\n\r\n    const [modalActive, setModalActive] = useState(false)\r\n\r\n    useEffect(() => {\r\n        setModalActive(false)\r\n    }, [])\r\n    const openModal = () => setModalActive(true)\r\n    const closeModal = () => setModalActive(false)\r\n\r\n    return (\r\n        <div\r\n            className={classnames(\r\n                classes.wrapper,\r\n                {[classes.border]: border},\r\n                {[classes.shadow]: shadow}\r\n            )}\r\n            style={{width: size}}\r\n        >\r\n\r\n            <div className={classes.image} style={{width: size, height: size}}>\r\n                {(editable || zoomable) && <AvatarButton\r\n                    onZoomClick={zoomable ? openModal : undefined}\r\n                />}\r\n\r\n                <div className={classes.photo}>\r\n                    <img src={smallImg || defaultAvatarImage} alt=\"avatar\"/>\r\n                </div>\r\n\r\n                {online && <div className={classes.onLineIndicator}/>}\r\n            </div>\r\n\r\n            {name && <div className={classes.name}>{name}</div>}\r\n\r\n            {zoomable && largeImg && <AvatarModalWindow\r\n                img={largeImg}\r\n                open={modalActive}\r\n                onClose={closeModal}\r\n                onSubmit={onEdit}\r\n            />}\r\n        </div>\r\n    )\r\n}\r\n\r\ntype ZoomAvatarModalWindowPropsType = {\r\n    img: string,\r\n    open: boolean,\r\n    onClose: () => void\r\n    onSubmit?: (image: File, cropArea: Area) => void\r\n}\r\nconst AvatarModalWindow: React.FC<ZoomAvatarModalWindowPropsType> = ({\r\n                                                                             img,\r\n                                                                             open,\r\n                                                                             onClose,\r\n                                                                             onSubmit\r\n                                                                         }) => {\r\n    const [editMode, setEditMode] = useState(false)\r\n    const editHandler = () => {\r\n        setEditMode(true)\r\n    }\r\n    const closeHandler = () => {\r\n        setEditMode(false)\r\n        onClose()\r\n    }\r\n    const backHandler = () => {\r\n        setEditMode(false)\r\n    }\r\n    const submitHandler = (image: File, cropArea: Area) => {\r\n        !!onSubmit && onSubmit(image, cropArea)\r\n        closeHandler()\r\n    }\r\n    return (\r\n        <ModalWindow open={open}>\r\n            <Row horizontalAlign={'center'}>\r\n                {!editMode && !!onSubmit && <Button onClick={editHandler}>Change avatar</Button>}\r\n                {editMode && !!onSubmit &&\r\n                <Button onClick={backHandler}><Button.Icon><ArrowLeft/></Button.Icon></Button>}\r\n                <Space/>\r\n                <Button type={'cancel'} size='md' onClick={closeHandler}>\r\n                    <Button.Icon><XLg/></Button.Icon>\r\n                </Button>\r\n            </Row>\r\n            {!editMode && <div style={{marginTop: 10}}>\r\n                {img && <img src={img} alt=\"\"/>}\r\n            </div>}\r\n            {editMode && !!onSubmit && <ImageUploadForm aspect={1} onSubmit={submitHandler}/>}\r\n        </ModalWindow>\r\n    )\r\n}\r\n\r\ntype AvatarButtonsPropsType = {\r\n    onZoomClick?: () => void\r\n}\r\nconst AvatarButton: React.FC<AvatarButtonsPropsType> = ({\r\n                                                             onZoomClick\r\n                                                         }) => {\r\n    return (\r\n        <button className={classes.buttons} onClick={onZoomClick}>\r\n            <div className={classes.icon}>\r\n                <ZoomIn color={'white'} size={20}/>\r\n            </div>\r\n        </button>\r\n    )\r\n}","export default \"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEBLAEsAAD/4QBWRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAAAAAEsAAAAAQAAASwAAAAB/+0ALFBob3Rvc2hvcCAzLjAAOEJJTQQEAAAAAAAPHAFaAAMbJUccAQAAAgAEAP/hDIFodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvADw/eHBhY2tldCBiZWdpbj0n77u/JyBpZD0nVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkJz8+Cjx4OnhtcG1ldGEgeG1sbnM6eD0nYWRvYmU6bnM6bWV0YS8nIHg6eG1wdGs9J0ltYWdlOjpFeGlmVG9vbCAxMC4xMCc+CjxyZGY6UkRGIHhtbG5zOnJkZj0naHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyc+CgogPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9JycKICB4bWxuczp0aWZmPSdodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyc+CiAgPHRpZmY6UmVzb2x1dGlvblVuaXQ+MjwvdGlmZjpSZXNvbHV0aW9uVW5pdD4KICA8dGlmZjpYUmVzb2x1dGlvbj4zMDAvMTwvdGlmZjpYUmVzb2x1dGlvbj4KICA8dGlmZjpZUmVzb2x1dGlvbj4zMDAvMTwvdGlmZjpZUmVzb2x1dGlvbj4KIDwvcmRmOkRlc2NyaXB0aW9uPgoKIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PScnCiAgeG1sbnM6eG1wTU09J2h0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8nPgogIDx4bXBNTTpEb2N1bWVudElEPmFkb2JlOmRvY2lkOnN0b2NrOjEwYjk3ZTMwLTY5ZmMtNDVlZS1iN2MwLWU2ZmZmOGJjOTNhNjwveG1wTU06RG9jdW1lbnRJRD4KICA8eG1wTU06SW5zdGFuY2VJRD54bXAuaWlkOmNhNTY3YzM3LWY1MTctNDQ1Ni05Y2Y3LTc2Mzg5NWQyOWQ1NTwveG1wTU06SW5zdGFuY2VJRD4KIDwvcmRmOkRlc2NyaXB0aW9uPgo8L3JkZjpSREY+CjwveDp4bXBtZXRhPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAo8P3hwYWNrZXQgZW5kPSd3Jz8+/9sAQwAFAwQEBAMFBAQEBQUFBgcMCAcHBwcPCwsJDBEPEhIRDxERExYcFxMUGhURERghGBodHR8fHxMXIiQiHiQcHh8e/9sAQwEFBQUHBgcOCAgOHhQRFB4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4e/8AAEQgBaAFoAwEiAAIRAQMRAf/EABsAAQACAwEBAAAAAAAAAAAAAAAFBgMEBwEC/8QAPRABAAIBAgIEDAQEBgMBAAAAAAECAwQRBQYTITFBEhYiUVRxgZGSscHRFCNhoTJCUnIVQ1Ni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\"","import React, {CSSProperties} from 'react'\r\nimport classes from 'components/_shared/Flex/Flex.module.scss'\r\nimport classnames from 'classnames'\r\n\r\ntype RowProps = {\r\n    children?: Array<React.ReactElement | boolean> | React.ReactElement | boolean\r\n    verticalAlign?: 'start' | 'end' | 'center' | 'space-between' | 'space-around'\r\n    horizontalAlign?: 'start' | 'end' | 'center' | 'space-between' | 'space-around'\r\n    padding?: number | string\r\n    margin?: number | string\r\n    gap?: number\r\n    bordered?: boolean\r\n}\r\n\r\nexport const Row: React.FC<RowProps> = ({\r\n                                            children,\r\n                                            verticalAlign = 'start',\r\n                                            horizontalAlign = 'start',\r\n                                            padding = 0,\r\n                                            gap = 0,\r\n                                            bordered\r\n                                        }) => {\r\n    return <div\r\n        className={classnames(\r\n            classes.row,\r\n            {[classes.bordered]: bordered})\r\n        }\r\n        style={{\r\n            alignItems: 'stretch',\r\n            justifyContent: horizontalAlign,\r\n            padding\r\n        }}\r\n    >\r\n        {(children instanceof Array) && children.map((child, index) => {\r\n                if (typeof child === 'boolean') return false\r\n                return React.cloneElement(child, {\r\n                    key: index,\r\n                    style: {\r\n                        marginRight: (index === children.length - 1) ? 0 : gap,\r\n                        justifyContent: verticalAlign\r\n                    },\r\n                    className: child.props.className + ' ' + classes.col\r\n                })\r\n            }\r\n        )}\r\n\r\n        {children && typeof children !== 'boolean' && !(children instanceof Array) &&\r\n            React.cloneElement(children, {\r\n                style: {\r\n                    marginRight: 0,\r\n                    justifyContent: verticalAlign\r\n                },\r\n                className: children.props.className + ' ' + classes.col\r\n            })\r\n        }\r\n    </div>\r\n}\r\n\r\ntype ColProps = {\r\n    verticalAlign?: 'start' | 'end' | 'center' | 'space-between' | 'space-around'\r\n    horizontalAlign?: 'start' | 'end' | 'center' | 'baseline' | 'stretch'\r\n    style?: CSSProperties,\r\n    padding?: number | string,\r\n    gap?: number,\r\n    bordered?: boolean,\r\n    stretch?: boolean,\r\n}\r\n\r\nexport const Col: React.FC<ColProps> = ({\r\n                                            children,\r\n                                            style,\r\n                                            verticalAlign,\r\n                                            horizontalAlign = 'start',\r\n                                            padding = 0,\r\n                                            gap = 0,\r\n                                            bordered,\r\n    stretch= false\r\n                                        }) => {\r\n\r\n    return <div className={classnames(classes.col, {[classes.bordered]: bordered})} style={{\r\n        padding,\r\n        marginRight: style?.marginRight,\r\n        alignItems: horizontalAlign,\r\n        justifyContent: verticalAlign ? verticalAlign : style?.justifyContent,\r\n        flex: stretch ? 1 : undefined\r\n    }}>\r\n\r\n        {React.Children.map(children, child => <div className={classes.item} style={{marginBottom: gap}}>\r\n            {child}\r\n        </div>)}\r\n    </div>\r\n}\r\n\r\nexport const Space: React.FC = () => {\r\n    return <div className={classes.space}/>\r\n}\r\n","import React from 'react'\r\nimport classes from './Spinner.module.scss'\r\n\r\ntype PropsType = {\r\n    size?: number\r\n    color?: string\r\n    thickness?: number\r\n    fullscreen?: boolean\r\n}\r\nconst Spinner: React.FC<PropsType> = ({\r\n                                          size = 20,\r\n                                          color = '#00BFFF',\r\n                                          thickness = 2,\r\n    fullscreen= false\r\n                                      }) => {\r\n    const style = {\r\n        width: size,\r\n        height: size,\r\n        borderWidth: thickness,\r\n        borderLeftColor: color,\r\n        borderBottomColor: color,\r\n        borderRightColor: color\r\n    }\r\n\r\n    return (\r\n        <div className={fullscreen ? classes.fullscreen : ''}>\r\n            <div className={classes.spinner} style={style}/>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Spinner","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dark\":\"UserControl_dark__27lRZ\",\"userControl\":\"UserControl_userControl__3Z9wT\",\"userControlDropdown\":\"UserControl_userControlDropdown__gUMyi\",\"userControlUsername\":\"UserControl_userControlUsername__2sAyG\",\"userControlList\":\"UserControl_userControlList__chgpW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dark\":\"InputFile_dark__2Fp8r\",\"inputFile\":\"InputFile_inputFile__18XvK\",\"spinner\":\"InputFile_spinner__3doCd\",\"dragActive\":\"InputFile_dragActive__34iKf\",\"cropperContainer\":\"InputFile_cropperContainer__E__H1\",\"imageCrop\":\"InputFile_imageCrop__1UKyo\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dark\":\"ModalWindow_dark__3BBPR\",\"header\":\"ModalWindow_header__1T75e\",\"title\":\"ModalWindow_title__6f-1N\",\"button\":\"ModalWindow_button__LweG5\",\"content\":\"ModalWindow_content__1Ybj6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dark\":\"SidebarSubscriptions_dark__1-YTr\",\"sidebarFriends\":\"SidebarSubscriptions_sidebarFriends__i-7Oz\",\"Title\":\"SidebarSubscriptions_Title__3o_gc\",\"Avatars\":\"SidebarSubscriptions_Avatars__21pa8\",\"Link\":\"SidebarSubscriptions_Link__3DCTS\"};","import breakpoints from 'assets/styles/breakpoints.module.scss'\r\nimport {useDispatch, useSelector} from 'react-redux'\r\nimport {useEffect, useState} from 'react'\r\nimport {getAuthUserData} from 'redux/reducers/auth.reducer'\r\nimport {StateType} from 'redux/store'\r\n\r\nexport const useAuthCheck = () => {\r\n    const dispatch = useDispatch()\r\n    useEffect(() => {\r\n        dispatch(getAuthUserData())\r\n    }, [dispatch])\r\n\r\n    return useSelector((state: StateType) => state.auth.authorized)\r\n}\r\n\r\nexport const useBreakpoint = () => {\r\n    const [width, setWidth] = useState<number>(0)\r\n\r\n    const updateDimensions = () => {\r\n        setWidth(window.innerWidth)\r\n    }\r\n\r\n    useEffect(() => {\r\n        updateDimensions()\r\n        window.addEventListener('resize', updateDimensions)\r\n\r\n        return () => window.addEventListener('resize', updateDimensions);\r\n    }, [])\r\n\r\n    const breakpointsObject: {[key: string]: boolean} = {}\r\n    for (const [key, value] of Object.entries(breakpoints)) {\r\n        breakpointsObject[key] = width < Number.parseInt(value)\r\n    }\r\n\r\n    return breakpointsObject\r\n}\r\n\r\n\r\nconst getWindowDimensions = (): [number, number] => ([ window.innerWidth,  window.innerHeight])\r\nexport const useWindowDimensions = () => {\r\n    const [windowDimensions, setWindowDimensions] = useState<[number, number]>(getWindowDimensions())\r\n    useEffect(() => {\r\n        const handleResize = () => setWindowDimensions(getWindowDimensions())\r\n        window.addEventListener('resize', handleResize)\r\n        return () => window.removeEventListener('resize', handleResize)\r\n    }, [])\r\n\r\n    return windowDimensions\r\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"btnSmall\":\"12\",\"btnMedium\":\"15\",\"btnLarge\":\"18\",\"avatarProfile\":\"130\",\"avatarProfilePhoneTablet\":\"100\",\"appBarHeight\":\"40\",\"bottomNavHeight\":\"40\",\"dark\":\"sizes_dark__3lth6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dark\":\"Header_dark__2owyw\",\"header\":\"Header_header__2S68b\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dark\":\"Spinner_dark__m5peb\",\"fullscreen\":\"Spinner_fullscreen__2hfx6\",\"spinner\":\"Spinner_spinner__3_Y-p\",\"spin\":\"Spinner_spin__318Pr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dark\":\"InputImageCrop_dark__2fSG9\",\"cropperContainer\":\"InputImageCrop_cropperContainer__3wPGC\",\"imageCrop\":\"InputImageCrop_imageCrop__3lPPY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dark\":\"InputText_dark__2Et6v\",\"input\":\"InputText_input__1ftC7\",\"error\":\"InputText_error__3oZjy\"};","import React, {CSSProperties} from 'react'\r\nimport classnames from 'classnames'\r\nimport classes from './Button.module.scss'\r\nimport colors from 'assets/styles/colors.module.scss'\r\nimport sizes from 'assets/styles/sizes.module.scss'\r\nimport Spinner from 'components/_shared/Spinner/Spinner'\r\n\r\ntype ButtonTypes = 'primary' | 'secondary' | 'neutral' | 'text' | 'link' | 'cancel'\r\ntype ButtonSizes = 'sm' | 'md' | 'lg' | 'xl'\r\n\r\ntype ButtonType = {\r\n    onClick?: (e: React.MouseEvent) => void\r\n    type?: ButtonTypes\r\n    size?: ButtonSizes\r\n    disabled?: boolean\r\n    spinner?: boolean\r\n    style?: CSSProperties\r\n}\r\n\r\nexport const Button: React.FC<ButtonType> & {\r\n    Icon: React.FC,\r\n    Text: React.FC,\r\n    Spinner: React.FC<{type: ButtonTypes, size: ButtonSizes}>,\r\n    Badge: React.FC\r\n} = ({\r\n         children,\r\n         onClick,\r\n         type = 'primary',\r\n         size = 'md',\r\n         disabled = false,\r\n         spinner = false,\r\n         style\r\n     }) => {\r\n\r\n    return (\r\n        <button onClick={onClick} disabled={disabled || spinner} style={style}\r\n                className={classnames(\r\n                    classes.button,\r\n                    {[classes.primary]: !type || type === 'primary'},\r\n                    {[classes.secondary]: type === 'secondary'},\r\n                    {[classes.neutral]: type === 'neutral'},\r\n                    {[classes.text]: type === 'text'},\r\n                    {[classes.cancel]: type === 'cancel'},\r\n                    {[classes.link]: type === 'link'},\r\n\r\n                    {[classes.spinner]: spinner},\r\n\r\n                    {[classes[size]]: size },\r\n                )}>\r\n\r\n            <div className={classnames(\r\n                classes.content,\r\n                {[classes.spinner]: spinner}\r\n            )}>\r\n                {children}\r\n                {spinner && <div className={classes.buttonSpinner}>\r\n                    <Button.Spinner size={size} type={type}/>\r\n                </div>}\r\n            </div>\r\n\r\n        </button>\r\n    )\r\n\r\n}\r\n\r\nButton.Icon = ({children}) => {\r\n    return <div className={classes.contentIcon}>\r\n        {children}\r\n    </div>\r\n}\r\n\r\nButton.Text = ({children}) => {\r\n    return <div className={classes.contentText}>\r\n        {children}\r\n    </div>\r\n}\r\n\r\nButton.Spinner = ({type, size}) => {\r\n    const spinnerColor = (type === 'primary' || type === 'cancel') ? colors.fontLight : colors.fontDark\r\n    const spinnerSizes: {[key: string]: string} = {\r\n        sm: sizes.btnSmall,\r\n        md: sizes.btnMedium,\r\n        lg: sizes.btnLarge\r\n    }\r\n    const spinnerSize = Number.parseInt(spinnerSizes[size])\r\n    return <Spinner color={spinnerColor} size={spinnerSize}/>\r\n}\r\n\r\nButton.Badge = ({children}) => {\r\n    return <div className={classes.badge}>{children}</div>\r\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dark\":\"InputPassword_dark__1GIZL\",\"input\":\"InputPassword_input__la6af\",\"error\":\"InputPassword_error__ejdQ3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dark\":\"InputCheckbox_dark__j7CXB\",\"checkbox\":\"InputCheckbox_checkbox__3Mzh6\",\"box\":\"InputCheckbox_box__2QMoh\"};","import moment from 'moment'\r\n\r\nexport const capitalize = (sourceString: string): string => {\r\n    return sourceString.charAt(0).toUpperCase() + sourceString.slice(1)\r\n}\r\n\r\nexport const formatDate = (date: Date | string, format: string = 'DD.MM.YYYY') => {\r\n    return moment(date).format(format)\r\n}\r\n\r\nexport const checkOnline = (lastSeenDate?: string) => {\r\n    if (!lastSeenDate) return false\r\n    const currentDate = new Date()\r\n    const date = new Date(lastSeenDate)\r\n    return currentDate.getTime() - date.getTime() < 5 * 60 * 1000\r\n}\r\n\r\nexport const trimString = (s: string, length: number = 5) => {\r\n    return (s.length > length) ? s.slice(0, length) + '...' : s\r\n}","import {coreApi, handleError, handleResponse} from './core.api'\r\nimport {CommentType, PostType} from 'types/types'\r\n\r\nexport type PostsDataType = { posts: Array<PostType> }\r\nexport type PostDataType = { post: PostType }\r\nexport type PostCommentDataType = { comment: CommentType }\r\n\r\nexport type NewPostDataType = {\r\n    post: PostType\r\n}\r\n\r\nexport const postApi = {\r\n    getPosts: () => coreApi\r\n        .get(`/post`)\r\n        .then(handleResponse<PostsDataType>())\r\n        .catch(handleError()),\r\n    getFeed: () => coreApi\r\n        .get(`/post/feed`)\r\n        .then(handleResponse<PostsDataType>())\r\n        .catch(handleError()),\r\n    getUserPosts: (username: string) => coreApi\r\n        .get(`/user/${username}/posts`)\r\n        .then(handleResponse<PostsDataType>())\r\n        .catch(handleError()),\r\n    getPost: (postId: string) => coreApi\r\n        .get(`/post/${postId}`)\r\n        .then(handleResponse<PostDataType>())\r\n        .catch(handleError()),\r\n    addPost: (text: string) => coreApi\r\n        .post(`/post`, { text })\r\n        .then(handleResponse<NewPostDataType>())\r\n        .catch(handleError()),\r\n    deletePost: (id: string) => coreApi\r\n        .delete(`/post/${id}`)\r\n        .then(handleResponse())\r\n        .catch(handleError()),\r\n    addLike: (id: string) => coreApi\r\n        .post(`/post/${id}/like`)\r\n        .then(handleResponse())\r\n        .catch(handleError()),\r\n    deleteLike: (id: string) => coreApi\r\n        .delete(`/post/${id}/like`)\r\n        .then(handleResponse())\r\n        .catch(handleError()),\r\n    addPostComment: (postId: string, text: string) => coreApi\r\n        .post(`post/${postId}/comment`, { text })\r\n        .then(handleResponse<PostCommentDataType>())\r\n        .catch(handleError()),\r\n    deletePostComment: (commentId: string) => coreApi\r\n        .delete(`post/comment/${commentId}`)\r\n        .then(handleResponse())\r\n        .catch(handleError())\r\n}","// INITIAL STATE\r\nimport {AuthUserDataType, CommentType, PostType, UserItemDataType} from 'types/types'\r\nimport {InferActionsTypes, ThunkType} from '../store'\r\nimport {postApi} from 'api/post.api'\r\nimport {ResultCodes} from 'api/core.api'\r\nimport {authActions, AuthActionType} from './auth.reducer'\r\n\r\nconst initialState = {\r\n    posts: [] as Array<PostType>,\r\n    isAddPostPending: false as boolean\r\n}\r\nexport type PostsStateType = typeof initialState\r\n\r\n// REDUCER\r\nconst reducer = (state: PostsStateType = initialState, action: PostsActionType): PostsStateType => {\r\n    switch (action.type) {\r\n        case 'rsn/post/SET_POSTS': {\r\n            return {\r\n                ...state,\r\n                posts: action.posts\r\n            }\r\n        }\r\n        case 'rsn/post/ADD_POST': {\r\n            return {\r\n                ...state,\r\n                posts: [...state.posts, action.post]\r\n            }\r\n        }\r\n        case 'rsn/post/SET_ADD_POST_PENDING': {\r\n            return {\r\n                ...state,\r\n                isAddPostPending: action.isPending\r\n            }\r\n        }\r\n        case 'rsn/post/DELETE_POST': {\r\n            return {\r\n                ...state,\r\n                posts: state.posts.filter(post => post._id !== action.id)\r\n            }\r\n        }\r\n        case 'rsn/post/ADD_POST_LIKE': {\r\n            const user: UserItemDataType = {\r\n                _id: action.user._id,\r\n                username: action.user.username,\r\n                firstName: action.user.firstName,\r\n                lastName: action.user.lastName,\r\n                avatar: action.user.avatar,\r\n                subscriptions: action.user.subscriptions,\r\n                updatedAt: Date.now().toString()\r\n            }\r\n            return {\r\n                ...state,\r\n                posts: state.posts.map(post => (post._id !== action.postId) ? post : {\r\n                    ...post,\r\n                    likes: [...post.likes, user]\r\n                })\r\n            }\r\n        }\r\n        case 'rsn/post/DELETE_POST_LIKE': {\r\n            return {\r\n                ...state,\r\n                posts: state.posts.map(post => (post._id !== action.postId) ? post : {\r\n                    ...post,\r\n                    likes: post.likes.filter(user => user._id !== action.user._id)\r\n                })\r\n            }\r\n        }\r\n        case 'rsn/post/ADD_POST_COMMENT': {\r\n            return {\r\n                ...state,\r\n                posts: state.posts.map(post => (post._id !== action.postId) ? post : {\r\n                    ...post,\r\n                    comments: [...post.comments, action.comment]\r\n                })\r\n            }\r\n        }\r\n        case 'rsn/post/DELETE_POST_COMMENT': {\r\n            return {\r\n                ...state,\r\n                posts: state.posts.map(post => (!post.comments.map(comment => comment._id).includes(action.commentId)) ?\r\n                    post :\r\n                    {...post, comments: post.comments.filter(comment => comment._id !== action.commentId)}\r\n                )\r\n            }\r\n        }\r\n        default: {\r\n            return state\r\n        }\r\n    }\r\n}\r\nexport default reducer\r\n\r\nexport const postsActions = {\r\n    setPosts: (posts: Array<PostType>) => ({type: 'rsn/post/SET_POSTS', posts} as const),\r\n    addPost: (post: PostType) => ({type: 'rsn/post/ADD_POST', post} as const),\r\n    deletePost: (id: string) => ({type: 'rsn/post/DELETE_POST', id} as const),\r\n    setAddPostPending: (isPending: boolean) => ({type: 'rsn/post/SET_ADD_POST_PENDING', isPending} as const),\r\n    addPostLike: (postId: string, user: AuthUserDataType) => ({type: 'rsn/post/ADD_POST_LIKE', postId, user} as const),\r\n    deletePostLike: (postId: string, user: AuthUserDataType) => ({\r\n        type: 'rsn/post/DELETE_POST_LIKE',\r\n        postId,\r\n        user\r\n    } as const),\r\n    addPostComment: (postId: string, comment: CommentType) => ({\r\n        type: 'rsn/post/ADD_POST_COMMENT',\r\n        postId,\r\n        comment\r\n    } as const),\r\n    deletePostComment: (commentId: string) => ({type: 'rsn/post/DELETE_POST_COMMENT', commentId} as const)\r\n}\r\nexport type PostsActionType = ReturnType<InferActionsTypes<typeof postsActions>>\r\n\r\nexport const getPost = (postId: string): ThunkType<PostsActionType> => async (dispatch) => {\r\n    const res = await postApi.getPost(postId)\r\n    if (res.resultCode === ResultCodes.success) {\r\n        dispatch(postsActions.setPosts([res.data.post]))\r\n    }\r\n    if (res.resultCode === ResultCodes.error) {\r\n        console.log(res)\r\n    }\r\n}\r\n\r\nexport const getFeedPosts = (): ThunkType<PostsActionType> => async (dispatch) => {\r\n    const res = await postApi.getFeed()\r\n    if (res.resultCode === ResultCodes.success) {\r\n        dispatch(postsActions.setPosts(res.data.posts))\r\n    }\r\n    if (res.resultCode === ResultCodes.error) {\r\n        console.log(res)\r\n    }\r\n}\r\n\r\nexport const getUserPosts = (username: string): ThunkType<PostsActionType> => async (dispatch) => {\r\n    const res = await postApi.getUserPosts(username)\r\n\r\n    if (res.resultCode === ResultCodes.success) {\r\n        dispatch(postsActions.setPosts(res.data.posts))\r\n    }\r\n    if (res.resultCode === ResultCodes.error) {\r\n        console.log(res)\r\n    }\r\n}\r\nexport const addPost = (text: string): ThunkType<PostsActionType | AuthActionType> => async (dispatch) => {\r\n    dispatch(postsActions.setAddPostPending(true))\r\n    const res = await postApi.addPost(text)\r\n    dispatch(postsActions.setAddPostPending(false))\r\n    if (res.resultCode === ResultCodes.success) {\r\n        console.log(res)\r\n        dispatch(postsActions.addPost(res.data.post))\r\n    }\r\n    if (res.resultCode === ResultCodes.authError) {\r\n        dispatch(authActions.clearUser())\r\n    }\r\n    if (res.resultCode === ResultCodes.error) {\r\n        console.log(res)\r\n    }\r\n}\r\nexport const deletePost = (id: string): ThunkType<PostsActionType> => async (dispatch) => {\r\n    const res = await postApi.deletePost(id)\r\n    if (res.resultCode === ResultCodes.success) {\r\n        dispatch(postsActions.deletePost(id))\r\n    }\r\n    if (res.resultCode === ResultCodes.error) {\r\n        console.log(res)\r\n    }\r\n}\r\n\r\nexport const addPostLike = (id: string): ThunkType<PostsActionType> => async (dispatch, getState) => {\r\n    const user = getState().auth.user\r\n    const res = await postApi.addLike(id)\r\n    if ((res.resultCode === ResultCodes.success) && user) {\r\n        dispatch(postsActions.addPostLike(id, user))\r\n    }\r\n    if (res.resultCode === ResultCodes.error) {\r\n        console.log(res)\r\n    }\r\n}\r\n\r\nexport const deletePostLike = (id: string): ThunkType<PostsActionType> => async (dispatch, getState) => {\r\n    const user = getState().auth.user\r\n    const res = await postApi.deleteLike(id)\r\n    if ((res.resultCode === ResultCodes.success) && user) {\r\n        dispatch(postsActions.deletePostLike(id, user))\r\n    }\r\n    if (res.resultCode === ResultCodes.error) {\r\n        console.log(res)\r\n    }\r\n}\r\n\r\nexport const addPostComment = (postId: string, text: string): ThunkType<PostsActionType> => async (dispatch, getState) => {\r\n    const user = getState().auth.user\r\n    const res = await postApi.addPostComment(postId, text)\r\n    if ((res.resultCode === ResultCodes.success) && user) {\r\n        dispatch(postsActions.addPostComment(postId, res.data.comment))\r\n    }\r\n    if (res.resultCode === ResultCodes.error) {\r\n        console.log(res)\r\n    }\r\n}\r\n\r\nexport const deletePostComment = (commentId: string): ThunkType<PostsActionType> => async (dispatch) => {\r\n    const res = await postApi.deletePostComment(commentId)\r\n    if ((res.resultCode === ResultCodes.success)) {\r\n        dispatch(postsActions.deletePostComment(commentId))\r\n    }\r\n    if (res.resultCode === ResultCodes.error) {\r\n        console.log(res)\r\n    }\r\n}","import {Controller, RegisterOptions} from 'react-hook-form'\r\nimport {Control} from 'react-hook-form/dist/types/form'\r\nimport React from 'react'\r\nimport classes from './InputText.module.scss'\r\nimport {Item} from 'components/_shared/Form/Form'\r\n\r\ntype InputTextPropsType = {\r\n    name: string,\r\n    label?: string,\r\n    placeholder?: string,\r\n    rules?: RegisterOptions,\r\n    control?: Control,\r\n    disabled?: boolean\r\n    autoFocus?: boolean\r\n}\r\n\r\nexport const InputText: React.FC<InputTextPropsType> = ({\r\n                                                            name,\r\n                                                            label,\r\n                                                            rules,\r\n                                                            control,\r\n                                                            disabled = false,\r\n                                                            autoFocus = false,\r\n                                                            placeholder\r\n                                                        }) => {\r\n    return <Controller\r\n        control={control}\r\n        name={name}\r\n        rules={rules}\r\n        render={({field, fieldState}) => <Item label={label} required={!!rules?.required} error={fieldState.error}\r\n                                               disabled={disabled}>\r\n            <input\r\n                type={'text'}\r\n                className={`${classes.input} ${fieldState.error ? classes.error : ''}`}\r\n                name={field.name}\r\n                value={field.value}\r\n                onChange={field.onChange}\r\n                disabled={disabled}\r\n                autoFocus={autoFocus}\r\n                placeholder={placeholder}\r\n            />\r\n        </Item>}\r\n    />\r\n}","import 'reactjs-popup/dist/index.css'\r\nimport React from 'react'\r\nimport './popupjs.css'\r\nimport Popup from 'reactjs-popup'\r\nimport {XLg} from 'react-bootstrap-icons'\r\nimport classes from './ModalWindow.module.scss'\r\nimport {Button} from 'components/_shared/Button/Button'\r\n\r\ntype Props = {\r\n    title?: string\r\n    open: boolean\r\n    close?: () => void\r\n}\r\n\r\nexport const ModalWindow: React.FC<Props> = ({title, close, open, children}) => {\r\n    return <Popup open={open} modal nested onClose={close}\r\n                  contentStyle={{borderRadius: 5, padding: '10px'}}\r\n                  closeOnDocumentClick={false}>\r\n        {(title || close) && <div className={classes.header}>\r\n            <div className={classes.title}>{title}</div>\r\n            <div className={classes.button} style={{marginBottom: 10}}>\r\n                <Button type={'cancel'} size='sm' onClick={close}>\r\n                    <Button.Icon><XLg/></Button.Icon>\r\n                </Button>\r\n            </div>\r\n        </div>}\r\n        <div className={classes.content}>\r\n            {children}\r\n        </div>\r\n    </Popup>\r\n}","import React from 'react'\r\nimport {Controller, RegisterOptions} from 'react-hook-form'\r\nimport classes from './InputPassword.module.scss'\r\nimport {Control} from 'react-hook-form/dist/types/form'\r\nimport {Item} from 'components/_shared/Form/Form'\r\n\r\ntype InputPasswordPropsType = {\r\n    name: string,\r\n    label?: string,\r\n    rules?: RegisterOptions,\r\n    control?: Control,\r\n    disabled?: boolean\r\n}\r\nexport const InputPassword: React.FC<InputPasswordPropsType> = ({\r\n                                                                    name,\r\n                                                                    label,\r\n                                                                    rules,\r\n                                                                    control,\r\n                                                                    disabled = false\r\n                                                                }) => {\r\n    return <Controller\r\n        control={control}\r\n        name={name}\r\n        rules={rules}\r\n        render={({field, fieldState}) => <Item label={label} required={!!rules?.required} error={fieldState.error}\r\n                                               disabled={disabled}>\r\n            <input\r\n                type={'password'}\r\n                className={`${classes.input} ${fieldState.error ? classes.error : ''}`}\r\n                name={field.name}\r\n                value={field.value}\r\n                onChange={field.onChange}\r\n                disabled={disabled}\r\n            />\r\n        </Item>}\r\n    />\r\n}","import {AvatarType, ContactsType, FormDataType, LocationType, UserDataType} from '../types/types'\r\nimport {coreApi, handleError, handleResponse} from './core.api'\r\n\r\n// used for getting and updating user profile\r\nexport type EditProfileDataType = {\r\n    firstName: string,\r\n    lastName: string,\r\n    birthDate: string | null,\r\n    bio: string | null,\r\n    contacts: ContactsType | null,\r\n    location: LocationType | null,\r\n}\r\n\r\nexport const profileApi = {\r\n    getProfile: (username: string) => coreApi\r\n        .get(`/profile/${username}`)\r\n        .then(handleResponse<{ user: UserDataType }>())\r\n        .catch(handleError()),\r\n\r\n    updateProfile: (profileData: EditProfileDataType) => coreApi\r\n        .put('/profile', {...profileData})\r\n        .then(handleResponse())\r\n        .catch(handleError()),\r\n\r\n    updateAvatar: (formData: FormDataType) => coreApi\r\n        .put('/profile/avatar', formData)\r\n        .then(handleResponse<{ avatar: AvatarType }>())\r\n        .catch(handleError()),\r\n\r\n    updateCoverImage: (formData: FormDataType) => coreApi\r\n        .put('/profile/cover', formData)\r\n        .then(handleResponse<{ coverImage: string }>())\r\n        .catch(handleError()),\r\n\r\n    updateStatus: (status: string) => coreApi\r\n        .put('/profile/status', { status })\r\n        .then(handleResponse())\r\n        .catch(handleError())\r\n}","import {AvatarType, FormDataType, PostType, UserDataType} from '../../types/types'\r\nimport {profileApi, EditProfileDataType} from '../../api/profile.api'\r\nimport {ResultCodes} from '../../api/core.api'\r\nimport {InferActionsTypes, ThunkType} from '../store'\r\n\r\n// INITIAL STATE\r\nconst initialState = {\r\n    user: {} as UserDataType,\r\n    posts: [] as Array<PostType>,\r\n    isAddPostPending: false as boolean\r\n}\r\nexport type ProfileStateType = typeof initialState\r\n\r\n// REDUCER\r\nconst reducer = (state: ProfileStateType = initialState, action: ProfileActionType): ProfileStateType => {\r\n    switch (action.type) {\r\n        case 'rsn/profile/SET_PROFILE': {\r\n            return {\r\n                ...state,\r\n                user: {\r\n                    ...state.user,\r\n                    ...action.userProfileData,\r\n                },\r\n            }\r\n        }\r\n        case 'rsn/profile/UPDATE_PROFILE': {\r\n            return {\r\n                ...state,\r\n                user: {\r\n                    ...state.user,\r\n                    firstName: action.userProfileData.firstName,\r\n                    lastName: action.userProfileData.lastName,\r\n                    bio: action.userProfileData.bio,\r\n                    birthDate: action.userProfileData.birthDate,\r\n                    location: {\r\n                        ...state.user.location,\r\n                        ...action.userProfileData.location\r\n                    },\r\n                    contacts: {\r\n                        ...state.user.contacts,\r\n                        ...action.userProfileData.contacts\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        case 'rsn/profile/SET_AVATAR': {\r\n            return {\r\n                ...state,\r\n                user: {\r\n                    ...state.user,\r\n                    avatar: {...state.user.avatar, ...action.avatar}\r\n                },\r\n                // post: state.post.map(post => ({...post, author: {...post.author, avatar: action.avatar}}))\r\n            }\r\n        }\r\n        case 'rsn/profile/SET_COVER_IMAGE': {\r\n            return {\r\n                ...state,\r\n                user: {\r\n                    ...state.user,\r\n                    coverImage: action.coverImage\r\n                }\r\n            }\r\n        }\r\n        case 'rsn/profile/SET_STATUS': {\r\n            return {\r\n                ...state,\r\n                user: {\r\n                    ...state.user,\r\n                    status: action.status\r\n                }\r\n            }\r\n        }\r\n        default: {\r\n            return state\r\n        }\r\n    }\r\n}\r\nexport default reducer\r\n\r\n//regions ACTION CREATORS\r\nexport const profileActions = {\r\n    setProfile: (userProfileData: UserDataType) => ({type: 'rsn/profile/SET_PROFILE', userProfileData} as const),\r\n    updateProfile: (userProfileData: EditProfileDataType) => ({type: 'rsn/profile/UPDATE_PROFILE', userProfileData} as const),\r\n    setAvatar: (avatar: AvatarType) => ({type: 'rsn/profile/SET_AVATAR', avatar} as const),\r\n    setCoverImage: (coverImage: string) => ({type: 'rsn/profile/SET_COVER_IMAGE', coverImage} as const),\r\n    setStatus: (status: string) => ({type: 'rsn/profile/SET_STATUS', status} as const)\r\n}\r\nexport type ProfileActionType = ReturnType<InferActionsTypes<typeof profileActions>>\r\n//endregion\r\n\r\n//region THUNK CREATORS\r\nexport const getUserData = (username: string): ThunkType<ProfileActionType> => async (dispatch) => {\r\n    const res = await profileApi.getProfile(username)\r\n\r\n    if (res.resultCode === ResultCodes.success) {\r\n        dispatch(profileActions.setProfile(res.data.user))\r\n    }\r\n    if (res.resultCode === ResultCodes.error) {\r\n        console.log(res)\r\n    }\r\n}\r\n\r\nexport const updateStatus = (status: string): ThunkType<ProfileActionType> => async (dispatch) => {\r\n    const res = await profileApi.updateStatus(status)\r\n\r\n    if (res.resultCode === ResultCodes.success) {\r\n        dispatch(profileActions.setStatus(status))\r\n    }\r\n    if (res.resultCode === ResultCodes.error) {\r\n        console.log(res)\r\n    }\r\n}\r\n\r\nexport const updateProfile = (profileData: EditProfileDataType): ThunkType<ProfileActionType> => async (dispatch) => {\r\n    const res = await profileApi.updateProfile(profileData)\r\n\r\n    if (res.resultCode === ResultCodes.success) {\r\n        dispatch(profileActions.updateProfile(profileData))\r\n    }\r\n    if (res.resultCode === ResultCodes.error) {\r\n        console.log(res)\r\n    }\r\n}\r\n\r\nexport const updateAvatar = (formData: FormDataType): ThunkType<ProfileActionType> => async (dispatch) => {\r\n    const res = await profileApi.updateAvatar(formData)\r\n    if (res.resultCode === ResultCodes.success) {\r\n        dispatch(profileActions.setAvatar(res.data.avatar))\r\n    }\r\n    if (res.resultCode === ResultCodes.error) {\r\n        console.log(res)\r\n    }\r\n}\r\n\r\nexport const updateCoverImage = (formData: FormDataType): ThunkType<ProfileActionType> => async (dispatch) => {\r\n    const res = await profileApi.updateCoverImage(formData)\r\n    if (res.resultCode === ResultCodes.success) {\r\n        dispatch(profileActions.setCoverImage(res.data.coverImage))\r\n    }\r\n    if (res.resultCode === ResultCodes.error) {\r\n        console.log(res)\r\n    }\r\n}\r\n\r\n\r\n\r\n//endregion"],"sourceRoot":""}