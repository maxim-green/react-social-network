(this["webpackJsonpreact-social-network"]=this["webpackJsonpreact-social-network"]||[]).push([[6],{263:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(20),i=a(0),r=a(31),c=n.c,o=function(){var e=Object(n.b)();return Object(i.useEffect)((function(){e(Object(r.c)())}),[e]),c((function(e){return e.auth.authorized}))}},264:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(34),i=(a(0),a(269)),r=a.n(i),c=a(18),o=a(1),s=function(e){var t=e.name,a=e.label,i=e.rules,s=e.control,l=e.rows,d=void 0===l?2:l,u=e.disabled,j=void 0!==u&&u,b=e.placeholder;return Object(o.jsx)(n.a,{control:s,name:t,rules:i,render:function(e){var t=e.field,n=e.fieldState;return Object(o.jsx)(c.d,{label:a,required:!(null===i||void 0===i||!i.required),error:n.error,disabled:j,children:Object(o.jsx)("textarea",{className:"".concat(r.a.textarea," ").concat(n.error?r.a.error:""),name:t.name,value:t.value,onChange:t.onChange,rows:d,disabled:j,placeholder:b})})}})}},269:function(e,t,a){e.exports={dark:"InputTextarea_dark__1Bvup",textarea:"InputTextarea_textarea__3KxMk",error:"InputTextarea_error__lL7Wo"}},275:function(e,t,a){"use strict";a(0);var n=a(310),i=a(276),r=a.n(i),c=a(50),o=a(9),s=a(18),l=a(264),d=a(90),u=a(20),j=a(1);t.a=function(){var e=Object(u.c)((function(e){return e.posts.isAddPostPending})),t=Object(u.b)();return Object(j.jsx)(c.a,{children:Object(j.jsxs)(s.a,{onSubmit:function(e){var a=e.newPostText;t(Object(d.a)(a))},initialValues:{newPostText:""},resetAfterSubmit:!0,children:[Object(j.jsx)(l.a,{name:"newPostText",placeholder:"Share your thoughts and feelings!"}),Object(j.jsxs)("div",{className:r.a.controls,children:[Object(j.jsx)(o.a,{onClick:function(e){e.preventDefault(),console.log("Attach file button clicked")},type:"text",size:"sm",children:Object(j.jsx)(o.a.Icon,{children:Object(j.jsx)(n.a,{color:"#909BA4",size:18})})}),Object(j.jsx)(o.a,{type:"primary",size:"sm",spinner:e,children:Object(j.jsx)(o.a.Text,{children:"Send"})})]})]})})}},276:function(e,t,a){e.exports={dark:"NewPostInputForm_dark__2NE5q",controls:"NewPostInputForm_controls__ljI9C"}},277:function(e,t,a){"use strict";a(0);var n=a(278),i=a.n(n),r=a(285),c=a(20),o=a(90),s=a(1),l=function(e){var t=e.posts,a=e.onPostDelete,n=e.onPostDeleteLike,c=e.authorizedUserId,o=e.onPostAddLike,l=e.onAddComment,d=e.onDeleteComment;return Object(s.jsx)("div",{className:i.a.wrapper,children:t.slice().reverse().map((function(e){return Object(s.jsx)(r.a,{post:e,commentsShown:3,onPostDelete:a,onPostDeleteLike:n,onPostAddLike:o,authorizedUserId:c,onAddComment:l,onDeleteComment:d},e._id)}))})};t.a=function(e){var t=e.posts,a=Object(c.b)(),n=Object(c.c)((function(e){var t;return null===(t=e.auth.user)||void 0===t?void 0:t._id}));return Object(s.jsx)(l,{posts:t,onPostAddLike:function(e){a(Object(o.c)(e))},onPostDeleteLike:function(e){a(Object(o.g)(e))},onAddComment:function(e,t){a(Object(o.b)(e,t))},onDeleteComment:function(e){a(Object(o.f)(e))},onPostDelete:function(e){a(Object(o.e)(e))},authorizedUserId:n})}},278:function(e,t,a){e.exports={dark:"Feed_dark__tnEzM"}},317:function(e,t,a){e.exports={dark:"ProfileCoverImage_dark__n8JPv",coverImage:"ProfileCoverImage_coverImage__2MPHr",image:"ProfileCoverImage_image__2vKCI",editCoverImageButton:"ProfileCoverImage_editCoverImageButton__3D_ev"}},318:function(e,t,a){e.exports={dark:"ProfileHeader_dark__1JQK0",profileHeader:"ProfileHeader_profileHeader__2ZqRq",avatar:"ProfileHeader_avatar__2W5BG",onlineIndicator:"ProfileHeader_onlineIndicator__2MatG",profileHeaderInfo:"ProfileHeader_profileHeaderInfo__3G2TW",editProfile:"ProfileHeader_editProfile__3QyRd",name:"ProfileHeader_name__eC-9E",status:"ProfileHeader_status__3eFw5",statusEditable:"ProfileHeader_statusEditable__1zcT5",editStatus:"ProfileHeader_editStatus__3STSD",editStatusButton:"ProfileHeader_editStatusButton__1nMSR"}},320:function(e,t,a){},321:function(e,t,a){e.exports={dark:"InputDate_dark__3gKUv",input:"InputDate_input__3xeov",error:"InputDate_error__3_4n0"}},364:function(e,t,a){e.exports={dark:"OnlineIndicator_dark__1WoiS",onlineIndicator:"OnlineIndicator_onlineIndicator__2VEiW"}},365:function(e,t,a){e.exports={dark:"ProfileInfoData_dark__326VZ",profileInfoData:"ProfileInfoData_profileInfoData__1E3zZ",bio:"ProfileInfoData_bio__21H2f",profileInfoItems:"ProfileInfoData_profileInfoItems__Dmg5Y",item:"ProfileInfoData_item__1vIbm",itemTitle:"ProfileInfoData_itemTitle__1WxFM",itemIcon:"ProfileInfoData_itemIcon__1DULG",itemLabel:"ProfileInfoData_itemLabel__1r_GY",itemText:"ProfileInfoData_itemText__1dXE_"}},393:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(20),c=a(19),o=a(94),s=a(90),l=a(275),d=a(277),u=a(10),j=a(317),b=a.n(j),f=a(383),m=a.p+"static/media/cover-default.70b51b24.jpg",O=a(9),v=a(115),x=a(92),h=a(93),_=a(1),p=function(e){var t=e.img,a=void 0===t?m:t,i=e.owner,r=void 0!==i&&i,c=e.onCoverImageSubmit,o=Object(n.useState)(!1),s=Object(u.a)(o,2),l=s[0],d=s[1],j=Object(h.a)().tablet;Object(n.useEffect)((function(){d(!1)}),[a]);var p=function(){return d(!0)};return Object(_.jsxs)("div",{className:b.a.coverImage,children:[Object(_.jsxs)("div",{className:b.a.editCoverImageButton,children:[r&&!j&&Object(_.jsxs)(O.a,{type:"neutral",onClick:p,size:"sm",children:[Object(_.jsx)(O.a.Icon,{children:Object(_.jsx)(f.a,{width:15,height:15})}),Object(_.jsx)(O.a.Text,{children:"Edit Cover Image"})]}),r&&j&&Object(_.jsx)(O.a,{type:"neutral",onClick:p,size:"lg",children:Object(_.jsx)(O.a.Icon,{children:Object(_.jsx)(f.a,{width:20,height:20})})})]}),Object(_.jsx)(x.a,{open:l,children:Object(_.jsx)(v.a,{aspect:3.5,onSubmit:c,closeModal:function(){return d(!1)}})}),Object(_.jsx)("img",{className:b.a.image,src:a||m,alt:""})]})},I=a(113),g=a(72),N=a.n(g),S=a(318),P=a.n(S),k=a(51),w=a(18),D=a(91),C=function(e){var t=e.onSubmit,a=e.initialStatus;return Object(_.jsx)(w.a,{onSubmit:t,submitOnBlur:!0,initialValues:{status:a},submitOnEnter:!0,children:Object(_.jsx)(D.a,{name:"status",autoFocus:!0})})},y=a(56),z=(a(319),a(320),a(321)),H=a.n(z),T=a(34),E=a(322),L=a.n(E),M=function(e){var t=e.value,a=e.onChange,i=Object(n.useState)(t?new Date(t):new Date),r=Object(u.a)(i,2),c=r[0],o=r[1];return Object(_.jsx)(L.a,{dateFormat:"dd.MM.yyyy",calendarStartDay:1,selected:c,onChange:function(e){a(e),o(e)}})},A=function(e){var t=e.name,a=e.label,n=e.rules,i=e.control,r=e.disabled,c=void 0!==r&&r;return Object(_.jsx)(T.a,{control:i,name:t,rules:n,render:function(e){var t=e.field,i=e.fieldState;return Object(_.jsx)(w.d,{label:a,required:!(null===n||void 0===n||!n.required),error:i.error,disabled:c,children:Object(_.jsx)("div",{className:H.a.input,children:Object(_.jsx)(M,{value:t.value,onChange:t.onChange})})})}})},B=a(264),F=a(29),W=function(){return[window.innerWidth,window.innerHeight]},q=a(263),U=function(e){var t=e.initialValues,a=e.onSubmit,i=e.closeModal,r=function(){var e=Object(n.useState)(W()),t=Object(u.a)(e,2),a=t[0],i=t[1];return Object(n.useEffect)((function(){var e=function(){return i(W())};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),a}(),c=Object(u.a)(r,2),o=(c[0],c[1]-Number(N.a.appBarHeight)-Number(N.a.bottomNavHeight)),s=o<600?o:600;return Object(_.jsxs)(w.a,{onSubmit:function(e){a(e),i&&i()},initialValues:t,children:[Object(_.jsx)("div",{style:{background:"white",paddingBottom:5},children:Object(_.jsxs)(F.b,{horizontalAlign:"space-between",children:[Object(_.jsx)(O.a,{size:"md",children:Object(_.jsx)(O.a.Text,{children:"Save"})}),Object(_.jsx)("div",{style:{marginLeft:"auto"},children:Object(_.jsx)(O.a,{onClick:function(e){e.preventDefault(),i&&i()},size:"md",type:"cancel",children:Object(_.jsx)(O.a.Text,{children:"Cancel"})})})]})}),Object(_.jsxs)(w.c,{height:s,children:[Object(_.jsx)(w.b,{children:Object(_.jsx)(D.a,{name:"firstName",label:"First name",rules:{required:!0}})}),Object(_.jsx)(w.b,{children:Object(_.jsx)(D.a,{name:"lastName",label:"Last name",rules:{required:!0}})}),Object(_.jsx)(w.b,{children:Object(_.jsx)(A,{name:"birthDate",label:"Birth date"})}),Object(_.jsxs)(w.b,{children:[Object(_.jsx)(D.a,{name:"location.country",label:"Country"}),Object(_.jsx)(D.a,{name:"location.city",label:"City"})]}),Object(_.jsx)(w.b,{children:Object(_.jsx)(B.a,{name:"bio",label:"Bio",rows:5})}),Object(_.jsx)(w.b,{children:Object(_.jsx)(D.a,{name:"contacts.website",label:"Website"})}),Object(_.jsx)(w.b,{children:Object(_.jsx)(D.a,{name:"contacts.vkontakte",label:"Vkontakte"})}),Object(_.jsx)(w.b,{children:Object(_.jsx)(D.a,{name:"contacts.github",label:"Github"})})]})]})},V=function(e){var t=e.closeModal,a=Object(r.c)((function(e){var t,a,n,i,r,c;return{firstName:null===(t=e.profile.user)||void 0===t?void 0:t.firstName,lastName:null===(a=e.profile.user)||void 0===a?void 0:a.lastName,birthDate:null===(n=e.profile.user)||void 0===n?void 0:n.birthDate,bio:null===(i=e.profile.user)||void 0===i?void 0:i.bio,location:null===(r=e.profile.user)||void 0===r?void 0:r.location,contacts:null===(c=e.profile.user)||void 0===c?void 0:c.contacts}})),n=Object(r.b)();Object(q.a)();return a?Object(_.jsx)(U,{closeModal:t,initialValues:a,onSubmit:function(e){n(Object(o.e)(e))}}):Object(_.jsx)(y.a,{})},G=a(384),J=a(364),K=a.n(J),R=function(e){var t=e.children;return Object(_.jsx)("div",{className:K.a.onlineIndicator,children:t})},Z=function(e){var t=e.online,a=void 0!==t&&t,i=e.owner,r=void 0!==i&&i,c=e.firstName,o=e.lastName,s=e.status,l=e.avatar,d=e.onAvatarSubmit,j=e.onStatusUpdate,b=Object(n.useState)(!1),f=Object(u.a)(b,2),m=f[0],v=f[1],x=Object(n.useState)(s||"What is your status?"),p=Object(u.a)(x,2),g=p[0],S=p[1];Object(n.useEffect)((function(){S(s||"What is your status?")}),[s]);var w=Object(n.useState)(!1),D=Object(u.a)(w,2),y=D[0],z=D[1],H=function(){return z(!0)},T=Object(h.a)(),E=T.tablet,L=T.phoneTablet;return Object(_.jsxs)("div",{className:P.a.profileHeader,children:[Object(_.jsxs)("div",{className:P.a.avatar,children:[Object(_.jsx)("button",{children:Object(_.jsx)(k.a,{smallImg:null===l||void 0===l?void 0:l.small,largeImg:null===l||void 0===l?void 0:l.large,border:!0,shadow:!0,size:L?Number.parseInt(N.a.avatarProfilePhoneTablet):Number.parseInt(N.a.avatarProfile),onEdit:r?d:void 0})}),a&&Object(_.jsx)("div",{className:P.a.onlineIndicator,children:Object(_.jsx)(R,{children:"Online"})})]}),Object(_.jsxs)("div",{className:P.a.profileHeaderInfo,children:[Object(_.jsxs)("div",{className:P.a.name,children:[c," ",o]}),r&&Object(_.jsxs)("div",{className:P.a.status,children:[Object(_.jsx)("div",{className:P.a.statusEditable,onClick:function(){v(!0)},children:g}),m&&Object(_.jsx)("div",{className:P.a.editStatus,children:Object(_.jsx)(C,{onSubmit:function(e){j(e.status),v(!1)},initialStatus:g})})]}),!r&&Object(_.jsx)("div",{className:P.a.status,children:s})]}),Object(_.jsx)("div",{className:P.a.editProfile,children:r&&Object(_.jsxs)("div",{children:[!E&&Object(_.jsxs)(O.a,{type:"secondary",onClick:H,size:"sm",children:[Object(_.jsx)(O.a.Icon,{children:Object(_.jsx)(G.a,{width:E?20:15,height:E?20:15})}),Object(_.jsx)(O.a.Text,{children:"Edit profile"})]}),E&&Object(_.jsx)(O.a,{type:"secondary",onClick:H,size:"lg",children:Object(_.jsx)(O.a.Icon,{children:Object(_.jsx)(G.a,{width:E?20:15,height:E?20:15})})}),Object(_.jsx)(I.a,{open:y,modal:!0,nested:!0,contentStyle:{borderRadius:5},closeOnDocumentClick:!1,lockScroll:!0,children:Object(_.jsx)(V,{closeModal:function(){return z(!1)}})})]})})]})},Q=a(365),Y=a.n(Q),X=a(385),$=a(386),ee=a(387),te=a(89),ae=function(e){var t=e.bio;return Object(_.jsx)(F.b,{padding:"0 0 20px",children:Object(_.jsx)("div",{className:Y.a.bio,children:t})})},ne=function(e){var t=e.icon,a=e.label,n=e.link,r=e.iconSize,c=void 0===r?16:r,o=e.children;return Object(_.jsxs)("div",{className:Y.a.item,children:[Object(_.jsxs)("div",{className:Y.a.itemTitle,children:[!!t&&Object(_.jsx)("div",{className:Y.a.itemIcon,children:i.a.createElement(t,{size:c})}),!!a&&Object(_.jsx)("div",{className:Y.a.itemLabel,children:a})]}),!n&&Object(_.jsx)("span",{className:Y.a.itemText,children:o}),!!n&&Object(_.jsx)("a",{href:n,className:Y.a.itemLink,children:o})]})},ie=function(e){var t=e.birthDate,a=e.location,n=e.contacts,i=e.bio;return Object(_.jsxs)("div",{className:Y.a.profileInfoData,children:[i&&Object(_.jsx)(ae,{bio:i}),Object(_.jsxs)("div",{className:Y.a.profileInfoItems,children:[!!t&&Object(_.jsx)(ne,{icon:X.a,iconSize:14,label:"Birthday",children:Object(te.b)(t,"MMMM, D")}),!(null===a||void 0===a||!a.country)&&!(null===a||void 0===a||!a.city)&&Object(_.jsxs)(ne,{icon:$.a,iconSize:15,label:"Location",children:[a.country,", ",a.city]}),!(null===n||void 0===n||!n.website)&&Object(_.jsx)(ne,{icon:ee.a,label:"Website",link:"http://"+n.website,children:n.website})]})]})},re=a(50),ce=function(e){var t=e.user,a=e.isOwner,n=e.onAvatarSubmit,i=e.onCoverImageSubmit,r=e.onStatusUpdate;return Object(_.jsxs)(re.a,{children:[Object(_.jsx)(p,{owner:a,img:t.coverImage,onCoverImageSubmit:i}),Object(_.jsx)(Z,{online:Object(te.a)(t.updatedAt),owner:a,firstName:t.firstName,lastName:t.lastName,status:t.status,avatar:t.avatar,onAvatarSubmit:n,onStatusUpdate:r}),Object(_.jsx)(ie,{birthDate:t.birthDate,location:t.location,contacts:t.contacts,bio:t.bio})]})},oe=a(303);t.default=function(){var e=Object(c.g)().username,t=Object(r.b)();Object(n.useEffect)((function(){e&&(t(Object(o.b)(e)),t(Object(s.j)(e)))}),[e,t]);var a=Object(r.c)((function(e){return e.auth.user})),i=Object(r.c)((function(e){return e.profile.user})),u=(null===a||void 0===a?void 0:a._id)===i._id,j=Object(r.c)((function(e){return e.posts.posts}));return a||e?a&&!e?Object(_.jsx)(c.a,{to:"/profile/".concat(a.username)}):Object(_.jsxs)(_.Fragment,{children:[i.firstName&&i.lastName&&Object(_.jsx)(oe.a,{children:Object(_.jsxs)("title",{children:[i.firstName," ",i.lastName]})}),Object(_.jsx)(ce,{user:i,isOwner:u,onAvatarSubmit:function(e,a){var n=new FormData;n.append("image",e),n.append("crop",JSON.stringify(a)),t(Object(o.c)(n))},onCoverImageSubmit:function(e,a){var n=new FormData;n.append("image",e),n.append("crop",JSON.stringify(a)),t(Object(o.d)(n))},onStatusUpdate:function(e){t(Object(o.f)(e))}}),u&&Object(_.jsx)(l.a,{}),Object(_.jsx)(d.a,{posts:j})]}):Object(_.jsx)(c.a,{to:"/login"})}}}]);
//# sourceMappingURL=6.7eb076b4.chunk.js.map