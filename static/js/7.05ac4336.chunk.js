(this["webpackJsonpreact-social-network"]=this["webpackJsonpreact-social-network"]||[]).push([[7],{263:function(e,t,a){"use strict";a.d(t,"b",(function(){return u})),a.d(t,"a",(function(){return j})),a.d(t,"c",(function(){return m}));var s=a(6),n=a(0),i=a.n(n),r=a(270),c=a.n(r),o=a(16),l=a.n(o),d=a(1),u=function(e){var t=e.children,a=e.verticalAlign,n=void 0===a?"start":a,r=e.horizontalAlign,o=void 0===r?"start":r,u=e.padding,j=void 0===u?0:u,m=e.gap,b=void 0===m?0:m,g=e.bordered;return Object(d.jsxs)("div",{className:l()(c.a.row,Object(s.a)({},c.a.bordered,g)),style:{alignItems:"stretch",justifyContent:o,padding:j},children:[t instanceof Array&&t.map((function(e,a){return"boolean"!==typeof e&&i.a.cloneElement(e,{key:a,style:{marginRight:a===t.length-1?0:b,justifyContent:n},className:e.props.className+" "+c.a.col})})),t&&"boolean"!==typeof t&&!(t instanceof Array)&&i.a.cloneElement(t,{style:{marginRight:0,justifyContent:n},className:t.props.className+" "+c.a.col})]})},j=function(e){var t=e.children,a=e.style,n=e.verticalAlign,r=e.horizontalAlign,o=void 0===r?"start":r,u=e.padding,j=void 0===u?0:u,m=e.gap,b=void 0===m?0:m,g=e.bordered,O=e.stretch,_=void 0!==O&&O;return Object(d.jsx)("div",{className:l()(c.a.col,Object(s.a)({},c.a.bordered,g)),style:{padding:j,marginRight:null===a||void 0===a?void 0:a.marginRight,alignItems:o,justifyContent:n||(null===a||void 0===a?void 0:a.justifyContent),flex:_?1:void 0},children:i.a.Children.map(t,(function(e){return Object(d.jsx)("div",{className:c.a.item,style:{marginBottom:b},children:e})}))})},m=function(){return Object(d.jsx)("div",{className:c.a.space})}},264:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var s=a(33),n=(a(0),a(265)),i=a.n(n),r=a(17),c=a(1),o=function(e){var t=e.name,a=e.label,n=e.rules,o=e.control,l=e.rows,d=void 0===l?2:l,u=e.disabled,j=void 0!==u&&u,m=e.placeholder;return Object(c.jsx)(s.a,{control:o,name:t,rules:n,render:function(e){var t=e.field,s=e.fieldState;return Object(c.jsx)(r.c,{label:a,required:!(null===n||void 0===n||!n.required),error:s.error,disabled:j,children:Object(c.jsx)("textarea",{className:"".concat(i.a.textarea," ").concat(s.error?i.a.error:""),name:t.name,value:t.value,onChange:t.onChange,rows:d,disabled:j,placeholder:m})})}})}},265:function(e,t,a){e.exports={dark:"InputTextarea_dark__c3Uh-",textarea:"InputTextarea_textarea__29Lkx",error:"InputTextarea_error__7n4iw"}},270:function(e,t,a){e.exports={dark:"Flex_dark__10I9f",row:"Flex_row__3_1u3",bordered:"Flex_bordered__1vTO2",col:"Flex_col__1rgou",item:"Flex_item__3eYY8",space:"Flex_space__2U2zF"}},366:function(e,t,a){e.exports={dark:"Dialogs_dark__1xs_7",dialogs:"Dialogs_dialogs__3nzna",dialogsList:"Dialogs_dialogsList__1s20C",listActive:"Dialogs_listActive__2n8FH",dialogsListSwitch:"Dialogs_dialogsListSwitch__1ekHK",header:"Dialogs_header__ESqgA",newMessageForm:"Dialogs_newMessageForm__1L--7",messages:"Dialogs_messages__1XU6V"}},367:function(e,t,a){e.exports={dark:"NewMessageForm_dark__1Dm9s",newMessageForm:"NewMessageForm_newMessageForm__2u-OS"}},368:function(e,t,a){e.exports={dark:"Message_dark__3RzVL",messageOther:"Message_messageOther__3fTLP",messageSelf:"Message_messageSelf__1NjeZ",messageAvatar:"Message_messageAvatar__ekUyS",messageAuthorName:"Message_messageAuthorName__3SqBH"}},370:function(e,t,a){e.exports={dark:"DialogButton_dark__1fPBj",dialogButton:"DialogButton_dialogButton__1fLgP",active:"DialogButton_active__SVkhj"}},387:function(e,t,a){"use strict";a.r(t);var s=a(6),n=a(10),i=a(0),r=a(366),c=a.n(r),o=a(367),l=a.n(o),d=a(9),u=a(17),j=a(264),m=a(1),b=function(e){var t=e.onSubmit;return Object(m.jsx)(u.a,{onSubmit:function(e){t(e.newMessageInput)},initialValues:{newMessageInput:""},resetAfterSubmit:!0,submitOnEnter:!0,children:Object(m.jsxs)(u.b,{children:[Object(m.jsx)(j.a,{name:"newMessageInput"}),Object(m.jsx)("div",{className:l.a.button,children:Object(m.jsx)(d.a,{children:"Send"})})]})})},g=a(48),O=a(382),_=a(383),h=a(16),v=a.n(h),f=a(368),x=a.n(f),p=a(18),N=a(42),w=a(369),k=a.n(w),A=a(263),S=a(49),y=a(91),M=a(380),D=a(381),F=function(e){var t=e.message,a=e.authUser===t.author.username,s=Object(p.b)(),r=Object(i.useState)(!1),c=Object(n.a)(r,2),o=c[0],l=c[1];return Object(i.useEffect)((function(){!o||t.isRead||a||s(Object(N.e)(t._id))}),[o]),Object(m.jsx)(k.a,{onChange:function(e){l(e),o&&!t.isRead&&s(Object(N.e)(t.dialog))},children:Object(m.jsx)("div",{className:a?x.a.messageSelf:x.a.messageOther,children:Object(m.jsxs)(A.b,{gap:10,children:[Object(m.jsx)("div",{className:x.a.messageAvatar,children:Object(m.jsx)(S.a,{online:Object(y.a)(t.author.updatedAt),smallImg:t.author.avatar.small,size:30})}),Object(m.jsxs)("div",{children:[Object(m.jsx)("div",{className:x.a.messageAuthorName,children:t.author.firstName}),Object(m.jsx)("div",{children:t.text})]}),Object(m.jsx)(A.c,{}),Object(m.jsx)("div",{children:t.isRead?Object(m.jsx)(M.a,{}):Object(m.jsx)(D.a,{})})]})})})},C=a(370),I=a.n(C),L=a(20),z=function(e){var t=e.username,a=e.firstName,s=e.lastName,n=e.avatar;return Object(m.jsx)(L.b,{to:"/dialogs/".concat(t),className:I.a.dialogButton,activeClassName:I.a.active,title:"".concat(a," ").concat(s),children:Object(m.jsx)(S.a,{size:30,name:Object(y.c)(a,8),smallImg:n.small})})},B=function(e){var t=e.companion;return Object(m.jsxs)(A.b,{padding:10,verticalAlign:"center",children:[Object(m.jsx)(A.c,{}),Object(m.jsx)(A.a,{children:Object(m.jsxs)("div",{style:{fontWeight:700},children:[null===t||void 0===t?void 0:t.firstName," ",null===t||void 0===t?void 0:t.lastName]})}),Object(m.jsx)(A.c,{}),Object(m.jsx)(S.a,{online:Object(y.a)(null===t||void 0===t?void 0:t.updatedAt),smallImg:null===t||void 0===t?void 0:t.avatar.small,size:36})]})},E=function(e){var t=e.messages,a=e.dialogs,r=e.authUser,o=e.onNewMessageSubmit,l=e.currentCompanion,u=Object(i.useState)(!1),j=Object(n.a)(u,2),h=j[0],f=j[1];return Object(m.jsx)(g.a,{children:Object(m.jsxs)("div",{className:v()(c.a.dialogs,Object(s.a)({},c.a.listActive,h)),children:[Object(m.jsxs)("div",{className:c.a.header,children:[Object(m.jsxs)("div",{className:c.a.dialogsListSwitch,children:[!h&&Object(m.jsx)(d.a,{type:"text",size:"xl",onClick:function(){return f(!0)},children:Object(m.jsx)(d.a.Icon,{children:Object(m.jsx)(O.a,{width:22,height:22})})}),h&&Object(m.jsx)(d.a,{type:"text",size:"xl",onClick:function(){return f(!1)},children:Object(m.jsx)(d.a.Icon,{children:Object(m.jsx)(_.a,{width:22,height:22})})})]}),!!l&&Object(m.jsx)(B,{companion:l})]}),Object(m.jsx)("div",{className:v()(c.a.dialogsList,Object(s.a)({},c.a.listActive,h)),children:a.map((function(e){return Object(m.jsx)(z,{username:e.companion.username,firstName:e.companion.firstName,lastName:e.companion.lastName,avatar:e.companion.avatar},e._id)}))}),Object(m.jsx)("div",{className:c.a.messages,children:t.slice().reverse().map((function(e){return Object(m.jsx)(F,{message:e,authUser:r},e._id)}))}),Object(m.jsx)("div",{className:c.a.newMessageForm,children:Object(m.jsx)(b,{onSubmit:o})})]})})},R=a(19),U=a(62),T=a(305);t.default=function(){var e,t=Object(R.g)().username,a=Object(p.c)((function(e){return e.dialogs.dialogs.slice().sort((function(e,t){var a=new Date(e.updatedAt),s=new Date(t.updatedAt);return a>s?-1:a<s?1:0}))})),s=Object(p.c)((function(e){return e.dialogs.currentDialogId})),n=Object(p.c)((function(e){var t;return null===(t=e.auth.user)||void 0===t?void 0:t.username})),r=Object(p.c)((function(e){return e.dialogs.messages})),c=null===(e=a.find((function(e){return e.companion.username===t})))||void 0===e?void 0:e.companion,o=Object(p.b)();return Object(i.useEffect)((function(){return o(Object(N.d)(t)),function(){o(Object(N.a)())}}),[t,o]),Object(i.useEffect)((function(){o(Object(N.c)())}),[o]),Object(i.useEffect)((function(){}),[r,o]),Object(U.a)()?!t&&a[0]&&0!==a.length?Object(m.jsx)(R.a,{to:"/dialogs/".concat(a[0].companion.username)}):Object(m.jsxs)(m.Fragment,{children:[c&&Object(m.jsx)(T.a,{children:Object(m.jsxs)("title",{children:["Dialog - ",c.firstName," ",c.lastName]})}),Object(m.jsx)(E,{messages:r,dialogs:a,currentCompanion:c,authUser:n||"",onNewMessageSubmit:function(e){e.trim()&&s&&o(Object(N.f)(e.trim(),s))}})]}):Object(m.jsx)(R.a,{to:"/login"})}}}]);
//# sourceMappingURL=7.05ac4336.chunk.js.map